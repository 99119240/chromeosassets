/*
 RequireJS domReady 2.0.1 Copyright (c) 2010-2012, The Dojo Foundation All Rights Reserved.
 Available via the MIT or new BSD license.
 see: http://github.com/requirejs/domReady for details

 lodash 4.5.1 (Custom Build) lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 Build: `lodash -o ./dist/lodash.js`
 MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors  MIT License (c) copyright 2010-2014 original author or authors */
define("third_party/domready/domReady",[],function(){function c(){if(!g){g=!0;a&&clearInterval(a);var c=l;if(g&&c.length){l=[];var e;for(e=0;e<c.length;e+=1)c[e](w)}}}function p(a){g?a(w):l.push(a);return p}var m,k,a,e="undefined"!==typeof window&&window.document,g=!e,w=e?document:null,l=[];if(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1);else if(window.attachEvent){window.attachEvent("onload",c);k=document.createElement("div");
try{m=null===window.frameElement}catch(q){}k.doScroll&&m&&window.external&&(a=setInterval(function(){try{k.doScroll(),c()}catch(a){}},30))}"complete"===document.readyState&&c()}p.version="2.0.1";p.load=function(a,c,e,l){l.isBuild?e(null):p(e)};return p});
(function(){function c(c){var m=null;if(this.id===c)return this;if(this.hasChildNodes())for(var k=0,a=this.childNodes.length;k<a&&(this.childNodes[k].nodeType!==Node.ELEMENT_NODE||!(m=this.childNodes[k].getElementById(c))||m.id!==c);k++);return m}Element.prototype.clear=function(){if(this.hasChildNodes())for(;1<=this.childNodes.length;)this.removeChild(this.firstChild);return this};Element.prototype.removeElm=function(){return this.parentNode?(this.parentNode.removeChild(this),this):null};Function.prototype.bake=
function(c){var m=this,k=[].slice.call(arguments,1);return function(){return m.apply(c,k.concat([].slice.call(arguments,0)))}};Element.prototype.getElementById=c;DocumentFragment.prototype.getElementById=c})();define("qowtRoot/lib/framework/framework",function(){});
(function(){var c,p=p||{},m=this,k=function(b){return void 0!==b},a=function(){},e=function(b){var n=typeof b;if("object"==n)if(b){if(b instanceof Array)return"array";if(b instanceof Object)return n;var v=Object.prototype.toString.call(b);if("[object Window]"==v)return"object";if("[object Array]"==v||"number"==typeof b.length&&"undefined"!=typeof b.splice&&"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("splice"))return"array";if("[object Function]"==v||"undefined"!=typeof b.call&&
"undefined"!=typeof b.propertyIsEnumerable&&!b.propertyIsEnumerable("call"))return"function"}else return"null";else if("function"==n&&"undefined"==typeof b.call)return"object";return n},g=function(b){return"array"==e(b)},w=function(b){var n=e(b);return"array"==n||"object"==n&&"number"==typeof b.length},l=function(b){return"string"==typeof b},q=function(b){return"number"==typeof b},x=function(b){return"function"==e(b)},u=function(b){var n=typeof b;return"object"==n&&null!=b||"function"==n},N=function(b,
n,v){return b.call.apply(b.bind,arguments)},K=function(b,n,v){if(!b)throw Error();if(2<arguments.length){var a=Array.prototype.slice.call(arguments,2);return function(){var v=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(v,a);return b.apply(n,v)}}return function(){return b.apply(n,arguments)}},z=function(b,n,v){z=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?N:K;return z.apply(null,arguments)},A=function(b,n){var v=Array.prototype.slice.call(arguments,
1);return function(){var n=v.slice();n.push.apply(n,arguments);return b.apply(this,n)}},G=Date.now||function(){return+new Date},t=function(b,n){var v=b.split("."),a=m;v[0]in a||!a.execScript||a.execScript("var "+v[0]);for(var d;v.length&&(d=v.shift());)!v.length&&k(n)?a[d]=n:a=a[d]?a[d]:a[d]={}},E=function(b,n){function v(){}v.prototype=n.prototype;b.K=n.prototype;b.prototype=new v;b.Qc=function(b,v,a){return n.prototype[v].apply(b,Array.prototype.slice.call(arguments,2))}};Function.prototype.bind=
Function.prototype.bind||function(b,n){if(1<arguments.length){var v=Array.prototype.slice.call(arguments,1);v.unshift(this,b);return z.apply(null,v)}return z(this,b)};var O=function(b){if(Error.captureStackTrace)Error.captureStackTrace(this,O);else{var n=Error().stack;n&&(this.stack=n)}b&&(this.message=String(b))};E(O,Error);O.prototype.name="CustomError";var qa=String.prototype.trim?function(b){return b.trim()}:function(b){return b.replace(/^[\s\xa0]+|[\s\xa0]+$/g,"")},T=function(b,n){return b<n?
-1:b>n?1:0},H=Array.prototype,ra=H.indexOf?function(b,n,v){return H.indexOf.call(b,n,v)}:function(b,n,v){v=null==v?0:0>v?Math.max(0,b.length+v):v;if(l(b))return l(n)&&1==n.length?b.indexOf(n,v):-1;for(;v<b.length;v++)if(v in b&&b[v]===n)return v;return-1},fa=H.forEach?function(b,n,v){H.forEach.call(b,n,v)}:function(b,n,v){for(var a=b.length,d=l(b)?b.split(""):b,c=0;c<a;c++)c in d&&n.call(v,d[c],c,b)},W=H.some?function(b,n,v){return H.some.call(b,n,v)}:function(b,n,v){for(var a=b.length,d=l(b)?b.split(""):
b,c=0;c<a;c++)if(c in d&&n.call(v,d[c],c,b))return!0;return!1},h=H.every?function(b,n,v){return H.every.call(b,n,v)}:function(b,n,v){for(var a=b.length,d=l(b)?b.split(""):b,c=0;c<a;c++)if(c in d&&!n.call(v,d[c],c,b))return!1;return!0},R=function(b){var n;a:{n=Od;for(var v=b.length,a=l(b)?b.split(""):b,d=0;d<v;d++)if(d in a&&n.call(void 0,a[d],d,b)){n=d;break a}n=-1}return 0>n?null:l(b)?b.charAt(n):b[n]},ab=function(b,n){var v=ra(b,n),a;(a=0<=v)&&H.splice.call(b,v,1);return a},Cc=function(b){return H.concat.apply(H,
arguments)},Lb=function(b,n,v){return 2>=arguments.length?H.slice.call(b,n):H.slice.call(b,n,v)},Dc="StopIteration"in m?m.StopIteration:Error("StopIteration"),xb=function(){};xb.prototype.next=function(){throw Dc;};xb.prototype.wc=function(){return this};var bb=function(b,n,v){for(var a in b)n.call(v,b[a],a,b)},Ca=function(b){var n=[],v=0,a;for(a in b)n[v++]=b[a];return n},Mb=function(b){var n=[],v=0,a;for(a in b)n[v++]=a;return n},Nb=function(b,n){var v;a:{for(v in b)if(n.call(void 0,b[v],v,b))break a;
v=void 0}return v&&b[v]},Da="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" "),Ob=function(b,n){for(var v,a,d=1;d<arguments.length;d++){a=arguments[d];for(v in a)b[v]=a[v];for(var c=0;c<Da.length;c++)v=Da[c],Object.prototype.hasOwnProperty.call(a,v)&&(b[v]=a[v])}},ga=function(b,n){this.q={};this.b=[];this.ra=this.j=0;var v=arguments.length;if(1<v){if(v%2)throw Error("Uneven number of arguments");for(var a=0;a<v;a+=2)this.set(arguments[a],arguments[a+
1])}else b&&this.la(b)};ga.prototype.w=function(){kb(this);for(var b=[],n=0;n<this.b.length;n++)b.push(this.q[this.b[n]]);return b};ga.prototype.H=function(){kb(this);return this.b.concat()};ga.prototype.R=function(b){return cb(this.q,b)};ga.prototype.remove=function(b){return cb(this.q,b)?(delete this.q[b],this.j--,this.ra++,this.b.length>2*this.j&&kb(this),!0):!1};var kb=function(b){if(b.j!=b.b.length){for(var n=0,a=0;n<b.b.length;){var d=b.b[n];cb(b.q,d)&&(b.b[a++]=d);n++}b.b.length=a}if(b.j!=
b.b.length){for(var c={},a=n=0;n<b.b.length;)d=b.b[n],cb(c,d)||(b.b[a++]=d,c[d]=1),n++;b.b.length=a}};c=ga.prototype;c.get=function(b,n){return cb(this.q,b)?this.q[b]:n};c.set=function(b,n){cb(this.q,b)||(this.j++,this.b.push(b),this.ra++);this.q[b]=n};c.la=function(b){var n;b instanceof ga?(n=b.H(),b=b.w()):(n=Mb(b),b=Ca(b));for(var a=0;a<n.length;a++)this.set(n[a],b[a])};c.forEach=function(b,n){for(var a=this.H(),d=0;d<a.length;d++){var c=a[d],h=this.get(c);b.call(n,h,c,this)}};c.clone=function(){return new ga(this)};
c.Lb=function(){kb(this);for(var b={},n=0;n<this.b.length;n++){var a=this.b[n];b[a]=this.q[a]}return b};c.wc=function(b){kb(this);var n=0,a=this.b,d=this.q,c=this.ra,h=this,e=new xb;e.next=function(){for(;;){if(c!=h.ra)throw Error("The map has changed since the iterator was created");if(n>=a.length)throw Dc;var e=a[n++];return b?e:d[e]}};return e};var cb=function(b,n){return Object.prototype.hasOwnProperty.call(b,n)},r,lb,Ec={id:"hitType",name:"t",valueType:"text",maxLength:void 0,defaultValue:void 0},
Fc={id:"sessionControl",name:"sc",valueType:"text",maxLength:void 0,defaultValue:void 0},yb={id:"description",name:"cd",valueType:"text",maxLength:2048,defaultValue:void 0},Gc={id:"eventCategory",name:"ec",valueType:"text",maxLength:150,defaultValue:void 0},Pb={id:"eventAction",name:"ea",valueType:"text",maxLength:500,defaultValue:void 0},zb={id:"eventLabel",name:"el",valueType:"text",maxLength:500,defaultValue:void 0},Ab={id:"eventValue",name:"ev",valueType:"integer",maxLength:void 0,defaultValue:void 0},
dc={qd:Ec,Rc:{id:"anonymizeIp",name:"aip",valueType:"boolean",maxLength:void 0,defaultValue:void 0},Bd:{id:"queueTime",name:"qt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Xc:{id:"cacheBuster",name:"z",valueType:"text",maxLength:void 0,defaultValue:void 0},Hd:Fc,Id:{id:"sessionGroup",name:"sg",valueType:"text",maxLength:void 0,defaultValue:void 0},Yd:{id:"userId",name:"uid",valueType:"text",maxLength:void 0,defaultValue:void 0},yd:{id:"nonInteraction",name:"ni",valueType:"boolean",
maxLength:void 0,defaultValue:void 0},gd:yb,Rd:{id:"title",name:"dt",valueType:"text",maxLength:1500,defaultValue:void 0},Tc:{id:"appId",name:"aid",valueType:"text",maxLength:150,defaultValue:void 0},Uc:{id:"appInstallerId",name:"aiid",valueType:"text",maxLength:150,defaultValue:void 0},kd:Gc,jd:Pb,ld:zb,md:Ab,Kd:{id:"socialNetwork",name:"sn",valueType:"text",maxLength:50,defaultValue:void 0},Jd:{id:"socialAction",name:"sa",valueType:"text",maxLength:50,defaultValue:void 0},Ld:{id:"socialTarget",
name:"st",valueType:"text",maxLength:2048,defaultValue:void 0},Ud:{id:"transactionId",name:"ti",valueType:"text",maxLength:500,defaultValue:void 0},Td:{id:"transactionAffiliation",name:"ta",valueType:"text",maxLength:500,defaultValue:void 0},Vd:{id:"transactionRevenue",name:"tr",valueType:"currency",maxLength:void 0,defaultValue:void 0},Wd:{id:"transactionShipping",name:"ts",valueType:"currency",maxLength:void 0,defaultValue:void 0},Xd:{id:"transactionTax",name:"tt",valueType:"currency",maxLength:void 0,
defaultValue:void 0},ed:{id:"currencyCode",name:"cu",valueType:"text",maxLength:10,defaultValue:void 0},ud:{id:"itemPrice",name:"ip",valueType:"currency",maxLength:void 0,defaultValue:void 0},vd:{id:"itemQuantity",name:"iq",valueType:"integer",maxLength:void 0,defaultValue:void 0},sd:{id:"itemCode",name:"ic",valueType:"text",maxLength:500,defaultValue:void 0},td:{id:"itemName",name:"in",valueType:"text",maxLength:500,defaultValue:void 0},rd:{id:"itemCategory",name:"iv",valueType:"text",maxLength:500,
defaultValue:void 0},cd:{id:"campaignSource",name:"cs",valueType:"text",maxLength:100,defaultValue:void 0},ad:{id:"campaignMedium",name:"cm",valueType:"text",maxLength:50,defaultValue:void 0},bd:{id:"campaignName",name:"cn",valueType:"text",maxLength:100,defaultValue:void 0},$c:{id:"campaignKeyword",name:"ck",valueType:"text",maxLength:500,defaultValue:void 0},Yc:{id:"campaignContent",name:"cc",valueType:"text",maxLength:500,defaultValue:void 0},Zc:{id:"campaignId",name:"ci",valueType:"text",maxLength:100,
defaultValue:void 0},pd:{id:"gclid",name:"gclid",valueType:"text",maxLength:void 0,defaultValue:void 0},fd:{id:"dclid",name:"dclid",valueType:"text",maxLength:void 0,defaultValue:void 0},Ad:{id:"pageLoadTime",name:"plt",valueType:"integer",maxLength:void 0,defaultValue:void 0},hd:{id:"dnsTime",name:"dns",valueType:"integer",maxLength:void 0,defaultValue:void 0},Md:{id:"tcpConnectTime",name:"tcp",valueType:"integer",maxLength:void 0,defaultValue:void 0},Gd:{id:"serverResponseTime",name:"srt",valueType:"integer",
maxLength:void 0,defaultValue:void 0},zd:{id:"pageDownloadTime",name:"pdt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Cd:{id:"redirectResponseTime",name:"rrt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Nd:{id:"timingCategory",name:"utc",valueType:"text",maxLength:150,defaultValue:void 0},Qd:{id:"timingVar",name:"utv",valueType:"text",maxLength:500,defaultValue:void 0},Pd:{id:"timingValue",name:"utt",valueType:"integer",maxLength:void 0,defaultValue:void 0},Od:{id:"timingLabel",
name:"utl",valueType:"text",maxLength:500,defaultValue:void 0},nd:{id:"exDescription",name:"exd",valueType:"text",maxLength:150,defaultValue:void 0},od:{id:"exFatal",name:"exf",valueType:"boolean",maxLength:void 0,defaultValue:"1"}},Hc=function(b){if(1>b||200<b)throw Error("Expected dimension index range 1-200, but was : "+b);return{id:"dimension"+b,name:"cd"+b,valueType:"text",maxLength:150,defaultValue:void 0}},Ic=function(b){if(1>b||200<b)throw Error("Expected metric index range 1-200, but was : "+
b);return{id:"metric"+b,name:"cm"+b,valueType:"integer",maxLength:void 0,defaultValue:void 0}},Jc=function(b){if(1>b)return"0";if(3>b)return"1-2";b=Math.floor(Math.log(b-1)/Math.log(2));return Math.pow(2,b)+1+"-"+Math.pow(2,b+1)},gd=function(b,n){for(var a=0,d=b.length-1,c=0;a<=d;){var h=Math.floor((a+d)/2),c=b[h];if(n<=c){d=0==h?0:b[h-1];if(n>d)return(d+1).toString()+"-"+c.toString();d=h-1}else if(n>c){if(h>=b.length-1)return(b[b.length-1]+1).toString()+"+";a=h+1}}return"<= 0"},Na=function(){this.bb=
[]},Kc=function(){return new Na};c=Na.prototype;c.when=function(b){this.bb.push(b);return this};c.Ab=function(b){var n=arguments;this.when(function(b){return 0<=ra(n,b.Ib())});return this};c.Pc=function(b,n){var a=Lb(arguments,1);this.when(function(n){n=n.W().get(b);return 0<=ra(a,n)});return this};c.zb=function(b,n){if(u(this.g))throw Error("Filter has already been set.");this.g=u(n)?z(b,n):b;return this};c.Da=function(){if(0==this.bb.length)throw Error("Must specify at least one predicate using #when or a helper method.");
if(!u(this.g))throw Error("Must specify a delegate filter using #applyFilter.");return z(function(b){h(this.bb,function(n){return n(b)})&&this.g(b)},this)};var la=function(){this.Cb=!1;this.Db="";this.sb=!1;this.Aa=null};la.prototype.xc=function(b){this.Cb=!0;this.Db=b||" - ";return this};la.prototype.Oc=function(){this.sb=!0;return this};la.prototype.Fc=function(){return Ea(this,Jc)};la.prototype.Gc=function(b){return Ea(this,A(gd,b))};var Ea=function(b,n){if(null!=b.Aa)throw Error("LabelerBuilder: Only one labeling strategy may be used.");
b.Aa=z(function(b){var a=b.W().get(Ab),d=b.W().get(zb);q(a)&&(a=n(a),null!=d&&this.Cb&&(a=d+this.Db+a),b.W().set(zb,a))},b);return b};la.prototype.Da=function(){if(null==this.Aa)throw Error("LabelerBuilder: a labeling strategy must be specified prior to calling build().");return Kc().Ab("event").zb(z(function(b){this.Aa(b);this.sb&&b.W().remove(Ab)},this)).Da()};var ec=function(b,n){var a=Array.prototype.slice.call(arguments),d=a.shift();if("undefined"==typeof d)throw Error("[goog.string.format] Template required");
return d.replace(/%([0\-\ \+]*)(\d+)?(\.(\d+))?([%sfdiu])/g,function(b,n,d,c,h,e,l,k){if("%"==e)return"%";var g=a.shift();if("undefined"==typeof g)throw Error("[goog.string.format] Not enough arguments");arguments[0]=g;return ja[e].apply(null,arguments)})},ja={s:function(b,n,a){return isNaN(a)||""==a||b.length>=a?b:-1<n.indexOf("-",0)?b+Array(a-b.length+1).join(" "):Array(a-b.length+1).join(" ")+b},f:function(b,n,a,d,c){d=b.toString();isNaN(c)||""==c||(d=b.toFixed(c));var h;h=0>b?"-":0<=n.indexOf("+")?
"+":0<=n.indexOf(" ")?" ":"";0<=b&&(d=h+d);if(isNaN(a)||d.length>=a)return d;d=isNaN(c)?Math.abs(b).toString():Math.abs(b).toFixed(c);b=a-d.length-h.length;return 0<=n.indexOf("-",0)?h+d+Array(b+1).join(" "):h+Array(b+1).join(0<=n.indexOf("0",0)?"0":" ")+d},d:function(b,n,a,d,c,h,e,l){return ja.f(parseInt(b,10),n,a,d,0,h,e,l)}};ja.i=ja.d;ja.u=ja.d;var hd=function(b){if("function"==typeof b.w)return b.w();if(l(b))return b.split("");if(w(b)){for(var n=[],a=b.length,d=0;d<a;d++)n.push(b[d]);return n}return Ca(b)},
fc=function(b,n){if("function"==typeof b.forEach)b.forEach(n,void 0);else if(w(b)||l(b))fa(b,n,void 0);else{var a;if("function"==typeof b.H)a=b.H();else if("function"!=typeof b.w)if(w(b)||l(b)){a=[];for(var d=b.length,c=0;c<d;c++)a.push(c)}else a=Mb(b);else a=void 0;for(var d=hd(b),c=d.length,h=0;h<c;h++)n.call(void 0,d[h],a&&a[h],b)}},Z=function(b){this.F=new ga;if(0<arguments.length%2)throw Error("Uneven number of arguments to ParameterMap constructor.");for(var n=arguments,a=0;a<n.length;a+=2)this.set(n[a],
n[a+1])};Z.prototype.set=function(b,n){if(null==n)throw Error("undefined-or-null value for key: "+b.name);this.F.set(b.name,{key:b,value:n})};Z.prototype.remove=function(b){this.F.remove(b.name)};Z.prototype.get=function(b){b=this.F.get(b.name,null);return null===b?null:b.value};Z.prototype.la=function(b){this.F.la(b.F)};var mb=function(b,n){fa(b.F.w(),function(b){n(b.key,b.value)})};Z.prototype.Lb=function(){var b={};mb(this,function(n,a){b[n.id]=a});return b};Z.prototype.clone=function(){var b=
new Z;b.F=this.F.clone();return b};Z.prototype.toString=function(){var b={};mb(this,function(n,a){b[n.id]=a});return JSON.stringify(b)};var aa=function(b){this.g=b};c=aa.prototype;c.yc=function(b){var n=new aa(z(this.Q,this));n.I=Gc;n.M=b;return n};c.action=function(b){var n=new aa(z(this.Q,this));n.I=Pb;n.M=b;return n};c.label=function(b){var n=new aa(z(this.Q,this));n.I=zb;n.M=b;return n};c.value=function(b){var n=new aa(z(this.Q,this));n.I=Ab;n.M=b;return n};c.zc=function(b){var n=new aa(z(this.Q,
this));n.I=Hc(b.index);n.M=b.value;return n};c.Ec=function(b){var n=new aa(z(this.Q,this));n.I=Ic(b.index);n.M=b.value;return n};c.send=function(b){var n=new Z;this.Q(n);return b.send("event",n)};c.Q=function(b){null!=this.I&&null!=this.M&&!b.F.R(this.I.name)&&b.set(this.I,this.M);u(this.g)&&this.g(b)};var id=new aa(a),Fa=function(){this.ba=this.ba;this.Ea=this.Ea};Fa.prototype.ba=!1;Fa.prototype.$=function(){this.ba||(this.ba=!0,this.l())};Fa.prototype.l=function(){if(this.Ea)for(;this.Ea.length;)this.Ea.shift()()};
var Oa=function(b,n){this.type=b;this.currentTarget=this.target=n;this.defaultPrevented=this.X=!1;this.nb=!0};Oa.prototype.l=function(){};Oa.prototype.$=function(){};Oa.prototype.preventDefault=function(){this.defaultPrevented=!0;this.nb=!1};var gc=function(b){gc[" "](b);return b};gc[" "]=a;var ua;a:{var ba=m.navigator;if(ba){var nb=ba.userAgent;if(nb){ua=nb;break a}}ua=""}var va=function(b){return-1!=ua.indexOf(b)},ob=va("Opera")||va("OPR"),P=va("Trident")||va("MSIE"),ia=va("Gecko")&&-1==ua.toLowerCase().indexOf("webkit")&&
!(va("Trident")||va("MSIE")),Pa=-1!=ua.toLowerCase().indexOf("webkit"),wa=function(){var b=m.document;return b?b.documentMode:void 0},Ga=function(){var b="",n;if(ob&&m.opera)return b=m.opera.version,x(b)?b():b;ia?n=/rv\:([^\);]+)(\)|;)/:P?n=/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/:Pa&&(n=/WebKit\/(\S+)/);n&&(b=(b=n.exec(ua))?b[1]:"");return P&&(n=wa(),n>parseFloat(b))?String(n):b}(),Qb={},I=function(b){var n;if(!(n=Qb[b])){n=0;for(var a=qa(String(Ga)).split("."),d=qa(String(b)).split("."),c=Math.max(a.length,
d.length),h=0;0==n&&h<c;h++){var e=a[h]||"",l=d[h]||"",k=/(\d*)(\D*)/g,g=/(\d*)(\D*)/g;do{var p=k.exec(e)||["","",""],m=g.exec(l)||["","",""];if(0==p[0].length&&0==m[0].length)break;n=T(0==p[1].length?0:parseInt(p[1],10),0==m[1].length?0:parseInt(m[1],10))||T(0==p[2].length,0==m[2].length)||T(p[2],m[2])}while(0==n)}n=Qb[b]=0<=n}return n},M=m.document,db=M&&P?wa()||("CSS1Compat"==M.compatMode?parseInt(Ga,10):5):void 0,B=!P||P&&9<=db,U=P&&!I("9"),C=!Pa||I("528"),hc=ia&&I("1.9b")||P&&I("8")||ob&&I("9.5")||
Pa&&I("528"),pe=ia&&!I("8")||P&&!I("9"),Rb=function(b,n){Oa.call(this,b?b.type:"");this.relatedTarget=this.currentTarget=this.target=null;this.charCode=this.keyCode=this.button=this.screenY=this.screenX=this.clientY=this.clientX=this.offsetY=this.offsetX=0;this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1;this.Fb=this.state=null;if(b){var a=this.type=b.type;this.target=b.target||b.srcElement;this.currentTarget=n;var d=b.relatedTarget;if(d){if(ia){var c;a:{try{gc(d.nodeName);c=!0;break a}catch(h){}c=
!1}c||(d=null)}}else"mouseover"==a?d=b.fromElement:"mouseout"==a&&(d=b.toElement);this.relatedTarget=d;this.offsetX=Pa||void 0!==b.offsetX?b.offsetX:b.layerX;this.offsetY=Pa||void 0!==b.offsetY?b.offsetY:b.layerY;this.clientX=void 0!==b.clientX?b.clientX:b.pageX;this.clientY=void 0!==b.clientY?b.clientY:b.pageY;this.screenX=b.screenX||0;this.screenY=b.screenY||0;this.button=b.button;this.keyCode=b.keyCode||0;this.charCode=b.charCode||("keypress"==a?b.keyCode:0);this.ctrlKey=b.ctrlKey;this.altKey=
b.altKey;this.shiftKey=b.shiftKey;this.metaKey=b.metaKey;this.state=b.state;this.Fb=b;b.defaultPrevented&&this.preventDefault()}};E(Rb,Oa);Rb.prototype.preventDefault=function(){Rb.K.preventDefault.call(this);var b=this.Fb;if(b.preventDefault)b.preventDefault();else if(b.returnValue=!1,U)try{if(b.ctrlKey||112<=b.keyCode&&123>=b.keyCode)b.keyCode=-1}catch(n){}};Rb.prototype.l=function(){};var eb="closure_listenable_"+(1E6*Math.random()|0),ca=function(b){return!(!b||!b[eb])},Pd=0,jd=function(b,n,a,
d,c){this.O=b;this.proxy=null;this.src=n;this.type=a;this.sa=!!d;this.va=c;this.key=++Pd;this.removed=this.ta=!1},Ha=function(b){b.removed=!0;b.O=null;b.proxy=null;b.src=null;b.va=null},sa=function(b){this.src=b;this.k={};this.ca=0};sa.prototype.add=function(b,n,a,d,c){var h=b.toString();(b=this.k[h])||(b=this.k[h]=[],this.ca++);var e=Qa(b,n,d,c);-1<e?(n=b[e],a||(n.ta=!1)):(n=new jd(n,this.src,h,!!d,c),n.ta=a,b.push(n));return n};sa.prototype.remove=function(b,n,a,d){b=b.toString();if(!(b in this.k))return!1;
var c=this.k[b];n=Qa(c,n,a,d);return-1<n?(Ha(c[n]),H.splice.call(c,n,1),0==c.length&&(delete this.k[b],this.ca--),!0):!1};var Aa=function(b,n){var a=n.type;if(!(a in b.k))return!1;var d=ab(b.k[a],n);d&&(Ha(n),0==b.k[a].length&&(delete b.k[a],b.ca--));return d};sa.prototype.removeAll=function(b){b=b&&b.toString();var n=0,a;for(a in this.k)if(!b||a==b){for(var d=this.k[a],c=0;c<d.length;c++)++n,Ha(d[c]);delete this.k[a];this.ca--}return n};sa.prototype.aa=function(b,n,a,d){b=this.k[b.toString()];var c=
-1;b&&(c=Qa(b,n,a,d));return-1<c?b[c]:null};var Qa=function(b,n,a,d){for(var c=0;c<b.length;++c){var h=b[c];if(!h.removed&&h.O==n&&h.sa==!!a&&h.va==d)return c}return-1},qe="closure_lm_"+(1E6*Math.random()|0),d={},Ne=0,kd=function(b,n,a,d,c){if(g(n)){for(var h=0;h<n.length;h++)kd(b,n[h],a,d,c);return null}a=ic(a);return ca(b)?b.listen(n,a,d,c):Oe(b,n,a,!1,d,c)},Oe=function(b,n,a,d,c,h){if(!n)throw Error("Invalid event type");var e=!!c,l=Sb(b);l||(b[qe]=l=new sa(b));a=l.add(n,a,d,c,h);if(a.proxy)return a;
d=wf();a.proxy=d;d.src=b;d.O=a;b.addEventListener?b.addEventListener(n.toString(),d,e):b.attachEvent(Ra(n.toString()),d);Ne++;return a},wf=function(){var b=xf,n=B?function(a){return b.call(n.src,n.O,a)}:function(a){a=b.call(n.src,n.O,a);if(!a)return a};return n},Pe=function(b,n,a,d,c){if(g(n)){for(var h=0;h<n.length;h++)Pe(b,n[h],a,d,c);return null}a=ic(a);return ca(b)?b.cb(n,a,d,c):Oe(b,n,a,!0,d,c)},Qe=function(b,n,a,d,c){if(g(n))for(var h=0;h<n.length;h++)Qe(b,n[h],a,d,c);else a=ic(a),ca(b)?b.Wa(n,
a,d,c):b&&(b=Sb(b))&&(n=b.aa(n,a,!!d,c))&&ld(n)},ld=function(b){if(q(b)||!b||b.removed)return!1;var n=b.src;if(ca(n))return Aa(n.D,b);var a=b.type,d=b.proxy;n.removeEventListener?n.removeEventListener(a,d,b.sa):n.detachEvent&&n.detachEvent(Ra(a),d);Ne--;(a=Sb(n))?(Aa(a,b),0==a.ca&&(a.src=null,n[qe]=null)):Ha(b);return!0},Ra=function(b){return b in d?d[b]:d[b]="on"+b},Se=function(b,n,a,d){var c=1;if(b=Sb(b))if(n=b.k[n.toString()])for(n=n.concat(),b=0;b<n.length;b++){var h=n[b];h&&h.sa==a&&!h.removed&&
(c&=!1!==Re(h,d))}return Boolean(c)},Re=function(b,n){var a=b.O,d=b.va||b.src;b.ta&&ld(b);return a.call(d,n)},xf=function(b,n){if(b.removed)return!0;if(!B){var a;if(!(a=n))a:{a=["window","event"];for(var d=m,c;c=a.shift();)if(null!=d[c])d=d[c];else{a=null;break a}a=d}c=a;a=new Rb(c,this);d=!0;if(!(0>c.keyCode||void 0!=c.returnValue)){a:{var h=!1;if(0==c.keyCode)try{c.keyCode=-1;break a}catch(e){h=!0}if(h||void 0==c.returnValue)c.returnValue=!0}c=[];for(h=a.currentTarget;h;h=h.parentNode)c.push(h);
for(var h=b.type,l=c.length-1;!a.X&&0<=l;l--)a.currentTarget=c[l],d&=Se(c[l],h,!0,a);for(l=0;!a.X&&l<c.length;l++)a.currentTarget=c[l],d&=Se(c[l],h,!1,a)}return d}return Re(b,new Rb(n,this))},Sb=function(b){b=b[qe];return b instanceof sa?b:null},jc="__closure_events_fn_"+(1E9*Math.random()>>>0),ic=function(b){if(x(b))return b;b[jc]||(b[jc]=function(n){return b.handleEvent(n)});return b[jc]},Y=function(){Fa.call(this);this.D=new sa(this);this.mc=this;this.Ra=null};E(Y,Fa);Y.prototype[eb]=!0;c=Y.prototype;
c.addEventListener=function(b,n,a,d){kd(this,b,n,a,d)};c.removeEventListener=function(b,n,a,d){Qe(this,b,n,a,d)};c.dispatchEvent=function(b){var n,a=this.Ra;if(a){n=[];for(var d=1;a;a=a.Ra)n.push(a),++d}a=this.mc;d=b.type||b;if(l(b))b=new Oa(b,a);else if(b instanceof Oa)b.target=b.target||a;else{var c=b;b=new Oa(d,a);Ob(b,c)}var c=!0,h;if(n)for(var e=n.length-1;!b.X&&0<=e;e--)h=b.currentTarget=n[e],c=Lc(h,d,!0,b)&&c;b.X||(h=b.currentTarget=a,c=Lc(h,d,!0,b)&&c,b.X||(c=Lc(h,d,!1,b)&&c));if(n)for(e=
0;!b.X&&e<n.length;e++)h=b.currentTarget=n[e],c=Lc(h,d,!1,b)&&c;return c};c.l=function(){Y.K.l.call(this);this.D&&this.D.removeAll(void 0);this.Ra=null};c.listen=function(b,a,d,c){return this.D.add(String(b),a,!1,d,c)};c.cb=function(b,a,d,c){return this.D.add(String(b),a,!0,d,c)};c.Wa=function(b,a,d,c){return this.D.remove(String(b),a,d,c)};var Lc=function(b,a,d,c){a=b.D.k[String(a)];if(!a)return!0;a=a.concat();for(var h=!0,e=0;e<a.length;++e){var l=a[e];if(l&&!l.removed&&l.sa==d){var k=l.O,g=l.va||
l.src;l.ta&&Aa(b.D,l);h=!1!==k.call(g,c)&&h}}return h&&0!=c.nb};Y.prototype.aa=function(b,a,d,c){return this.D.aa(String(b),a,d,c)};var md=function(b){m.setTimeout(function(){throw b;},0)},kc,nd=function(){var b=m.MessageChannel;"undefined"===typeof b&&"undefined"!==typeof window&&window.postMessage&&window.addEventListener&&(b=function(){var b=document.createElement("iframe");b.style.display="none";b.src="";document.documentElement.appendChild(b);var a=b.contentWindow,b=a.document;b.open();b.write("");
b.close();var n="callImmediate"+Math.random(),d="file:"==a.location.protocol?"*":a.location.protocol+"//"+a.location.host,b=z(function(b){if(("*"==d||b.origin==d)&&b.data==n)this.port1.onmessage()},this);a.addEventListener("message",b,!1);this.port1={};this.port2={postMessage:function(){a.postMessage(n,d)}}});if("undefined"!==typeof b&&!va("Trident")&&!va("MSIE")){var a=new b,d={},c=d;a.port1.onmessage=function(){if(k(d.next)){d=d.next;var b=d.Hb;d.Hb=null;b()}};return function(b){c.next={Hb:b};c=
c.next;a.port2.postMessage(0)}}return"undefined"!==typeof document&&"onreadystatechange"in document.createElement("script")?function(b){var a=document.createElement("script");a.onreadystatechange=function(){a.onreadystatechange=null;a.parentNode.removeChild(a);a=null;b();b=null};document.documentElement.appendChild(a)}:function(b){m.setTimeout(b,0)}},Ta=function(b,a){Sa||Tb();xa||(Sa(),xa=!0);Mc.push(new Qd(b,a))},Sa,Tb=function(){if(m.Promise&&m.Promise.resolve){var b=m.Promise.resolve();Sa=function(){b.then(Bb)}}else Sa=
function(){var b=Bb;!x(m.setImmediate)||m.Window&&m.Window.prototype.setImmediate==m.setImmediate?(kc||(kc=nd()),kc(b)):m.setImmediate(b)}},xa=!1,Mc=[],Bb=function(){for(;Mc.length;){var b=Mc;Mc=[];for(var a=0;a<b.length;a++){var d=b[a];try{d.Ac.call(d.scope)}catch(c){md(c)}}}xa=!1},Qd=function(b,a){this.Ac=b;this.scope=a},pb=function(b){b.prototype.then=b.prototype.then;b.prototype.$goog_Thenable=!0},Rd=function(b){if(!b)return!1;try{return!!b.$goog_Thenable}catch(a){return!1}},fb=function(b,a){this.n=
0;this.B=void 0;this.o=this.p=null;this.wa=this.Ma=!1;try{var d=this;b.call(a,function(b){qb(d,2,b)},function(b){qb(d,3,b)})}catch(c){qb(this,3,c)}};fb.prototype.then=function(b,a,d){return Ia(this,x(b)?b:null,x(a)?a:null,d)};pb(fb);fb.prototype.cancel=function(b){0==this.n&&Ta(function(){var a=new Cb(b);S(this,a)},this)};var S=function(b,a){if(0==b.n)if(b.p){var d=b.p;if(d.o){for(var c=0,h=-1,e=0,l;l=d.o[e];e++)if(l=l.xa)if(c++,l==b&&(h=e),0<=h&&1<c)break;0<=h&&(0==d.n&&1==c?S(d,a):(c=d.o.splice(h,
1)[0],Nc(d),c.Oa(a)))}}else qb(b,3,a)},yf=function(b,a){b.o&&b.o.length||2!=b.n&&3!=b.n||b.Ma||(b.Ma=!0,Ta(b.vc,b));b.o||(b.o=[]);b.o.push(a)},Ia=function(b,a,d,c){var h={xa:null,kb:null,Oa:null};h.xa=new fb(function(b,e){h.kb=a?function(d){try{var h=a.call(c,d);b(h)}catch(l){e(l)}}:b;h.Oa=d?function(a){try{var n=d.call(c,a);!k(n)&&a instanceof Cb?e(a):b(n)}catch(h){e(h)}}:e});h.xa.p=b;yf(b,h);return h.xa};fb.prototype.xb=function(b){this.n=0;qb(this,2,b)};fb.prototype.yb=function(b){this.n=0;qb(this,
3,b)};var qb=function(b,a,d){if(0==b.n){if(b==d)a=3,d=new TypeError("Promise cannot resolve to itself");else{if(Rd(d)){b.n=1;d.then(b.xb,b.yb,b);return}if(u(d))try{var c=d.then;if(x(c)){Oc(b,d,c);return}}catch(h){a=3,d=h}}b.B=d;b.n=a;b.Ma||(b.Ma=!0,Ta(b.vc,b));3!=a||d instanceof Cb||od(b,d)}},Oc=function(b,a,d){b.n=1;var c=!1,h=function(a){c||(c=!0,b.xb(a))},e=function(a){c||(c=!0,b.yb(a))};try{d.call(a,h,e)}catch(l){e(l)}};fb.prototype.vc=function(){for(;this.o&&this.o.length;){var b=this.o;this.o=
[];for(var a=0;a<b.length;a++){var d=b[a],c=this.B;2==this.n?d.kb(c):(Nc(this),d.Oa(c))}}this.Ma=!1};var Nc=function(b){for(;b&&b.wa;b=b.p)b.wa=!1},od=function(b,a){b.wa=!0;Ta(function(){b.wa&&re.call(null,a)})},re=md,Cb=function(b){O.call(this,b)};E(Cb,O);Cb.prototype.name="cancel";var V=function(b,a){this.ma=[];this.ib=b;this.hb=a||null;this.Z=this.A=!1;this.B=void 0;this.La=this.Nb=this.Ka=!1;this.na=0;this.p=null;this.Ja=0};V.prototype.cancel=function(b){if(this.A)this.B instanceof V&&this.B.cancel();
else{if(this.p){var a=this.p;delete this.p;b?a.cancel(b):(a.Ja--,0>=a.Ja&&a.cancel())}this.ib?this.ib.call(this.hb,this):this.La=!0;this.A||this.C(new Ub)}};V.prototype.jb=function(b,a){this.Ka=!1;Db(this,b,a)};var Db=function(b,a,d){b.A=!0;b.B=d;b.Z=!a;pd(b)},rb=function(b){if(b.A){if(!b.La)throw new Eb;b.La=!1}};V.prototype.t=function(b){rb(this);Db(this,!0,b)};V.prototype.C=function(b){rb(this);Db(this,!1,b)};V.prototype.N=function(b,a){return sb(this,b,null,a)};var sb=function(b,a,d,c){b.ma.push([a,
d,c]);b.A&&pd(b);return b};V.prototype.then=function(b,a,d){var c,h,e=new fb(function(b,a){c=b;h=a});sb(this,c,function(b){b instanceof Ub?e.cancel():h(b)});return e.then(b,a,d)};pb(V);var lc=function(b){var a=new V;sb(b,a.t,a.C,a);return a},qd=function(b){return W(b.ma,function(b){return x(b[1])})},pd=function(b){if(b.na&&b.A&&qd(b)){var a=b.na,d=mc[a];d&&(m.clearTimeout(d.pa),delete mc[a]);b.na=0}b.p&&(b.p.Ja--,delete b.p);for(var a=b.B,c=d=!1;b.ma.length&&!b.Ka;){var h=b.ma.shift(),e=h[0],l=h[1],
h=h[2];if(e=b.Z?l:e)try{var g=e.call(h||b.hb,a);k(g)&&(b.Z=b.Z&&(g==a||g instanceof Error),b.B=a=g);Rd(a)&&(c=!0,b.Ka=!0)}catch(p){a=p,b.Z=!0,qd(b)||(d=!0)}}b.B=a;c&&(g=z(b.jb,b,!0),c=z(b.jb,b,!1),a instanceof V?(sb(a,g,c),a.Nb=!0):a.then(g,c));d&&(a=new rd(a),mc[a.pa]=a,b.na=a.pa)},Vb=function(b){var a=new V;a.t(b);return a},Td=function(){var b=Sd,a=new V;a.C(b);return a},Eb=function(){O.call(this)};E(Eb,O);Eb.prototype.message="Deferred has already fired";Eb.prototype.name="AlreadyCalledError";
var Ub=function(){O.call(this)};E(Ub,O);Ub.prototype.message="Deferred was canceled";Ub.prototype.name="CanceledError";var rd=function(b){this.pa=m.setTimeout(z(this.qc,this),0);this.ka=b};rd.prototype.qc=function(){delete mc[this.pa];throw this.ka;};var mc={},nc=function(b){this.ab=[];this.g=b};nc.prototype.V=function(b){if(!x(b))throw Error("Invalid filter. Must be a function.");this.ab.push(b)};nc.prototype.send=function(b,a){for(var d=new tb(b,a),c=0;c<this.ab.length&&(this.ab[c](d),!d.Za);c++);
return d.Za?Vb():this.g.send(b,a)};var tb=function(b,a){this.sc=b;this.rc=a;this.Za=!1};tb.prototype.Ib=function(){return this.sc};tb.prototype.W=function(){return this.rc};tb.prototype.cancel=function(){this.Za=!0};var oc=function(b,a){this.width=b;this.height=a};oc.prototype.clone=function(){return new oc(this.width,this.height)};oc.prototype.floor=function(){this.width=Math.floor(this.width);this.height=Math.floor(this.height);return this};!ia&&!P||P&&P&&9<=db||ia&&I("1.9.1");P&&I("9");var sd=
{id:"apiVersion",name:"v",valueType:"text",maxLength:void 0,defaultValue:void 0},Pc={id:"appName",name:"an",valueType:"text",maxLength:100,defaultValue:void 0},Qc={id:"appVersion",name:"av",valueType:"text",maxLength:100,defaultValue:void 0},Ja={id:"clientId",name:"cid",valueType:"text",maxLength:void 0,defaultValue:void 0},Ud={id:"language",name:"ul",valueType:"text",maxLength:20,defaultValue:void 0},pc={id:"libVersion",name:"_v",valueType:"text",maxLength:void 0,defaultValue:void 0},qc={id:"sampleRateOverride",
name:"usro",valueType:"integer",maxLength:void 0,defaultValue:void 0},td={id:"screenColors",name:"sd",valueType:"text",maxLength:20,defaultValue:void 0},ub={id:"screenResolution",name:"sr",valueType:"text",maxLength:20,defaultValue:void 0},rc={id:"trackingId",name:"tid",valueType:"text",maxLength:void 0,defaultValue:void 0},ud={id:"viewportSize",name:"vp",valueType:"text",maxLength:20,defaultValue:void 0},vd={Sc:sd,Vc:Pc,Wc:Qc,dd:Ja,wd:Ud,xd:pc,Dd:qc,Ed:td,Fd:ub,Sd:rc,Zd:ud},wd=function(b){if(!l(b))return b;
var a=Vd(b,dc);if(u(a))return a;a=Vd(b,vd);if(u(a))return a;a=/^dimension(\d+)$/.exec(b);if(null!==a)return Hc(parseInt(a[1],10));a=/^metric(\d+)$/.exec(b);if(null!==a)return Ic(parseInt(a[1],10));throw Error(b+" is not a valid parameter name.");},Vd=function(b,a){var d=Nb(a,function(a){return a.id==b&&"metric"!=b&&"dimension"!=b});return u(d)?d:null},ya=function(b,a){this.bc=a;this.r=a.Ta();this.ub=new Z;this.Ya=!1};c=ya.prototype;c.set=function(b,a){if(null==a)throw Error("Value must be defined and not null. Parameter="+
b.id);var d=wd(b);this.ub.set(d,a)};c.V=function(b){this.bc.V(b)};c.send=function(b,a){if(b instanceof aa)return b.send(this);var d=this.ub.clone();a instanceof Z?d.la(a):u(a)&&bb(a,function(b,a){null!=b&&d.set(wd(a),b)},this);this.Ya&&(this.Ya=!1,d.set(Fc,"start"));return this.r.send(b,d)};c.Hc=function(b){var a={description:b};this.set(yb,b);return this.send("appview",a)};c.Ic=function(b,a,d,c){return this.send("event",{eventCategory:b,eventAction:a,eventLabel:d,eventValue:c})};c.Kc=function(b,
a,d){return this.send("social",{socialNetwork:b,socialAction:a,socialTarget:d})};c.Jc=function(b,a){return this.send("exception",{exDescription:b,exFatal:a})};c.Eb=function(b,a,d,c,h){return this.send("timing",{timingCategory:b,timingVar:a,timingLabel:c,timingValue:d,sampleRateOverride:h})};c.Bc=function(){this.Ya=!0};c.Nc=function(b,a,d,c){return new sc(this,b,a,d,c)};var sc=function(b,a,d,c,h){this.Bb=b;this.hc=a;this.kc=d;this.ic=c;this.qa=h;this.jc=G()};sc.prototype.send=function(){var b=this.Bb.Eb(this.hc,
this.kc,G()-this.jc,this.ic,this.qa);this.Bb=null;return b};var Fb=function(b,a,d,c,h){this.gc=b;this.dc=a;this.ec=d;this.e=c;this.fc=h};Fb.prototype.Dc=function(b){var a=new ya(0,this.fc.create());a.set(pc,this.gc);a.set(sd,1);a.set(Pc,this.dc);a.set(Qc,this.ec);a.set(rc,b);(b=navigator.language||navigator.browserLanguage)&&a.set(Ud,b);(b=screen.colorDepth+"-bit")&&a.set(td,b);(b=[screen.width,screen.height].join("x"))&&a.set(ub,b);b=window.document;b="CSS1Compat"==b.compatMode?b.documentElement:
b.body;b=new oc(b.clientWidth,b.clientHeight);(b=[b.width,b.height].join("x"))&&a.set(ud,b);return a};Fb.prototype.Cc=function(){return lc(this.e.Y)};var ka=function(b){this.tc=b};ka.prototype.send=function(b,a){this.tc.push({Ub:b,Vb:a});return Vb()};var gb=function(b,a,d){this.e=b;this.T=[];this.L={enabled:new ka(this.T),disabled:d};this.r=this.L.enabled;sb(lc(this.e.Y),A(this.Rb,a),this.Qb,this)};gb.prototype.Rb=function(b,a){if(null===this.T)throw Error("Channel setup already completed.");if(a!=
this.e)throw Error("Yikes! Multiple settings instances!");this.L.enabled=b();Rc(this);fa(this.T,function(b){this.send(b.Ub,b.Vb)},this);this.T=null;se(this.e,z(this.Yb,this))};gb.prototype.Qb=function(){if(null===this.T)throw Error("Channel setup already completed.");this.r=this.L.enabled=this.L.disabled;this.T=null};gb.prototype.send=function(b,a){return this.r.send(b,a)};var Rc=function(b){b.r=b.e.ya()?b.L.enabled:b.L.disabled};gb.prototype.Yb=function(b){switch(b){case "analytics.tracking-permitted":Rc(this)}};
var Wb=function(b,a,d,c,h,e){V.call(this,h,e);this.Na=b;this.Pa=[];this.lb=!!a;this.Pb=!!d;this.Ob=!!c;for(a=this.mb=0;a<b.length;a++)sb(b[a],z(this.tb,this,a,!0),z(this.tb,this,a,!1));0!=b.length||this.lb||this.t(this.Pa)};E(Wb,V);Wb.prototype.tb=function(b,a,d){this.mb++;this.Pa[b]=[a,d];this.A||(this.lb&&a?this.t([b,d]):this.Pb&&!a?this.C(d):this.mb==this.Na.length&&this.t(this.Pa));this.Ob&&!a&&(d=null);return d};Wb.prototype.C=function(b){Wb.K.C.call(this,b);for(b=0;b<this.Na.length;b++)this.Na[b].cancel()};
var Sc=function(b){return(new Wb(b,!1,!0)).N(function(b){for(var a=[],d=0;d<b.length;d++)a[d]=b[d][1];return a})},ma=function(b){this.m=b;this.qa=100;this.ob=[];this.U=this.Qa=null;this.Y=Wd(this);this.Y.N(function(){this.pb=kd(this.m,"a",z(this.Sb,this))},this)},Wd=function(b){return xd(b).N(function(){return this},b)},xd=function(b){return Sc([Xd(b),tc(b)])};ma.prototype.Sb=function(){Ua(this);var b=vb(this),a=this.ya();xd(this).N(function(){if(b!=vb(this))throw Error("User ID changed unexpectedly!");
a!=this.ya()&&yd(this)},this)};var se=function(b,a){Ua(b);b.ob.push(a)};ma.prototype.Mc=function(b){Ua(this);var a=this.U!=b;this.U=b;this.m.set("analytics.tracking-permitted",b.toString());a&&yd(this)};ma.prototype.ya=function(){Ua(this);var b;if(b=this.U)b=m._gaUserPrefs,b=!(b&&b.ioo&&b.ioo());return b};var Xd=function(b){return b.m.get("analytics.tracking-permitted").N(function(b){this.U=!0;if(k(b))switch(b){case "true":this.U=!0;break;case "false":this.U=!1}},b)},vb=function(b){Ua(b);if(!l(b.Qa))throw Error("Invalid state. UserID is not a string.");
return b.Qa},tc=function(b){return b.m.get("analytics.user-id").N(function(b){if(!k(b)){b="xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".split("");for(var a=0,d=b.length;a<d;a++)switch(b[a]){case "x":b[a]=Math.floor(16*Math.random()).toString(16);break;case "y":b[a]=(Math.floor(4*Math.random())+8).toString(16)}b=b.join("");this.m.set("analytics.user-id",b)}this.Qa=b},b)};ma.prototype.Lc=function(b){Ua(this);this.qa=b};var Yd=function(b){Ua(b);return b.qa},yd=function(b){fa(b.ob,function(b){b("analytics.tracking-permitted")})};
ma.prototype.$=function(){null!=this.pb&&ld(this.pb)};var Ua=function(b){if(!lc(b.Y).A)throw Error("Settings object accessed prior to entering ready state.");},Xb=function(){Y.call(this);this.P="google-analytics";this.m=chrome.storage.local;chrome.storage.onChanged.addListener(z(this.$a,this))};E(Xb,Y);Xb.prototype.$a=function(b){zd(this,b)&&this.dispatchEvent("a")};var zd=function(b,a){return W(Mb(a),function(b){return 0==b.lastIndexOf(this.P,0)},b)};Xb.prototype.get=function(b){var a=new V,d=this.P+
"."+b;this.m.get(d,function(b){chrome.runtime.lastError?a.C(chrome.runtime.lastError):(b=b[d],a.t(null!=b?b.toString():void 0))});return a};Xb.prototype.set=function(b,a){var d=new V,c={};c[this.P+"."+b]=a;this.m.set(c,function(){chrome.runtime.lastError?d.C(chrome.runtime.lastError):d.t()});return d};var Gb=function(b,a){Y.call(this);this.za=b||1;this.S=a||m;this.Sa=z(this.nc,this);this.Ua=G()};E(Gb,Y);c=Gb.prototype;c.enabled=!1;c.h=null;c.nc=function(){if(this.enabled){var b=G()-this.Ua;0<b&&b<
.8*this.za?this.h=this.S.setTimeout(this.Sa,this.za-b):(this.h&&(this.S.clearTimeout(this.h),this.h=null),this.dispatchEvent("tick"),this.enabled&&(this.h=this.S.setTimeout(this.Sa,this.za),this.Ua=G()))}};c.start=function(){this.enabled=!0;this.h||(this.h=this.S.setTimeout(this.Sa,this.za),this.Ua=G())};c.stop=function(){this.enabled=!1;this.h&&(this.S.clearTimeout(this.h),this.h=null)};c.l=function(){Gb.K.l.call(this);this.stop();delete this.S};var Tc=function(b,a,d){if(x(b))d&&(b=z(b,d));else if(b&&
"function"==typeof b.handleEvent)b=z(b.handleEvent,b);else throw Error("Invalid listener argument");return 2147483647<a?-1:m.setTimeout(b,a||0)},Yb=function(){Y.call(this);this.P="google-analytics";this.m=window.localStorage;kd(window,"storage",z(this.$a,this),!1)};E(Yb,Y);Yb.prototype.get=function(b){var a=Ad(this,b),d=new V;Tc(function(){d.t(a)});return d};Yb.prototype.set=function(b,a){a!=Ad(this,b)&&(this.m.setItem(this.P+"."+b,a),this.dispatchEvent("a"));var d=new V;Tc(function(){d.t()});return d};
Yb.prototype.$a=function(b){b instanceof StorageEvent||"storage"!=b.type||(b=window.event);if(!("storageArea"in b))throw Error('"storageArea" property missing from event type: '+b.type);if(!("key"in b))throw Error('"key" property missing from event type: '+b.type);b.storageArea==this.m&&0==b.key.lastIndexOf(this.P,0)&&this.dispatchEvent("a")};var Ad=function(b,a){var d=b.m.getItem(b.P+"."+a);return null!=d?d:void 0},hb=function(){};hb.$b=function(){return hb.Kb?hb.Kb:hb.Kb=new hb};hb.prototype.send=
function(){return Vb()};var Ka=function(b,a){this.Xa=[];var d=z(function(){this.Ba=new nc(a.Ta());fa(this.Xa,function(b){this.Ba.V(b)},this);this.Xa=null;return this.Ba},this);this.r=new gb(b,d,hb.$b())};Ka.prototype.Ta=function(){return this.r};Ka.prototype.V=function(b){this.Ba?this.Ba.V(b):this.Xa.push(b)};var Zd=function(b,a){this.e=b;this.oc=a};Zd.prototype.create=function(){return new Ka(this.e,this.oc)};var ib=function(b){Fa.call(this);this.Va=b;this.b={}};E(ib,Fa);var $d=[];ib.prototype.listen=
function(b,a,d,c){g(a)||(a&&($d[0]=a.toString()),a=$d);for(var h=0;h<a.length;h++){var e=kd(b,a[h],d||this.handleEvent,c||!1,this.Va||this);if(!e)break;this.b[e.key]=e}return this};ib.prototype.cb=function(b,a,d,c){return uc(this,b,a,d,c)};var uc=function(b,a,d,c,h,e){if(g(d))for(var l=0;l<d.length;l++)uc(b,a,d[l],c,h,e);else{a=Pe(a,d,c||b.handleEvent,h,e||b.Va||b);if(!a)return b;b.b[a.key]=a}return b};ib.prototype.Wa=function(b,a,d,c,h){if(g(a))for(var e=0;e<a.length;e++)this.Wa(b,a[e],d,c,h);else d=
d||this.handleEvent,h=h||this.Va||this,d=ic(d),c=!!c,(a=ca(b)?b.aa(a,d,c,h):b?(b=Sb(b))?b.aa(a,d,c,h):null:null)&&(ld(a),delete this.b[a.key]);return this};ib.prototype.removeAll=function(){bb(this.b,ld);this.b={}};ib.prototype.l=function(){ib.K.l.call(this);this.removeAll()};ib.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented");};var F=function(){Y.call(this);this.ua=new ib(this);C&&(hc?this.ua.listen(pe?document.body:window,["online","offline"],this.vb):(this.wb=
C?navigator.onLine:!0,this.h=new Gb(250),this.ua.listen(this.h,"tick",this.cc),this.h.start()))};E(F,Y);F.prototype.cc=function(){var b=C?navigator.onLine:!0;b!=this.wb&&(this.wb=b,this.vb())};F.prototype.vb=function(){this.dispatchEvent((C?navigator.onLine:1)?"online":"offline")};F.prototype.l=function(){F.K.l.call(this);this.ua.$();this.ua=null;this.h&&(this.h.$(),this.h=null)};var Uc=function(b,a){this.e=b;this.g=a};Uc.prototype.send=function(b,a){a.set(Ja,vb(this.e));return this.g.send(b,a)};
var vc=function(b){this.g=b};vc.prototype.send=function(b,a){Zb(a);La(a);return this.g.send(b,a)};var Zb=function(b){mb(b,function(a,d){k(a.maxLength)&&"text"==a.valueType&&0<a.maxLength&&d.length>a.maxLength&&b.set(a,d.substring(0,a.maxLength))})},La=function(b){mb(b,function(a,d){k(a.defaultValue)&&d==a.defaultValue&&b.remove(a)})},Sd={status:"device-offline",Ca:void 0},te={status:"rate-limited",Ca:void 0},ue={status:"sampled-out",Ca:void 0},ve={status:"sent",Ca:void 0},Bd=function(b,a){this.Zb=
b;this.g=a};Bd.prototype.send=function(b,a){var d;d=this.Zb;var c=d.rb(),h=Math.floor((c-d.qb)*d.Wb);0<h&&(d.da=Math.min(d.da+h,d.Xb),d.qb=c);1>d.da?d=!1:(--d.da,d=!0);return d||"item"==b||"transaction"==b?this.g.send(b,a):Vb(te)};var Va=function(){this.da=60;this.Xb=500;this.Wb=5E-4;this.rb=function(){return(new Date).getTime()};this.qb=this.rb()},Wa=function(b,a){this.e=b;this.g=a};Wa.prototype.send=function(b,a){var d=a.get(Ja),d=parseInt(d.split("-")[1],16),c;"timing"!=b?c=Yd(this.e):((c=a.get(qc))&&
a.remove(qc),c=c||Yd(this.e));return d<655.36*c?this.g.send(b,a):Vb(ue)};var $b=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^/?#]*)@)?([^/#?]*?)(?::([0-9]+))?(?=[/#?]|$))?([^?#]+)?(?:\?([^#]*))?(?:#(.*))?$/,wc=Pa,Vc=function(b,a){if(wc){wc=!1;var d=m.location;if(d){var c=d.href;if(c&&(c=(c=Vc(3,c))?decodeURI(c):c)&&c!=d.hostname)throw wc=!0,Error();}}return a.match($b)[b]||null},Cd=function(){};Cd.prototype.Gb=null;var ac=function(b){var a;(a=b.Gb)||(a={},Dd(b)&&(a[0]=!0,a[1]=!0),a=b.Gb=a);return a},Wc,Ed=function(){};
E(Ed,Cd);var Fd=function(b){return(b=Dd(b))?new ActiveXObject(b):new XMLHttpRequest},Dd=function(b){if(!b.Jb&&"undefined"==typeof XMLHttpRequest&&"undefined"!=typeof ActiveXObject){for(var a=["MSXML2.XMLHTTP.6.0","MSXML2.XMLHTTP.3.0","MSXML2.XMLHTTP","Microsoft.XMLHTTP"],d=0;d<a.length;d++){var c=a[d];try{return new ActiveXObject(c),b.Jb=c}catch(h){}}throw Error("Could not create ActiveXObject. ActiveX might be disabled, or MSXML might not be installed");}return b.Jb};Wc=new Ed;var Ba=function(b){Y.call(this);
this.headers=new ga;this.ja=b||null;this.G=!1;this.ga=this.a=null;this.fa=this.Ga="";this.J=this.Fa=this.ea=this.Ia=!1;this.ia=0;this.ha=null;this.eb="";this.Ha=this.Mb=!1};E(Ba,Y);var na=/^https?$/i,ae=["POST","PUT"],Xc=[],Gd=function(b,a,d){var c=new Ba;Xc.push(c);a&&c.listen("complete",a);c.cb("ready",c.uc);c.send(b,"POST",d,void 0)};Ba.prototype.uc=function(){this.$();ab(Xc,this)};Ba.prototype.send=function(b,a,d,c){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+
this.Ga+"; newUri="+b);a=a?a.toUpperCase():"GET";this.Ga=b;this.fa="";this.Ia=!1;this.G=!0;this.a=this.ja?Fd(this.ja):Fd(Wc);this.ga=this.ja?ac(this.ja):ac(Wc);this.a.onreadystatechange=z(this.fb,this);try{this.Fa=!0,this.a.open(a,String(b),!0),this.Fa=!1}catch(h){this.ka(5,h);return}b=d||"";var e=this.headers.clone();c&&fc(c,function(b,a){e.set(a,b)});c=R(e.H());d=m.FormData&&b instanceof m.FormData;!(0<=ra(ae,a))||c||d||e.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");e.forEach(function(b,
a){this.a.setRequestHeader(a,b)},this);this.eb&&(this.a.responseType=this.eb);"withCredentials"in this.a&&(this.a.withCredentials=this.Mb);try{Hd(this),0<this.ia&&((this.Ha=be(this.a))?(this.a.timeout=this.ia,this.a.ontimeout=z(this.gb,this)):this.ha=Tc(this.gb,this.ia,this)),this.ea=!0,this.a.send(b),this.ea=!1}catch(h){this.ka(5,h)}};var be=function(b){return P&&I(9)&&q(b.timeout)&&k(b.ontimeout)},Od=function(b){return"content-type"==b.toLowerCase()};Ba.prototype.gb=function(){"undefined"!=typeof p&&
this.a&&(this.fa="Timed out after "+this.ia+"ms, aborting",this.dispatchEvent("timeout"),this.abort(8))};Ba.prototype.ka=function(b,a){this.G=!1;this.a&&(this.J=!0,this.a.abort(),this.J=!1);this.fa=a;xc(this);yc(this)};var xc=function(b){b.Ia||(b.Ia=!0,b.dispatchEvent("complete"),b.dispatchEvent("error"))};Ba.prototype.abort=function(){this.a&&this.G&&(this.G=!1,this.J=!0,this.a.abort(),this.J=!1,this.dispatchEvent("complete"),this.dispatchEvent("abort"),yc(this))};Ba.prototype.l=function(){this.a&&
(this.G&&(this.G=!1,this.J=!0,this.a.abort(),this.J=!1),yc(this,!0));Ba.K.l.call(this)};Ba.prototype.fb=function(){this.ba||(this.Fa||this.ea||this.J?ce(this):this.lc())};Ba.prototype.lc=function(){ce(this)};var ce=function(b){if(b.G&&"undefined"!=typeof p&&(!b.ga[1]||4!=bc(b)||2!=Yc(b)))if(b.ea&&4==bc(b))Tc(b.fb,0,b);else if(b.dispatchEvent("readystatechange"),4==bc(b)){b.G=!1;try{var a=Yc(b),d,c;a:switch(a){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:c=!0;break a;default:c=!1}if(!(d=
c)){var h;if(h=0===a){var e=Vc(1,String(b.Ga));if(!e&&self.location)var l=self.location.protocol,e=l.substr(0,l.length-1);h=!na.test(e?e.toLowerCase():"")}d=h}if(d)b.dispatchEvent("complete"),b.dispatchEvent("success");else{var g;try{g=2<bc(b)?b.a.statusText:""}catch(k){g=""}b.fa=g+" ["+Yc(b)+"]";xc(b)}}finally{yc(b)}}},yc=function(b,d){if(b.a){Hd(b);var c=b.a,h=b.ga[0]?a:null;b.a=null;b.ga=null;d||b.dispatchEvent("ready");try{c.onreadystatechange=h}catch(e){}}},Hd=function(b){b.a&&b.Ha&&(b.a.ontimeout=
null);q(b.ha)&&(m.clearTimeout(b.ha),b.ha=null)},bc=function(b){return b.a?b.a.readyState:0},Yc=function(b){try{return 2<bc(b)?b.a.status:-1}catch(a){return-1}},Zc=function(b,a,d){this.v=b||null;this.pc=!!d},Ib=function(b){if(!b.c&&(b.c=new ga,b.j=0,b.v))for(var a=b.v.split("&"),d=0;d<a.length;d++){var c=a[d].indexOf("="),h=null,e=null;0<=c?(h=a[d].substring(0,c),e=a[d].substring(c+1)):h=a[d];h=decodeURIComponent(h.replace(/\+/g," "));h=Hb(b,h);b.add(h,e?decodeURIComponent(e.replace(/\+/g," ")):"")}};
c=Zc.prototype;c.c=null;c.j=null;c.add=function(b,a){Ib(this);this.v=null;b=Hb(this,b);var d=this.c.get(b);d||this.c.set(b,d=[]);d.push(a);this.j++;return this};c.remove=function(b){Ib(this);b=Hb(this,b);return this.c.R(b)?(this.v=null,this.j-=this.c.get(b).length,this.c.remove(b)):!1};c.R=function(b){Ib(this);b=Hb(this,b);return this.c.R(b)};c.H=function(){Ib(this);for(var b=this.c.w(),a=this.c.H(),d=[],c=0;c<a.length;c++)for(var h=b[c],e=0;e<h.length;e++)d.push(a[c]);return d};c.w=function(b){Ib(this);
var a=[];if(l(b))this.R(b)&&(a=Cc(a,this.c.get(Hb(this,b))));else{b=this.c.w();for(var d=0;d<b.length;d++)a=Cc(a,b[d])}return a};c.set=function(b,a){Ib(this);this.v=null;b=Hb(this,b);this.R(b)&&(this.j-=this.c.get(b).length);this.c.set(b,[a]);this.j++;return this};c.get=function(b,a){var d=b?this.w(b):[];return 0<d.length?String(d[0]):a};c.toString=function(){if(this.v)return this.v;if(!this.c)return"";for(var b=[],a=this.c.H(),d=0;d<a.length;d++)for(var c=a[d],h=encodeURIComponent(String(c)),c=this.w(c),
e=0;e<c.length;e++){var l=h;""!==c[e]&&(l+="="+encodeURIComponent(String(c[e])));b.push(l)}return this.v=b.join("&")};c.clone=function(){var b=new Zc;b.v=this.v;this.c&&(b.c=this.c.clone(),b.j=this.j);return b};var Hb=function(b,a){var d=String(a);b.pc&&(d=d.toLowerCase());return d},Id=function(b,a){this.ac=b;this.oa=a};Id.prototype.send=function(b,a){if(C&&!navigator.onLine)return Td();var d=new V,c=de(b,a);c.length>this.oa?d.C({status:"payload-too-big",Ca:ec("Encoded hit length == %s, but should be <= %s.",
c.length,this.oa)}):Gd(this.ac,function(){d.t(ve)},c);return d};var de=function(b,a){var d=new Zc;d.add(Ec.name,b);mb(a,function(b,a){d.add(b.name,a.toString())});return d.toString()},$c=function(b,a,d){this.e=b;this.Tb=a;this.oa=d};$c.prototype.Ta=function(){if(!this.r){if(!lc(this.e.Y).A)throw Error("Cannot construct shared channel prior to settings being ready.");new F;var b=new vc(new Id(this.Tb,this.oa)),a=new Va;this.r=new Uc(this.e,new Wa(this.e,new Bd(a,b)))}return this.r};var D=new ga,Xa=
function(){if(!r){var b="chrome-extension:"==m.location.protocol?new Xb:new Yb;r=new ma(b)}return r};t("goog.async.Deferred",V);t("goog.async.Deferred.prototype.addCallback",V.prototype.N);t("goog.events.EventTarget",Y);t("goog.events.EventTarget.prototype.listen",Y.prototype.listen);t("analytics.getService",function(b,a){var d=D.get(b,null);if(null===d){if("chrome-extension:"==m.location.protocol)d=chrome.runtime.getManifest().version;else{if(!l(a)||/^[\s\xa0]*$/.test(a))throw Error("Invalid version. Must be non-empty string.");
d=a}var c=Xa();if(!lb){var h=Xa();lb=new Zd(h,new $c(h,"https://www.google-analytics.com/collect",8192))}d=new Fb("ca1.6.0prerelease",b,d,c,lb);D.set(b,d)}return d});t("analytics.internal.GoogleAnalyticsService",Fb);t("analytics.internal.GoogleAnalyticsService.prototype.getTracker",Fb.prototype.Dc);t("analytics.internal.GoogleAnalyticsService.prototype.getConfig",Fb.prototype.Cc);t("analytics.internal.ServiceSettings",ma);t("analytics.internal.ServiceSettings.prototype.setTrackingPermitted",ma.prototype.Mc);
t("analytics.internal.ServiceSettings.prototype.isTrackingPermitted",ma.prototype.ya);t("analytics.internal.ServiceSettings.prototype.setSampleRate",ma.prototype.Lc);t("analytics.internal.ServiceTracker",ya);t("analytics.internal.ServiceTracker.prototype.send",ya.prototype.send);t("analytics.internal.ServiceTracker.prototype.sendAppView",ya.prototype.Hc);t("analytics.internal.ServiceTracker.prototype.sendEvent",ya.prototype.Ic);t("analytics.internal.ServiceTracker.prototype.sendSocial",ya.prototype.Kc);
t("analytics.internal.ServiceTracker.prototype.sendException",ya.prototype.Jc);t("analytics.internal.ServiceTracker.prototype.sendTiming",ya.prototype.Eb);t("analytics.internal.ServiceTracker.prototype.startTiming",ya.prototype.Nc);t("analytics.internal.ServiceTracker.Timing",sc);t("analytics.internal.ServiceTracker.Timing.prototype.send",sc.prototype.send);t("analytics.internal.ServiceTracker.prototype.forceSessionStart",ya.prototype.Bc);t("analytics.internal.ServiceTracker.prototype.addFilter",
ya.prototype.V);t("analytics.internal.FilterChannel.Hit",tb);t("analytics.internal.FilterChannel.Hit.prototype.getHitType",tb.prototype.Ib);t("analytics.internal.FilterChannel.Hit.prototype.getParameters",tb.prototype.W);t("analytics.internal.FilterChannel.Hit.prototype.cancel",tb.prototype.cancel);t("analytics.ParameterMap",Z);t("analytics.ParameterMap.Entry",Z.Entry);t("analytics.ParameterMap.prototype.set",Z.prototype.set);t("analytics.ParameterMap.prototype.get",Z.prototype.get);t("analytics.ParameterMap.prototype.remove",
Z.prototype.remove);t("analytics.ParameterMap.prototype.toObject",Z.prototype.Lb);t("analytics.HitTypes.APPVIEW","appview");t("analytics.HitTypes.EVENT","event");t("analytics.HitTypes.SOCIAL","social");t("analytics.HitTypes.TRANSACTION","transaction");t("analytics.HitTypes.ITEM","item");t("analytics.HitTypes.TIMING","timing");t("analytics.HitTypes.EXCEPTION","exception");bb(dc,function(b){var a=b.id.replace(/[A-Z]/,"_$&").toUpperCase();t("analytics.Parameters."+a,b)});t("analytics.filters.EventLabelerBuilder",
la);t("analytics.filters.EventLabelerBuilder.prototype.appendToExistingLabel",la.prototype.xc);t("analytics.filters.EventLabelerBuilder.prototype.stripValue",la.prototype.Oc);t("analytics.filters.EventLabelerBuilder.prototype.powersOfTwo",la.prototype.Fc);t("analytics.filters.EventLabelerBuilder.prototype.rangeBounds",la.prototype.Gc);t("analytics.filters.EventLabelerBuilder.prototype.build",la.prototype.Da);t("analytics.filters.FilterBuilder",Na);t("analytics.filters.FilterBuilder.builder",Kc);t("analytics.filters.FilterBuilder.prototype.when",
Na.prototype.when);t("analytics.filters.FilterBuilder.prototype.whenHitType",Na.prototype.Ab);t("analytics.filters.FilterBuilder.prototype.whenValue",Na.prototype.Pc);t("analytics.filters.FilterBuilder.prototype.applyFilter",Na.prototype.zb);t("analytics.filters.FilterBuilder.prototype.build",Na.prototype.Da);t("analytics.EventBuilder",aa);t("analytics.EventBuilder.builder",function(){return id});t("analytics.EventBuilder.prototype.category",aa.prototype.yc);t("analytics.EventBuilder.prototype.action",
aa.prototype.action);t("analytics.EventBuilder.prototype.label",aa.prototype.label);t("analytics.EventBuilder.prototype.value",aa.prototype.value);t("analytics.EventBuilder.prototype.dimension",aa.prototype.zc);t("analytics.EventBuilder.prototype.metric",aa.prototype.Ec);t("analytics.EventBuilder.prototype.send",aa.prototype.send)})();define("third_party/googleAnalytics/google-analytics-bundle",function(){});
(function(){function c(a,d){return a.set(d[0],d[1]),a}function p(a,d){return a.add(d),a}function m(a,d,c){switch(c.length){case 0:return a.call(d);case 1:return a.call(d,c[0]);case 2:return a.call(d,c[0],c[1]);case 3:return a.call(d,c[0],c[1],c[2])}return a.apply(d,c)}function k(a,d,c,h){for(var e=-1,l=a.length;++e<l;){var g=a[e];d(h,g,c(g),a)}return h}function a(a,d){for(var c=-1,h=a.length;++c<h&&!1!==d(a[c],c,a););return a}function e(a,d){for(var c=-1,h=a.length;++c<h;)if(!d(a[c],c,a))return!1;
return!0}function g(a,d){for(var c=-1,h=a.length,e=-1,l=[];++c<h;){var g=a[c];d(g,c,a)&&(l[++e]=g)}return l}function w(a,d){return!!a.length&&-1<t(a,d,0)}function l(a,d,c){for(var h=-1,e=a.length;++h<e;)if(c(d,a[h]))return!0;return!1}function q(a,d){for(var c=-1,h=a.length,e=Array(h);++c<h;)e[c]=d(a[c],c,a);return e}function x(a,d){for(var c=-1,h=d.length,e=a.length;++c<h;)a[e+c]=d[c];return a}function u(a,d,c,h){var e=-1,l=a.length;for(h&&l&&(c=a[++e]);++e<l;)c=d(c,a[e],e,a);return c}function N(a,
d,c,h){var e=a.length;for(h&&e&&(c=a[--e]);e--;)c=d(c,a[e],e,a);return c}function K(a,d){for(var c=-1,h=a.length;++c<h;)if(d(a[c],c,a))return!0;return!1}function z(a,d,c){for(var h=-1,e=a.length;++h<e;){var l=a[h],g=d(l);if(null!=g&&(k===r?g===g:c(g,k)))var k=g,p=l}return p}function A(a,d,c,h){var e;return c(a,function(a,c,l){return d(a,c,l)?(e=h?c:a,!1):void 0}),e}function G(a,d,c){for(var h=a.length,e=c?h:-1;c?e--:++e<h;)if(d(a[e],e,a))return e;return-1}function t(a,d,c){if(d!==d)return xb(a,c);
--c;for(var h=a.length;++c<h;)if(a[c]===d)return c;return-1}function E(a,d,c,h,e){return e(a,function(a,e,l){c=h?(h=!1,a):d(c,a,e,l)}),c}function O(a,d){var c=a.length;for(a.sort(d);c--;)a[c]=a[c].c;return a}function qa(a,d){for(var c,h=-1,e=a.length;++h<e;){var l=d(a[h]);l!==r&&(c=c===r?l:c+l)}return c}function T(a,d){for(var c=-1,h=Array(a);++c<a;)h[c]=d(c);return h}function H(a,d){return q(d,function(d){return[d,a[d]]})}function ra(a){return function(d){return a(d)}}function fa(a,d){return q(d,
function(d){return a[d]})}function W(a,d){for(var c=-1,h=a.length;++c<h&&-1<t(d,a[c],0););return c}function h(a,d){for(var c=a.length;c--&&-1<t(d,a[c],0););return c}function R(a){return a&&a.Object===Object?a:null}function ab(a,d){if(a!==d){var c=null===a,h=a===r,e=a===a,l=null===d,g=d===r,k=d===d;if(a>d&&!l||!e||c&&!g&&k||h&&k)return 1;if(d>a&&!c||!k||l&&!h&&e||g&&e)return-1}return 0}function Cc(a){return db[a]}function Lb(a){return B[a]}function Dc(a){return"\\"+hc[a]}function xb(a,d,c){var h=a.length;
for(d+=c?0:-1;c?d--:++d<h;){var e=a[d];if(e!==e)return d}return-1}function bb(a){var d=!1;if(null!=a&&"function"!=typeof a.toString)try{d=!!(a+"")}catch(c){}return d}function Ca(a,d){return a="number"==typeof a||ua.test(a)?+a:-1,-1<a&&0==a%1&&(null==d?9007199254740991:d)>a}function Mb(a){for(var d,c=[];!(d=a.next()).done;)c.push(d.value);return c}function Nb(a){var d=-1,c=Array(a.size);return a.forEach(function(a,h){c[++d]=[h,a]}),c}function Da(a,d){for(var c=-1,h=a.length,e=-1,l=[];++c<h;){var g=
a[c];(g===d||"__lodash_placeholder__"===g)&&(a[c]="__lodash_placeholder__",l[++e]=c)}return l}function Ob(a){var d=-1,c=Array(a.size);return a.forEach(function(a){c[++d]=a}),c}function ga(a){if(!a||!ia.test(a))return a.length;for(var d=P.lastIndex=0;P.test(a);)d++;return d}function kb(a){return U[a]}function cb(B){function d(f){if(ha(f)&&!J(f)&&!(f instanceof C)){if(f instanceof U)return f;if(da.call(f,"__wrapped__"))return Ed(f)}return new U(f)}function R(){}function U(f,y){this.__wrapped__=f;this.__actions__=
[];this.__chain__=!!y;this.__index__=0;this.__values__=r}function C(f){this.__wrapped__=f;this.__actions__=[];this.__dir__=1;this.__filtered__=!1;this.__iteratees__=[];this.__takeCount__=4294967295;this.__views__=[]}function hc(){}function ca(f){var y=-1,a=f?f.length:0;for(this.clear();++y<a;){var b=f[y];this.set(b[0],b[1])}}function sa(f){var y=-1,a=f?f.length:0;for(this.__data__=new ca;++y<a;)this.push(f[y])}function ua(f,y){var a=f.__data__;return $b(y)?(a=a.__data__,"__lodash_hash_undefined__"===
("string"==typeof y?a.string:a.hash)[y]):a.has(y)}function Ra(f){var y=-1,a=f?f.length:0;for(this.clear();++y<a;){var b=f[y];this.set(b[0],b[1])}}function db(f,y){var a=Ha(f,y);return 0>a?!1:(a==f.length-1?f.pop():ee.call(f,a,1),!0)}function eb(f,y){var a=Ha(f,y);return 0>a?r:f[a][1]}function Ha(f,y){for(var a=f.length;a--;)if(Xa(f[a][0],y))return a;return-1}function Sb(f,y,a){var b=Ha(f,y);0>b?f.push([y,a]):f[b][1]=a}function jc(f,y,a,b){return f===r||Xa(f,ad[a])&&!da.call(b,a)?y:f}function ic(f,
y,a){(a===r||Xa(f[y],a))&&("number"!=typeof y||a!==r||y in f)||(f[y]=a)}function Y(f,y,a){var b=f[y];da.call(f,y)&&Xa(b,a)&&(a!==r||y in f)||(f[y]=a)}function Lc(f,y,a,b){return Jb(f,function(f,d,c){y(b,f,a(f),c)}),b}function md(f,y){return f&&gb(y,ta(y),f)}function kc(f,y){for(var a=-1,b=null==f,d=y.length,c=Array(d);++a<d;)c[a]=b?r:Jd(f,y[a]);return c}function nd(f){return ea(f)?f:[]}function Ta(f){return"function"==typeof f?f:jb}function Sa(f){return J(f)?f:Wc(f)}function Tb(f,y,a){return f===
f&&(a!==r&&(f=f>a?a:f),y!==r&&(f=y>f?y:f)),f}function xa(f,y,b,d,c,h){var e;if(b&&(e=c?b(f,d,c,h):b(f)),e!==r)return e;if(!X(f))return f;if(d=J(f)){if(e=te(f),!y)return ka(f,e)}else{var l=La(f),g="[object Function]"==l||"[object GeneratorFunction]"==l;if(Te(f))return Vd(f,y);if("[object Object]"==l||"[object Arguments]"==l||g&&!c){if(bb(f))return c?f:{};if(e=ue(g?{}:f),!y)return Wb(f,md(e,f))}else{if(!M[l])return c?f:{};e=ve(f,l,y)}}return h||(h=new Ra),(c=h.get(f))?c:(h.set(f,e),(d?a:Ia)(f,function(a,
d){Y(e,d,xa(a,y,b,d,f,h))}),d?e:Wb(f,e))}function Mc(f){var y=ta(f),a=y.length;return function(b){if(null==b)return!a;for(var d=a;d--;){var c=y[d],h=f[c],e=b[c];if(e===r&&!(c in Object(b))||!h(e))return!1}return!0}}function Bb(f){return X(f)?zf(f):{}}function Qd(f,y,a){if("function"!=typeof f)throw new Ya("Expected a function");return fe(function(){f.apply(r,a)},y)}function pb(f,y,a,b){var d=-1,c=w,h=!0,e=f.length,g=[],k=y.length;if(!e)return g;a&&(y=q(y,ra(a)));b?(c=l,h=!1):200<=y.length&&(c=ua,
h=!1,y=new sa(y));a:for(;++d<e;){var n=f[d],p=a?a(n):n;if(h&&p===p){for(var m=k;m--;)if(y[m]===p)continue a;g.push(n)}else c(y,p,b)||g.push(n)}return g}function Rd(f,y){var a=!0;return Jb(f,function(f,b,d){return a=!!y(f,b,d)}),a}function fb(f,y){var a=[];return Jb(f,function(f,b,d){y(f,b,d)&&a.push(f)}),a}function S(f,a,b,d){d||(d=[]);for(var c=-1,h=f.length;++c<h;){var e=f[c];0<a&&ea(e)&&(b||J(e)||n(e))?1<a?S(e,a-1,b,d):x(d,e):b||(d[d.length]=e)}return d}function jd(f,a){return null==f?f:we(f,a,
Za)}function Ia(f,a){return f&&we(f,a,ta)}function qb(f,a){return f&&Ue(f,a,ta)}function Oc(f,a){return g(a,function(a){return Ma(f[a])})}function Nc(f,a){a=Wa(a,f)?[a+""]:Sa(a);for(var b=0,d=a.length;null!=f&&d>b;)f=f[a[b++]];return b&&b==d?f:r}function od(f,a){return da.call(f,a)||"object"==typeof f&&a in f&&null===ge(f)}function re(f,a){return a in Object(f)}function Cb(f,a,b){for(var d=b?l:w,c=f.length,h=c,e=Array(c),g=[];h--;){var k=f[h];h&&a&&(k=q(k,ra(a)));e[h]=b||!a&&120>k.length?r:new sa(h&&
k)}var k=f[0],n=-1,p=k.length,m=e[0];a:for(;++n<p;){var B=k[n],R=a?a(B):B;if(m?!ua(m,R):!d(g,R,b)){for(h=c;--h;){var x=e[h];if(x?!ua(x,R):!d(f[h],R,b))continue a}m&&m.push(R);g.push(B)}}return g}function V(f,a,b,d){return Ia(f,function(f,c,h){a(d,b(f),c,h)}),d}function Db(f,a,b){return Wa(a,f)||(a=Sa(a),f=ac(f,a),a=na(a)),a=null==f?f:f[a],null==a?r:m(a,f,b)}function rb(f,a,b,d,c){if(f===a)return!0;if(null==f||null==a||!X(f)&&!ha(a))return f!==f&&a!==a;var h=J(f),e=J(a),l="[object Array]",g="[object Array]";
h||(l=La(f),"[object Arguments]"==l?l="[object Object]":"[object Object]"!=l&&(h=bd(f)));e||(g=La(a),"[object Arguments]"==g?g="[object Object]":"[object Object]"!=g&&bd(a));var k="[object Object]"==l&&!bb(f),e="[object Object]"==g&&!bb(a),g=l==g;!g||h||k?2&d||(l=k&&da.call(f,"__wrapped__"),e=e&&da.call(a,"__wrapped__"),!l&&!e)?g?(c||(c=new Ra),f=(h?Zd:$d)(f,a,rb,b,d,c)):f=!1:f=rb(l?f.value():f,e?a.value():a,b,d,c):f=ib(f,a,l,rb,b,d);return f}function sb(f,a,b,d){var c=b.length,h=c,e=!d;if(null==
f)return!h;for(f=Object(f);c--;){var l=b[c];if(e&&l[2]?l[1]!==f[l[0]]:!(l[0]in f))return!1}for(;++c<h;){var l=b[c],g=l[0],k=f[g],n=l[1];if(e&&l[2]){if(k===r&&!(g in f))return!1}else if(l=new Ra,g=d?d(k,n,g,f,a,l):r,g===r?!rb(n,k,d,3,l):!g)return!1}return!0}function lc(f){var a=typeof f;return"function"==a?f:null==f?jb:"object"==a?J(f)?Td(f[0],f[1]):Vb(f):Ve(f)}function qd(f){f=null==f?f:Object(f);var a,b=[];for(a in f)b.push(a);return b}function pd(f,a){var b=-1,d=v(f)?Array(f.length):[];return Jb(f,
function(f,c,h){d[++b]=a(f,c,h)}),d}function Vb(f){var a=Uc(f);if(1==a.length&&a[0][2]){var b=a[0][0],d=a[0][1];return function(f){return null==f?!1:f[b]===d&&(d!==r||b in Object(f))}}return function(b){return b===f||sb(b,f,a)}}function Td(f,a){return function(b){var d=Jd(b,f);return d===r&&d===a?We(b,f):rb(a,d,r,3)}}function Eb(f,b,d,c,h){if(f!==b){var e=J(b)||bd(b)?r:Za(b);a(e||b,function(a,l){if(e&&(l=a,a=b[l]),X(a)){h||(h=new Ra);var g=l,k=h,p=f[g],m=b[g],q=k.get(m);if(!q){var q=c?c(p,m,g+"",
f,b,k):r,B=q===r;B&&(q=m,J(m)||bd(m)?J(p)?q=p:ea(p)?q=ka(p):(B=!1,q=xa(m,!0)):oe(m)||n(m)?n(p)?q=Xe(p):!X(p)||d&&Ma(p)?(B=!1,q=xa(m,!0)):q=p:B=!1);k.set(m,q);B&&Eb(q,m,d,c,k)}ic(f,g,q)}else g=c?c(f[l],a,l+"",f,b,h):r,g===r&&(g=a),ic(f,l,g)})}}function Ub(f,a,b){var d=-1,c=F();return a=q(a.length?a:Array(1),function(f){return c(f)}),f=pd(f,function(f,b,c){return{a:q(a,function(a){return a(f)}),b:++d,c:f}}),O(f,function(f,a){var y;a:{y=-1;for(var d=f.a,c=a.a,h=d.length,e=b.length;++y<h;){var l=ab(d[y],
c[y]);if(l){if(y>=e){y=l;break a}y=l*("desc"==b[y]?-1:1);break a}}y=f.b-a.b}return y})}function rd(f,a){return f=Object(f),u(a,function(a,b){return b in f&&(a[b]=f[b]),a},{})}function mc(f,a){var b={};return jd(f,function(f,d){a(f,d)&&(b[d]=f)}),b}function nc(f){return function(a){return null==a?r:a[f]}}function tb(f){return function(a){return Nc(a,f)}}function oc(f,a,b){var d=-1,c=a.length,h=f;for(b&&(h=q(f,function(f){return b(f)}));++d<c;)for(var e=0,l=a[d],l=b?b(l):l;-1<(e=t(h,l,e));)h!==f&&ee.call(h,
e,1),ee.call(f,e,1);return f}function sd(f,a){for(var b=f?a.length:0,d=b-1;b--;){var c=a[b];if(d==b||c!=h){var h=c;if(Ca(c))ee.call(f,c,1);else if(Wa(c,f))delete f[c];else{var c=Sa(c),e=ac(f,c);null!=e&&delete e[na(c)]}}}return f}function Pc(f,a){return f+he(Ye()*(a-f+1))}function Qc(f,a,b,d){a=Wa(a,f)?[a+""]:Sa(a);for(var c=-1,h=a.length,e=h-1,l=f;null!=l&&++c<h;){var g=a[c];if(X(l)){var k=b;if(c!=e){var n=l[g],k=d?d(n,g,l):r;k===r&&(k=null==n?Ca(a[c+1])?[]:{}:n)}Y(l,g,k)}l=l[g]}return f}function Ja(f,
a,b){var d=-1,c=f.length;0>a&&(a=-a>c?0:c+a);b=b>c?c:b;0>b&&(b+=c);c=a>b?0:b-a>>>0;a>>>=0;for(b=Array(c);++d<c;)b[d]=f[d+a];return b}function Ud(f,a){var b;return Jb(f,function(f,d,c){return b=a(f,d,c),!b}),!!b}function pc(f,a,b){var d=0,c=f?f.length:d;if("number"==typeof a&&a===a&&2147483647>=c){for(;c>d;){var h=d+c>>>1,e=f[h];(b?a>=e:a>e)&&null!==e?d=h+1:c=h}return c}return qc(f,a,jb,b)}function qc(f,a,b,d){a=b(a);for(var c=0,h=f?f.length:0,e=a!==a,l=null===a,g=a===r;h>c;){var k=he((c+h)/2),n=b(f[k]),
p=n!==r,m=n===n;(e?m||d:l?m&&p&&(d||null!=n):g?m&&(d||p):null==n?0:d?a>=n:a>n)?c=k+1:h=k}return $a(h,4294967294)}function td(f,a){for(var b=0,d=f.length,c=f[0],h=a?a(c):c,e=h,l=0,g=[c];++b<d;)c=f[b],h=a?a(c):c,Xa(h,e)||(e=h,g[++l]=c);return g}function ub(f,a,b){var d=-1,c=w,h=f.length,e=!0,g=[],k=g;if(b)e=!1,c=l;else if(200>h)k=a?[]:g;else{if(c=a?null:Af(f))return Ob(c);e=!1;c=ua;k=new sa}a:for(;++d<h;){var n=f[d],p=a?a(n):n;if(e&&p===p){for(var m=k.length;m--;)if(k[m]===p)continue a;a&&k.push(p);
g.push(n)}else c(k,p,b)||(k!==g&&k.push(p),g.push(n))}return g}function rc(f,a,b,d){for(var c=f.length,h=d?c:-1;(d?h--:++h<c)&&a(f[h],h,f););return b?Ja(f,d?0:h,d?h+1:c):Ja(f,d?h+1:0,d?c:h)}function ud(f,a){var b=f;return b instanceof C&&(b=b.value()),u(a,function(f,a){return a.func.apply(a.thisArg,x([f],a.args))},b)}function vd(f,a,b){for(var d=-1,c=f.length;++d<c;)var h=h?x(pb(h,f[d],a,b),pb(f[d],h,a,b)):f[d];return h&&h.length?ub(h,a,b):[]}function wd(f,a,b){for(var d=-1,c=f.length,h=a.length,
e={};++d<c;)b(e,f[d],h>d?a[d]:r);return e}function Vd(f,a){if(a)return f.slice();var b=new f.constructor(f.length);return f.copy(b),b}function ya(f){var a=new f.constructor(f.byteLength);return(new ie(a)).set(new ie(f)),a}function sc(f,a,b,d){var c=-1,h=f.length,e=b.length,l=-1,g=a.length,k=oa(h-e,0),n=Array(g+k);for(d=!d;++l<g;)n[l]=a[l];for(;++c<e;)(d||h>c)&&(n[b[c]]=f[c]);for(;k--;)n[l++]=f[c++];return n}function Fb(f,a,b,d){var c=-1,h=f.length,e=-1,l=b.length,g=-1,k=a.length,n=oa(h-l,0),p=Array(n+
k);for(d=!d;++c<n;)p[c]=f[c];for(n=c;++g<k;)p[n+g]=a[g];for(;++e<l;)(d||h>c)&&(p[n+b[e]]=f[c++]);return p}function ka(f,a){var b=-1,d=f.length;for(a||(a=Array(d));++b<d;)a[b]=f[b];return a}function gb(f,a,b){return Rc(f,a,b)}function Rc(f,a,b,d){b||(b={});for(var c=-1,h=a.length;++c<h;){var e=a[c],l=d?d(b[e],f[e],e,b,f):f[e];Y(b,e,l)}return b}function Wb(f,a){return gb(f,Bf(f),a)}function Sc(f,a){return function(b,d){var c=J(b)?k:Lc,h=a?a():{};return c(b,f,F(d),h)}}function ma(f){return D(function(a,
b){var d=-1,c=b.length,h=1<c?b[c-1]:r,e=2<c?b[2]:r,h="function"==typeof h?(c--,h):r;e&&Va(b[0],b[1],e)&&(h=3>c?r:h,c=1);for(a=Object(a);++d<c;)(e=b[d])&&f(a,e,d,h);return a})}function Wd(f,a){return function(b,d){if(null==b)return b;if(!v(b))return f(b,d);for(var c=b.length,h=a?c:-1,e=Object(b);(a?h--:++h<c)&&!1!==d(e[h],h,e););return b}}function xd(f){return function(a,b,d){var c=-1,h=Object(a);d=d(a);for(var e=d.length;e--;){var l=d[f?e:++c];if(!1===b(h[l],l,h))break}return a}}function se(f,a,b){function d(){return(this&&
this!==Aa&&this instanceof d?h:f).apply(c?b:this,arguments)}var c=1&a,h=tc(f);return d}function Xd(f){return function(a){a=Q(a);var b=ia.test(a)?a.match(P):r,d=b?b[0]:a.charAt(0);return a=b?b.slice(1).join(""):a.slice(1),d[f]()+a}}function vb(f){return function(a){return u(Ze($e(a)),f,"")}}function tc(f){return function(){var a=arguments;switch(a.length){case 0:return new f;case 1:return new f(a[0]);case 2:return new f(a[0],a[1]);case 3:return new f(a[0],a[1],a[2]);case 4:return new f(a[0],a[1],a[2],
a[3]);case 5:return new f(a[0],a[1],a[2],a[3],a[4]);case 6:return new f(a[0],a[1],a[2],a[3],a[4],a[5]);case 7:return new f(a[0],a[1],a[2],a[3],a[4],a[5],a[6])}var b=Bb(f.prototype),a=f.apply(b,a);return X(a)?a:b}}function Yd(f,a,b){function d(){for(var h=arguments.length,e=Array(h),l=h,g=Zb(d);l--;)e[l]=arguments[l];return l=3>h&&e[0]!==g&&e[h-1]!==g?[]:Da(e,g),h-=l.length,b>h?Ad(f,a,Ua,d.placeholder,r,e,l,r,r,b-h):m(this&&this!==Aa&&this instanceof d?c:f,this,e)}var c=tc(f);return d}function yd(f){return D(function(a){a=
S(a,1);var b=a.length,d=b,c=U.prototype.thru;for(f&&a.reverse();d--;){var h=a[d];if("function"!=typeof h)throw new Ya("Expected a function");if(c&&!e&&"wrapper"==uc(h))var e=new U([],!0)}for(d=e?d:b;++d<b;)var h=a[d],c=uc(h),l="wrapper"==c?xe(h):r,e=l&&wc(l[0])&&424==l[1]&&!l[4].length&&1==l[9]?e[uc(l[0])].apply(e,l[3]):1==h.length&&wc(h)?e[c]():e.thru(h);return function(){var f=arguments,d=f[0];if(e&&1==f.length&&J(d)&&200<=d.length)return e.plant(d).value();for(var c=0,f=b?a[c].apply(this,f):d;++c<
b;)f=a[c].call(this,f);return f}})}function Ua(f,a,b,d,c,h,e,l,g,k){function n(){for(var x=arguments.length,t=x,u=Array(x);t--;)u[t]=arguments[t];if(B){var E,U=Zb(n),t=u.length;for(E=0;t--;)u[t]===U&&E++}if(d&&(u=sc(u,d,c,B)),h&&(u=Fb(u,h,e,B)),x-=E,B&&k>x)return U=Da(u,U),Ad(f,a,Ua,n.placeholder,b,u,U,l,g,k-x);if(U=m?b:this,t=q?U[f]:f,x=u.length,l){E=u.length;for(var ab=$a(l.length,E),z=ka(u);ab--;){var v=l[ab];u[ab]=Ca(v,E)?z[v]:r}}else w&&1<x&&u.reverse();return p&&x>g&&(u.length=g),this&&this!==
Aa&&this instanceof n&&(t=R||tc(t)),t.apply(U,u)}var p=128&a,m=1&a,q=2&a,B=24&a,w=512&a,R=q?r:tc(f);return n}function Xb(f,a){return function(b,d){return V(b,f,a(d),{})}}function zd(f){return D(function(a){return a=q(S(a,1),F()),D(function(b){var d=this;return f(a,function(f){return m(f,d,b)})})})}function Gb(f,a,b){return a=L(a),f=ga(f),a&&a>f?(a-=f,b=b===r?" ":b+"",f=af(b,je(a/ga(b))),ia.test(b)?f.match(P).slice(0,a).join(""):f.slice(0,a)):""}function Tc(f,a,b,d){function c(){for(var a=-1,y=arguments.length,
l=-1,g=d.length,k=Array(g+y),n=this&&this!==Aa&&this instanceof c?e:f;++l<g;)k[l]=d[l];for(;y--;)k[l++]=arguments[++a];return m(n,h?b:this,k)}var h=1&a,e=tc(f);return c}function Yb(f){return function(a,b,d){d&&"number"!=typeof d&&Va(a,b,d)&&(b=d=r);a=pa(a);a=a===a?a:0;b===r?(b=a,a=0):b=pa(b)||0;d=d===r?b>a?1:-1:pa(d)||0;var c=-1;b=oa(je((b-a)/(d||1)),0);for(var h=Array(b);b--;)h[f?b:++c]=a,a+=d;return h}}function Ad(f,a,b,d,c,h,e,l,g,k){var n=8&a;l=l?ka(l):r;var p=n?e:r;e=n?r:e;var m=n?h:r;return h=
n?r:h,a=(a|(n?32:64))&~(n?64:32),4&a||(a&=-4),a=[f,a,c,m,p,h,e,l,g,k],b=b.apply(r,a),wc(f)&&bf(b,a),b.placeholder=d,b}function hb(f){var a=cd[f];return function(f,b){if(f=pa(f),b=L(b)){var d=(Q(f)+"e").split("e"),d=a(d[0]+"e"+(+d[1]+b)),d=(Q(d)+"e").split("e");return+(d[0]+"e"+(+d[1]-b))}return a(f)}}function Ka(f,a,b,d,c,h,e,l){var g=2&a;if(!g&&"function"!=typeof f)throw new Ya("Expected a function");var k=d?d.length:0;if(k||(a&=-97,d=c=r),e=e===r?e:oa(L(e),0),l=l===r?l:L(l),k-=c?c.length:0,64&a){var n=
d,p=c;d=c=r}var m=g?r:xe(f);return h=[f,a,b,d,c,n,p,h,e,l],m&&(b=h[1],f=m[1],a=b|f,d=128==f&&8==b||128==f&&256==b&&m[8]>=h[7].length||384==f&&m[8]>=m[7].length&&8==b,131>a||d)&&(1&f&&(h[2]=m[2],a|=1&b?0:4),(b=m[3])&&(d=h[3],h[3]=d?sc(d,b,m[4]):ka(b),h[4]=d?Da(h[3],"__lodash_placeholder__"):ka(m[4])),(b=m[5])&&(d=h[5],h[5]=d?Fb(d,b,m[6]):ka(b),h[6]=d?Da(h[5],"__lodash_placeholder__"):ka(m[6])),(b=m[7])&&(h[7]=ka(b)),128&f&&(h[8]=null==h[8]?m[8]:$a(h[8],m[8])),null==h[9]&&(h[9]=m[9]),h[0]=m[0],h[1]=
a),f=h[0],a=h[1],b=h[2],d=h[3],c=h[4],l=h[9]=null==h[9]?g?0:f.length:oa(h[9]-k,0),!l&&24&a&&(a&=-25),g=a&&1!=a?8==a||16==a?Yd(f,a,l):32!=a&&33!=a||c.length?Ua.apply(r,h):Tc(f,a,b,d):se(f,a,b),(m?cf:bf)(g,h)}function Zd(f,a,b,d,c,h){var e=-1,l=2&c,g=1&c,k=f.length,n=a.length;if(!(k==n||l&&n>k))return!1;if(n=h.get(f))return n==a;n=!0;for(h.set(f,a);++e<k;){var m=f[e],p=a[e];if(d)var q=l?d(p,m,e,a,f,h):d(m,p,e,f,a,h);if(q!==r){if(q)continue;n=!1;break}if(g){if(!K(a,function(f){return m===f||b(m,f,d,
c,h)})){n=!1;break}}else if(m!==p&&!b(m,p,d,c,h)){n=!1;break}}return h["delete"](f),n}function ib(f,a,b,d,c,h){switch(b){case "[object ArrayBuffer]":if(f.byteLength!=a.byteLength||!d(new ie(f),new ie(a)))break;return!0;case "[object Boolean]":case "[object Date]":return+f==+a;case "[object Error]":return f.name==a.name&&f.message==a.message;case "[object Number]":return f!=+f?a!=+a:f==+a;case "[object RegExp]":case "[object String]":return f==a+"";case "[object Map]":var e=Nb;case "[object Set]":return e||
(e=Ob),(2&h||f.size==a.size)&&d(e(f),e(a),c,1|h);case "[object Symbol]":return!!Kb&&ye.call(f)==ye.call(a)}return!1}function $d(f,a,b,d,c,h){var e=2&c,l=ta(f),g=l.length,k=ta(a).length;if(g!=k&&!e)return!1;for(var n=g;n--;){var m=l[n];if(!(e?m in a:od(a,m)))return!1}if(k=h.get(f))return k==a;k=!0;h.set(f,a);for(var p=e;++n<g;){var m=l[n],q=f[m],B=a[m];if(d)var w=e?d(B,q,m,a,f,h):d(q,B,m,f,a,h);if(w===r?q!==B&&!b(q,B,d,c,h):!w){k=!1;break}p||(p="constructor"==m)}return k&&!p&&(b=f.constructor,d=a.constructor,
b!=d&&"constructor"in f&&"constructor"in a&&!("function"==typeof b&&b instanceof b&&"function"==typeof d&&d instanceof d)&&(k=!1)),h["delete"](f),k}function uc(f){for(var a=f.name+"",b=Kd[a],d=da.call(Kd,a)?b.length:0;d--;){var c=b[d],h=c.func;if(null==h||h==f)return c.name}return a}function F(){var f=d.iteratee||ze,f=f===ze?lc:f;return arguments.length?f(arguments[0],arguments[1]):f}function Uc(f){f=df(f);for(var a=f.length;a--;){var b,d=f[a];b=f[a][1];b=b===b&&!X(b);d[2]=b}return f}function vc(f,
a){var b=null==f?r:f[a];return Le(b)?b:r}function Zb(f){return(da.call(d,"placeholder")?d:f).placeholder}function La(f){return za.call(f)}function Sd(f,a,b){if(null==f)return!1;var d=b(f,a);return d||Wa(a)||(a=Sa(a),f=ac(f,a),null!=f&&(a=na(a),d=b(f,a))),b=f?f.length:r,d||!!b&&fd(b)&&Ca(a,b)&&(J(f)||zc(f)||n(f))}function te(f){var a=f.length,b=f.constructor(a);return a&&"string"==typeof f[0]&&da.call(f,"index")&&(b.index=f.index,b.input=f.input),b}function ue(f){return Ma(f.constructor)&&!Vc(f)?Bb(ge(f)):
{}}function ve(f,a,b){var d=f.constructor;switch(a){case "[object ArrayBuffer]":return ya(f);case "[object Boolean]":case "[object Date]":return new d(+f);case "[object Float32Array]":case "[object Float64Array]":case "[object Int8Array]":case "[object Int16Array]":case "[object Int32Array]":case "[object Uint8Array]":case "[object Uint8ClampedArray]":case "[object Uint16Array]":case "[object Uint32Array]":return a=f.buffer,b=b?ya(a):a,new f.constructor(b,f.byteOffset,f.length);case "[object Map]":return b=
f.constructor,u(Nb(f),c,new b);case "[object Number]":case "[object String]":return new d(f);case "[object RegExp]":return b=new f.constructor(f.source,mb.exec(f)),b.lastIndex=f.lastIndex,b;case "[object Set]":return b=f.constructor,u(Ob(f),p,new b);case "[object Symbol]":return Kb?Object(ye.call(f)):{}}}function Bd(f){var a=f?f.length:r;return fd(a)&&(J(f)||zc(f)||n(f))?T(a,String):null}function Va(f,a,b){if(!X(b))return!1;var d=typeof a;return("number"==d?v(b)&&Ca(a,b.length):"string"==d&&a in b)?
Xa(b[a],f):!1}function Wa(f,a){return"number"==typeof f?!0:!J(f)&&(Na.test(f)||!gd.test(f)||null!=a&&f in Object(a))}function $b(f){var a=typeof f;return"number"==a||"boolean"==a||"string"==a&&"__proto__"!=f||null==f}function wc(f){var a=uc(f),b=d[a];return"function"==typeof b&&a in C.prototype?f===b?!0:(a=xe(b),!!a&&f===a[0]):!1}function Vc(f){var a=f&&f.constructor,a=Ma(a)&&a.prototype||ad;return f===a}function Cd(f,a,b,d,c,h){return X(f)&&X(a)&&(h.set(a,f),Eb(f,a,r,Cd,h)),f}function ac(f,a){return 1==
a.length?f:Jd(f,Ja(a,0,-1))}function Wc(f){var a=[];return Q(f).replace(Kc,function(f,b,d,c){a.push(d?c.replace(fc,"$1"):b||f)}),a}function Ed(f){if(f instanceof C)return f.clone();var a=new U(f.__wrapped__,f.__chain__);return a.__actions__=ka(f.__actions__),a.__index__=f.__index__,a.__values__=f.__values__,a}function Fd(f,a,b){var d=f?f.length:0;return d?(a=b||a===r?1:L(a),Ja(f,0>a?0:a,d)):[]}function Dd(f,a,b){var d=f?f.length:0;return d?(a=b||a===r?1:L(a),a=d-a,Ja(f,0,0>a?0:a)):[]}function Ba(f){return f?
f[0]:r}function na(f){var a=f?f.length:0;return a?f[a-1]:r}function ae(f,a){return f&&f.length&&a&&a.length?oc(f,a):f}function Xc(f){return f?Cf.call(f):f}function Gd(f){if(!f||!f.length)return[];var a=0;return f=g(f,function(f){return ea(f)?(a=oa(f.length,a),!0):void 0}),T(a,function(a){return q(f,nc(a))})}function be(f,a){if(!f||!f.length)return[];var b=Gd(f);return null==a?b:q(b,function(f){return m(a,r,f)})}function Od(f){return f=d(f),f.__chain__=!0,f}function xc(f,a){return a(f)}function ce(){return this}
function yc(f,b){return"function"==typeof b&&J(f)?a(f,b):Jb(f,Ta(b))}function Hd(f,a){var b;if("function"==typeof a&&J(f)){for(b=f.length;b--&&!1!==a(f[b],b,f););b=f}else b=Ae(f,Ta(a));return b}function bc(f,a){return(J(f)?q:pd)(f,F(a,3))}function Yc(f,a){var b=-1,d=Be(f),c=d.length,h=c-1;for(a=Tb(L(a),0,c);++b<a;){var c=Pc(b,h),e=d[c];d[c]=d[b];d[b]=e}return d.length=a,d}function Zc(f,a,b){return a=b?r:a,a=f&&null==a?f.length:a,Ka(f,128,r,r,r,r,a)}function Ib(f,a){var b;if("function"!=typeof a)throw new Ya("Expected a function");
return f=L(f),function(){return 0<--f&&(b=a.apply(this,arguments)),1>=f&&(a=r),b}}function Hb(f,a,b){return a=b?r:a,f=Ka(f,8,r,r,r,r,r,a),f.placeholder=Hb.placeholder,f}function Id(a,b,d){return b=d?r:b,a=Ka(a,16,r,r,r,r,r,b),a.placeholder=Id.placeholder,a}function de(a,b,d){function c(){B&&Ld(B);n&&Ld(n);x=0;k=n=q=B=w=r}function h(b,d){d&&Ld(d);n=B=w=r;b&&(x=Md(),m=a.apply(q,k),B||n||(k=q=r))}function e(){var a=b-(Md()-p);0>=a||a>b?h(w,n):B=fe(e,a)}function l(){h(u,B)}function g(){if(k=arguments,
p=Md(),q=this,w=u&&(B||!R),!1===t)var d=R&&!B;else{x||n||R||(x=p);var c=t-(p-x),h=(0>=c||c>t)&&(R||n);h?(n&&(n=Ld(n)),x=p,m=a.apply(q,k)):n||(n=fe(l,c))}return h&&B?B=Ld(B):B||b===t||(B=fe(e,b)),d&&(h=!0,m=a.apply(q,k)),!h||B||n||(k=q=r),m}var k,n,m,p,q,B,w,x=0,R=!1,t=!1,u=!0;if("function"!=typeof a)throw new Ya("Expected a function");return b=pa(b)||0,X(d)&&(R=!!d.leading,t="maxWait"in d&&oa(pa(d.maxWait)||0,b),u="trailing"in d?!!d.trailing:u),g.cancel=c,g.flush=function(){return(B&&w||n&&u)&&(m=
a.apply(q,k)),c(),m},g}function $c(a,b){if("function"!=typeof a||b&&"function"!=typeof b)throw new Ya("Expected a function");var d=function(){var c=arguments,h=b?b.apply(this,c):c[0],e=d.cache;return e.has(h)?e.get(h):(c=a.apply(this,c),d.cache=e.set(h,c),c)};return d.cache=new $c.Cache,d}function D(a,b){if("function"!=typeof a)throw new Ya("Expected a function");return b=oa(b===r?a.length-1:L(b),0),function(){for(var d=arguments,c=-1,h=oa(d.length-b,0),e=Array(h);++c<h;)e[c]=d[b+c];switch(b){case 0:return a.call(this,
e);case 1:return a.call(this,d[0],e);case 2:return a.call(this,d[0],d[1],e)}h=Array(b+1);for(c=-1;++c<b;)h[c]=d[c];return h[b]=e,m(a,this,h)}}function Xa(a,b){return a===b||a!==a&&b!==b}function b(a,b){return a>b}function n(a){return ea(a)&&da.call(a,"callee")&&(!ef.call(a,"callee")||"[object Arguments]"==za.call(a))}function v(a){return null!=a&&!("function"==typeof a&&Ma(a))&&fd(Df(a))}function ea(a){return ha(a)&&v(a)}function ne(a){return ha(a)?"[object Error]"==za.call(a)||"string"==typeof a.message&&
"string"==typeof a.name:!1}function Ma(a){return a=X(a)?za.call(a):"","[object Function]"==a||"[object GeneratorFunction]"==a}function Ke(a){return"number"==typeof a&&a==L(a)}function fd(a){return"number"==typeof a&&-1<a&&0==a%1&&9007199254740991>=a}function X(a){var b=typeof a;return!!a&&("object"==b||"function"==b)}function ha(a){return!!a&&"object"==typeof a}function Le(a){return null==a?!1:Ma(a)?ff.test(cc.call(a)):ha(a)&&(bb(a)?ff:Oa).test(a)}function Me(a){return"number"==typeof a||ha(a)&&"[object Number]"==
za.call(a)}function oe(a){return!ha(a)||"[object Object]"!=za.call(a)||bb(a)?!1:(a=ge(a),null===a?!0:(a=a.constructor,"function"==typeof a&&a instanceof a&&cc.call(a)==Ef))}function gf(a){return X(a)&&"[object RegExp]"==za.call(a)}function zc(a){return"string"==typeof a||!J(a)&&ha(a)&&"[object String]"==za.call(a)}function hf(a){return"symbol"==typeof a||ha(a)&&"[object Symbol]"==za.call(a)}function bd(a){return ha(a)&&fd(a.length)&&!!I[za.call(a)]}function Ce(a,b){return b>a}function Be(a){if(!a)return[];
if(v(a))return zc(a)?a.match(P):ka(a);if(Ac&&a[Ac])return Mb(a[Ac]());var b=La(a);return("[object Map]"==b?Nb:"[object Set]"==b?Ob:ke)(a)}function L(a){if(!a)return 0===a?a:0;if(a=pa(a),a===lb||a===-lb)return 1.7976931348623157E308*(0>a?-1:1);var b=a%1;return a===a?b?a-b:a:0}function jf(a){return a?Tb(L(a),0,4294967295):0}function pa(a){if(X(a)&&(a=Ma(a.valueOf)?a.valueOf():a,a=X(a)?a+"":a),"string"!=typeof a)return 0===a?a:+a;a=a.replace(ec,"");var b=Fa.test(a);return b||gc.test(a)?Rb(a.slice(2),
b?2:8):id.test(a)?Ec:+a}function Xe(a){return gb(a,Za(a))}function Q(a){if("string"==typeof a)return a;if(null==a)return"";if(hf(a))return Kb?Ff.call(a):"";var b=a+"";return"0"==b&&1/a==-lb?"-0":b}function Jd(a,b,d){return a=null==a?r:Nc(a,b),a===r?d:a}function kf(a,b){return Sd(a,b,od)}function We(a,b){return Sd(a,b,re)}function ta(a){var b=Vc(a);if(!b&&!v(a))return Gf(Object(a));var d,c=Bd(a),h=!!c,c=c||[],e=c.length;for(d in a)!od(a,d)||h&&("length"==d||Ca(d,e))||b&&"constructor"==d||c.push(d);
return c}function Za(a){for(var b=-1,d=Vc(a),c=qd(a),h=c.length,e=Bd(a),l=!!e,e=e||[],g=e.length;++b<h;){var k=c[b];l&&("length"==k||Ca(k,g))||"constructor"==k&&(d||!da.call(a,k))||e.push(k)}return e}function df(a){return H(a,ta(a))}function ke(a){return a?fa(a,ta(a)):[]}function De(a){return lf(Q(a).toLowerCase())}function $e(a){return(a=Q(a))&&a.replace(ba,Cc).replace(ob,"")}function af(a,b){a=Q(a);b=L(b);var d="";if(!a||1>b||9007199254740991<b)return d;do b%2&&(d+=a),b=he(b/2),a+=a;while(b);return d}
function Ze(a,b,d){return a=Q(a),b=d?r:b,b===r&&(b=Ga.test(a)?wa:Pa),a.match(b)||[]}function Ee(a){return function(){return a}}function jb(a){return a}function ze(a){return lc("function"==typeof a?a:xa(a,!0))}function Fe(b,d,c){var h=ta(d),e=Oc(d,h);null!=c||X(d)&&(e.length||!h.length)||(c=d,d=b,b=this,e=Oc(d,ta(d)));var l=X(c)&&"chain"in c?c.chain:!0,g=Ma(b);return a(e,function(a){var c=d[a];b[a]=c;g&&(b.prototype[a]=function(){var a=this.__chain__;if(l||a){var d=b(this.__wrapped__);return(d.__actions__=
ka(this.__actions__)).push({func:c,args:arguments,thisArg:b}),d.__chain__=a,d}return c.apply(b,x([this.value()],arguments))})}),b}function Ge(){}function Ve(a){return Wa(a)?nc(a):tb(a)}function mf(a){return a&&a.length?qa(a,jb):0}B=B?Qa.defaults({},B,Qa.pick(Aa,Qb)):Aa;var Hf=B.Date,If=B.Error,cd=B.Math,He=B.RegExp,Ya=B.TypeError,le=B.Array.prototype,ad=B.Object.prototype,cc=B.Function.prototype.toString,da=ad.hasOwnProperty,Jf=0,Ef=cc.call(Object),za=ad.toString,Kf=Aa._,ff=He("^"+cc.call(da).replace(la,
"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),nf=Pd?B.Buffer:r,of=B.Reflect,Kb=B.Symbol,ie=B.Uint8Array,Ld=B.clearTimeout,pf=of?of.enumerate:r,ge=Object.getPrototypeOf,Lf=Object.getOwnPropertySymbols,Ac="symbol"==typeof(Ac=Kb&&Kb.iterator)?Ac:r,zf=Object.create,ef=ad.propertyIsEnumerable,fe=B.setTimeout,ee=le.splice,je=cd.ceil,he=cd.floor,Mf=B.isFinite,Nf=le.join,Gf=Object.keys,oa=cd.max,$a=cd.min,Of=B.parseInt,Ye=cd.random,Cf=le.reverse,wb=vc(B,"Map"),Bc=
vc(B,"Set"),dd=vc(B,"WeakMap"),ed=vc(Object,"create"),me=dd&&new dd,Pf=wb?cc.call(wb):"",Qf=Bc?cc.call(Bc):"",Rf=dd?cc.call(dd):"",qf=Kb?Kb.prototype:r,ye=Kb?qf.valueOf:r,Ff=Kb?qf.toString:r,Kd={};d.templateSettings={escape:Hc,evaluate:Ic,interpolate:Jc,variable:"",imports:{_:d}};var Jb=Wd(Ia),Ae=Wd(qb,!0),we=xd(),Ue=xd(!0);pf&&!ef.call({valueOf:1},"valueOf")&&(qd=function(a){return Mb(pf(a))});var cf=me?function(a,b){return me.set(a,b),a}:jb,Af=Bc&&2===(new Bc([1,2])).size?function(a){return new Bc(a)}:
Ge,xe=me?function(a){return me.get(a)}:Ge,Df=nc("length"),Bf=Lf||function(){return[]};(wb&&"[object Map]"!=La(new wb)||Bc&&"[object Set]"!=La(new Bc)||dd&&"[object WeakMap]"!=La(new dd))&&(La=function(a){var b=za.call(a);if(a="[object Object]"==b?a.constructor:null,a="function"==typeof a?cc.call(a):"")switch(a){case Pf:return"[object Map]";case Qf:return"[object Set]";case Rf:return"[object WeakMap]"}return b});var bf=function(){var a=0,b=0;return function(d,c){var h=Md(),e=16-(h-b);if(b=h,0<e){if(150<=
++a)return d}else a=0;return cf(d,c)}}(),Sf=D(function(a,b){J(a)||(a=null==a?[]:[Object(a)]);b=S(b,1);for(var d=a,c=b,h=-1,e=d.length,l=-1,g=c.length,k=Array(e+g);++h<e;)k[h]=d[h];for(;++l<g;)k[h++]=c[l];return k}),Tf=D(function(a,b){return ea(a)?pb(a,S(b,1,!0)):[]}),Uf=D(function(a,b){var d=na(b);return ea(d)&&(d=r),ea(a)?pb(a,S(b,1,!0),F(d)):[]}),Vf=D(function(a,b){var d=na(b);return ea(d)&&(d=r),ea(a)?pb(a,S(b,1,!0),r,d):[]}),Wf=D(function(a){var b=q(a,nd);return b.length&&b[0]===a[0]?Cb(b):[]}),
Xf=D(function(a){var b=na(a),d=q(a,nd);return b===na(d)?b=r:d.pop(),d.length&&d[0]===a[0]?Cb(d,F(b)):[]}),Yf=D(function(a){var b=na(a),d=q(a,nd);return b===na(d)?b=r:d.pop(),d.length&&d[0]===a[0]?Cb(d,r,b):[]}),Zf=D(ae),$f=D(function(a,b){b=q(S(b,1),String);var d=kc(a,b);return sd(a,b.sort(ab)),d}),ag=D(function(a){return ub(S(a,1,!0))}),bg=D(function(a){var b=na(a);return ea(b)&&(b=r),ub(S(a,1,!0),F(b))}),cg=D(function(a){var b=na(a);return ea(b)&&(b=r),ub(S(a,1,!0),r,b)}),dg=D(function(a,b){return ea(a)?
pb(a,b):[]}),eg=D(function(a){return vd(g(a,ea))}),fg=D(function(a){var b=na(a);return ea(b)&&(b=r),vd(g(a,ea),F(b))}),gg=D(function(a){var b=na(a);return ea(b)&&(b=r),vd(g(a,ea),r,b)}),hg=D(Gd),ig=D(function(a){var b=a.length,b=1<b?a[b-1]:r,b="function"==typeof b?(a.pop(),b):r;return be(a,b)}),jg=D(function(a){a=S(a,1);var b=a.length,d=b?a[0]:0,c=this.__wrapped__,h=function(b){return kc(b,a)};return 1>=b&&!this.__actions__.length&&c instanceof C&&Ca(d)?(c=c.slice(d,+d+(b?1:0)),c.__actions__.push({func:xc,
args:[h],thisArg:r}),(new U(c,this.__chain__)).thru(function(a){return b&&!a.length&&a.push(r),a})):this.thru(h)}),kg=Sc(function(a,b,d){da.call(a,d)?++a[d]:a[d]=1}),lg=Sc(function(a,b,d){da.call(a,d)?a[d].push(b):a[d]=[b]}),mg=D(function(a,b,d){var c=-1,h="function"==typeof b,e=Wa(b),l=v(a)?Array(a.length):[];return Jb(a,function(a){var f=h?b:e&&null!=a?a[b]:r;l[++c]=f?m(f,a,d):Db(a,b,d)}),l}),ng=Sc(function(a,b,d){a[d]=b}),og=Sc(function(a,b,d){a[d?0:1].push(b)},function(){return[[],[]]}),pg=D(function(a,
b){if(null==a)return[];var d=b.length;return 1<d&&Va(a,b[0],b[1])?b=[]:2<d&&Va(b[0],b[1],b[2])&&(b.length=1),Ub(a,S(b,1),[])}),Md=Hf.now,Ie=D(function(a,b,d){var c=1;if(d.length)var h=Da(d,Zb(Ie)),c=32|c;return Ka(a,c,b,d,h)}),rf=D(function(a,b,d){var c=3;if(d.length)var h=Da(d,Zb(rf)),c=32|c;return Ka(b,c,a,d,h)}),qg=D(function(a,b){return Qd(a,1,b)}),rg=D(function(a,b,d){return Qd(a,pa(b)||0,d)}),sg=D(function(a,b){b=q(S(b,1),F());var d=b.length;return D(function(c){for(var h=-1,e=$a(c.length,d);++h<
e;)c[h]=b[h].call(this,c[h]);return m(a,this,c)})}),Je=D(function(a,b){var d=Da(b,Zb(Je));return Ka(a,32,r,b,d)}),sf=D(function(a,b){var d=Da(b,Zb(sf));return Ka(a,64,r,b,d)}),tg=D(function(a,b){return Ka(a,256,r,r,r,S(b,1))}),J=Array.isArray,Te=nf?function(a){return a instanceof nf}:Ee(!1),ug=ma(function(a,b){gb(b,ta(b),a)}),tf=ma(function(a,b){gb(b,Za(b),a)}),Nd=ma(function(a,b,d,c){Rc(b,Za(b),a,c)}),vg=ma(function(a,b,d,c){Rc(b,ta(b),a,c)}),wg=D(function(a,b){return kc(a,S(b,1))}),xg=D(function(a){return a.push(r,
jc),m(Nd,r,a)}),yg=D(function(a){return a.push(r,Cd),m(uf,r,a)}),zg=Xb(function(a,b,d){a[b]=d},Ee(jb)),Ag=Xb(function(a,b,d){da.call(a,b)?a[b].push(d):a[b]=[d]},F),Bg=D(Db),Cg=ma(function(a,b,d){Eb(a,b,d)}),uf=ma(function(a,b,d,c){Eb(a,b,d,c)}),Dg=D(function(a,b){return null==a?{}:(b=q(S(b,1),String),rd(a,pb(Za(a),b)))}),Eg=D(function(a,b){return null==a?{}:rd(a,S(b,1))}),Fg=vb(function(a,b,d){return b=b.toLowerCase(),a+(d?De(b):b)}),Gg=vb(function(a,b,d){return a+(d?"-":"")+b.toLowerCase()}),Hg=
vb(function(a,b,d){return a+(d?" ":"")+b.toLowerCase()}),Ig=Xd("toLowerCase"),lf=Xd("toUpperCase"),Jg=vb(function(a,b,d){return a+(d?"_":"")+b.toLowerCase()}),Kg=vb(function(a,b,d){return a+(d?" ":"")+De(b)}),Lg=vb(function(a,b,d){return a+(d?" ":"")+b.toUpperCase()}),vf=D(function(a,b){try{return m(a,r,b)}catch(d){return ne(d)?d:new If(d)}}),Mg=D(function(b,d){return a(S(d,1),function(a){b[a]=Ie(b[a],b)}),b}),Ng=yd(),Og=yd(!0),Pg=D(function(a,b){return function(d){return Db(d,a,b)}}),Qg=D(function(a,
b){return function(d){return Db(a,d,b)}}),Rg=zd(q),Sg=zd(e),Tg=zd(K),Ug=Yb(),Vg=Yb(!0),Wg=hb("ceil"),Xg=hb("floor"),Yg=hb("round");return d.prototype=R.prototype,U.prototype=Bb(R.prototype),U.prototype.constructor=U,C.prototype=Bb(R.prototype),C.prototype.constructor=C,hc.prototype=ed?ed(null):ad,ca.prototype.clear=function(){this.__data__={hash:new hc,map:wb?new wb:[],string:new hc}},ca.prototype["delete"]=function(a){var b=this.__data__;return $b(a)?(b="string"==typeof a?b.string:b.hash,(ed?b[a]!==
r:da.call(b,a))&&delete b[a]):wb?b.map["delete"](a):db(b.map,a)},ca.prototype.get=function(a){var b=this.__data__;return $b(a)?(b="string"==typeof a?b.string:b.hash,ed?(a=b[a],a="__lodash_hash_undefined__"===a?r:a):a=da.call(b,a)?b[a]:r,a):wb?b.map.get(a):eb(b.map,a)},ca.prototype.has=function(a){var b=this.__data__;return $b(a)?(b="string"==typeof a?b.string:b.hash,a=ed?b[a]!==r:da.call(b,a)):a=wb?b.map.has(a):-1<Ha(b.map,a),a},ca.prototype.set=function(a,b){var d=this.__data__;return $b(a)?("string"==
typeof a?d.string:d.hash)[a]=ed&&b===r?"__lodash_hash_undefined__":b:wb?d.map.set(a,b):Sb(d.map,a,b),this},sa.prototype.push=function(a){var b=this.__data__;$b(a)?(b=b.__data__,("string"==typeof a?b.string:b.hash)[a]="__lodash_hash_undefined__"):b.set(a,"__lodash_hash_undefined__")},Ra.prototype.clear=function(){this.__data__={array:[],map:null}},Ra.prototype["delete"]=function(a){var b=this.__data__,d=b.array;return d?db(d,a):b.map["delete"](a)},Ra.prototype.get=function(a){var b=this.__data__,d=
b.array;return d?eb(d,a):b.map.get(a)},Ra.prototype.has=function(a){var b=this.__data__,d=b.array;return d?-1<Ha(d,a):b.map.has(a)},Ra.prototype.set=function(a,b){var d=this.__data__,c=d.array;return c&&(199>c.length?Sb(c,a,b):(d.array=null,d.map=new ca(c))),(d=d.map)&&d.set(a,b),this},$c.Cache=ca,d.after=function(a,b){if("function"!=typeof b)throw new Ya("Expected a function");return a=L(a),function(){return 1>--a?b.apply(this,arguments):void 0}},d.ary=Zc,d.assign=ug,d.assignIn=tf,d.assignInWith=
Nd,d.assignWith=vg,d.at=wg,d.before=Ib,d.bind=Ie,d.bindAll=Mg,d.bindKey=rf,d.castArray=function(){if(!arguments.length)return[];var a=arguments[0];return J(a)?a:[a]},d.chain=Od,d.chunk=function(a,b){b=oa(L(b),0);var d=a?a.length:0;if(!d||1>b)return[];for(var c=0,h=-1,e=Array(je(d/b));d>c;)e[++h]=Ja(a,c,c+=b);return e},d.compact=function(a){for(var b=-1,d=a?a.length:0,c=-1,h=[];++b<d;){var e=a[b];e&&(h[++c]=e)}return h},d.concat=Sf,d.cond=function(a){var b=a?a.length:0,d=F();return a=b?q(a,function(a){if("function"!=
typeof a[1])throw new Ya("Expected a function");return[d(a[0]),a[1]]}):[],D(function(d){for(var c=-1;++c<b;){var h=a[c];if(m(h[0],this,d))return m(h[1],this,d)}})},d.conforms=function(a){return Mc(xa(a,!0))},d.constant=Ee,d.countBy=kg,d.create=function(a,b){var d=Bb(a);return b?md(d,b):d},d.curry=Hb,d.curryRight=Id,d.debounce=de,d.defaults=xg,d.defaultsDeep=yg,d.defer=qg,d.delay=rg,d.difference=Tf,d.differenceBy=Uf,d.differenceWith=Vf,d.drop=Fd,d.dropRight=Dd,d.dropRightWhile=function(a,b){return a&&
a.length?rc(a,F(b,3),!0,!0):[]},d.dropWhile=function(a,b){return a&&a.length?rc(a,F(b,3),!0):[]},d.fill=function(a,b,d,c){var h=a?a.length:0;if(!h)return[];d&&"number"!=typeof d&&Va(a,b,d)&&(d=0,c=h);h=a.length;d=L(d);0>d&&(d=-d>h?0:h+d);c=c===r||c>h?h:L(c);0>c&&(c+=h);for(c=d>c?0:jf(c);c>d;)a[d++]=b;return a},d.filter=function(a,b){return(J(a)?g:fb)(a,F(b,3))},d.flatMap=function(a,b){return S(bc(a,b),1)},d.flatten=function(a){return a&&a.length?S(a,1):[]},d.flattenDeep=function(a){return a&&a.length?
S(a,lb):[]},d.flattenDepth=function(a,b){return a&&a.length?(b=b===r?1:L(b),S(a,b)):[]},d.flip=function(a){return Ka(a,512)},d.flow=Ng,d.flowRight=Og,d.fromPairs=function(a){for(var b=-1,d=a?a.length:0,c={};++b<d;){var h=a[b];c[h[0]]=h[1]}return c},d.functions=function(a){return null==a?[]:Oc(a,ta(a))},d.functionsIn=function(a){return null==a?[]:Oc(a,Za(a))},d.groupBy=lg,d.initial=function(a){return Dd(a,1)},d.intersection=Wf,d.intersectionBy=Xf,d.intersectionWith=Yf,d.invert=zg,d.invertBy=Ag,d.invokeMap=
mg,d.iteratee=ze,d.keyBy=ng,d.keys=ta,d.keysIn=Za,d.map=bc,d.mapKeys=function(a,b){var d={};return b=F(b,3),Ia(a,function(a,f,c){d[b(a,f,c)]=a}),d},d.mapValues=function(a,b){var d={};return b=F(b,3),Ia(a,function(a,f,c){d[f]=b(a,f,c)}),d},d.matches=function(a){return Vb(xa(a,!0))},d.matchesProperty=function(a,b){return Td(a,xa(b,!0))},d.memoize=$c,d.merge=Cg,d.mergeWith=uf,d.method=Pg,d.methodOf=Qg,d.mixin=Fe,d.negate=function(a){if("function"!=typeof a)throw new Ya("Expected a function");return function(){return!a.apply(this,
arguments)}},d.nthArg=function(a){return a=L(a),function(){return arguments[a]}},d.omit=Dg,d.omitBy=function(a,b){return b=F(b),mc(a,function(a,d){return!b(a,d)})},d.once=function(a){return Ib(2,a)},d.orderBy=function(a,b,d,c){return null==a?[]:(J(b)||(b=null==b?[]:[b]),d=c?r:d,J(d)||(d=null==d?[]:[d]),Ub(a,b,d))},d.over=Rg,d.overArgs=sg,d.overEvery=Sg,d.overSome=Tg,d.partial=Je,d.partialRight=sf,d.partition=og,d.pick=Eg,d.pickBy=function(a,b){return null==a?{}:mc(a,F(b))},d.property=Ve,d.propertyOf=
function(a){return function(b){return null==a?r:Nc(a,b)}},d.pull=Zf,d.pullAll=ae,d.pullAllBy=function(a,b,d){return a&&a.length&&b&&b.length?oc(a,b,F(d)):a},d.pullAt=$f,d.range=Ug,d.rangeRight=Vg,d.rearg=tg,d.reject=function(a,b){var d=J(a)?g:fb;return b=F(b,3),d(a,function(a,d,f){return!b(a,d,f)})},d.remove=function(a,b){var d=[];if(!a||!a.length)return d;var c=-1,h=[],e=a.length;for(b=F(b,3);++c<e;){var l=a[c];b(l,c,a)&&(d.push(l),h.push(c))}return sd(a,h),d},d.rest=D,d.reverse=Xc,d.sampleSize=
Yc,d.set=function(a,b,d){return null==a?a:Qc(a,b,d)},d.setWith=function(a,b,d,c){return c="function"==typeof c?c:r,null==a?a:Qc(a,b,d,c)},d.shuffle=function(a){return Yc(a,4294967295)},d.slice=function(a,b,d){var c=a?a.length:0;return c?(d&&"number"!=typeof d&&Va(a,b,d)?(b=0,d=c):(b=null==b?0:L(b),d=d===r?c:L(d)),Ja(a,b,d)):[]},d.sortBy=pg,d.sortedUniq=function(a){return a&&a.length?td(a):[]},d.sortedUniqBy=function(a,b){return a&&a.length?td(a,F(b)):[]},d.split=function(a,b,d){return Q(a).split(b,
d)},d.spread=function(a,b){if("function"!=typeof a)throw new Ya("Expected a function");return b=b===r?0:oa(L(b),0),D(function(d){var c=d[b];return d=d.slice(0,b),c&&x(d,c),m(a,this,d)})},d.tail=function(a){return Fd(a,1)},d.take=function(a,b,d){return a&&a.length?(b=d||b===r?1:L(b),Ja(a,0,0>b?0:b)):[]},d.takeRight=function(a,b,d){var c=a?a.length:0;return c?(b=d||b===r?1:L(b),b=c-b,Ja(a,0>b?0:b,c)):[]},d.takeRightWhile=function(a,b){return a&&a.length?rc(a,F(b,3),!1,!0):[]},d.takeWhile=function(a,
b){return a&&a.length?rc(a,F(b,3)):[]},d.tap=function(a,b){return b(a),a},d.throttle=function(a,b,d){var c=!0,h=!0;if("function"!=typeof a)throw new Ya("Expected a function");return X(d)&&(c="leading"in d?!!d.leading:c,h="trailing"in d?!!d.trailing:h),de(a,b,{leading:c,maxWait:b,trailing:h})},d.thru=xc,d.toArray=Be,d.toPairs=df,d.toPairsIn=function(a){return H(a,Za(a))},d.toPath=function(a){return J(a)?q(a,String):Wc(a)},d.toPlainObject=Xe,d.transform=function(b,d,c){var h=J(b)||bd(b);if(d=F(d,4),
null==c)if(h||X(b)){var e=b.constructor;c=h?J(b)?new e:[]:Ma(e)?Bb(ge(b)):{}}else c={};return(h?a:Ia)(b,function(a,b,f){return d(c,a,b,f)}),c},d.unary=function(a){return Zc(a,1)},d.union=ag,d.unionBy=bg,d.unionWith=cg,d.uniq=function(a){return a&&a.length?ub(a):[]},d.uniqBy=function(a,b){return a&&a.length?ub(a,F(b)):[]},d.uniqWith=function(a,b){return a&&a.length?ub(a,r,b):[]},d.unset=function(a,b){var d;if(null==a)d=!0;else{d=a;var c=b,c=Wa(c,d)?[c+""]:Sa(c);d=ac(d,c);c=na(c);d=null!=d&&kf(d,c)?
delete d[c]:!0}return d},d.unzip=Gd,d.unzipWith=be,d.values=ke,d.valuesIn=function(a){return null==a?[]:fa(a,Za(a))},d.without=dg,d.words=Ze,d.wrap=function(a,b){return b=null==b?jb:b,Je(b,a)},d.xor=eg,d.xorBy=fg,d.xorWith=gg,d.zip=hg,d.zipObject=function(a,b){return wd(a||[],b||[],Y)},d.zipObjectDeep=function(a,b){return wd(a||[],b||[],Qc)},d.zipWith=ig,d.extend=tf,d.extendWith=Nd,Fe(d,d),d.add=function(a,b){var d;return a===r&&b===r?0:(a!==r&&(d=a),b!==r&&(d=d===r?b:d+b),d)},d.attempt=vf,d.camelCase=
Fg,d.capitalize=De,d.ceil=Wg,d.clamp=function(a,b,d){return d===r&&(d=b,b=r),d!==r&&(d=pa(d),d=d===d?d:0),b!==r&&(b=pa(b),b=b===b?b:0),Tb(pa(a),b,d)},d.clone=function(a){return xa(a)},d.cloneDeep=function(a){return xa(a,!0)},d.cloneDeepWith=function(a,b){return xa(a,!0,b)},d.cloneWith=function(a,b){return xa(a,!1,b)},d.deburr=$e,d.endsWith=function(a,b,d){a=Q(a);b="string"==typeof b?b:b+"";var c=a.length;return d=d===r?c:Tb(L(d),0,c),d-=b.length,0<=d&&a.indexOf(b,d)==d},d.eq=Xa,d.escape=function(a){return(a=
Q(a))&&dc.test(a)?a.replace(zb,Lb):a},d.escapeRegExp=function(a){return(a=Q(a))&&Ea.test(a)?a.replace(la,"\\$&"):a},d.every=function(a,b,d){var c=J(a)?e:Rd;return d&&Va(a,b,d)&&(b=r),c(a,F(b,3))},d.find=function(a,b){if(b=F(b,3),J(a)){var d=G(a,b);return-1<d?a[d]:r}return A(a,b,Jb)},d.findIndex=function(a,b){return a&&a.length?G(a,F(b,3)):-1},d.findKey=function(a,b){return A(a,F(b,3),Ia,!0)},d.findLast=function(a,b){if(b=F(b,3),J(a)){var d=G(a,b,!0);return-1<d?a[d]:r}return A(a,b,Ae)},d.findLastIndex=
function(a,b){return a&&a.length?G(a,F(b,3),!0):-1},d.findLastKey=function(a,b){return A(a,F(b,3),qb,!0)},d.floor=Xg,d.forEach=yc,d.forEachRight=Hd,d.forIn=function(a,b){return null==a?a:we(a,Ta(b),Za)},d.forInRight=function(a,b){return null==a?a:Ue(a,Ta(b),Za)},d.forOwn=function(a,b){return a&&Ia(a,Ta(b))},d.forOwnRight=function(a,b){return a&&qb(a,Ta(b))},d.get=Jd,d.gt=b,d.gte=function(a,b){return a>=b},d.has=kf,d.hasIn=We,d.head=Ba,d.identity=jb,d.includes=function(a,b,d,c){return a=v(a)?a:ke(a),
d=d&&!c?L(d):0,c=a.length,0>d&&(d=oa(c+d,0)),zc(a)?c>=d&&-1<a.indexOf(b,d):!!c&&-1<t(a,b,d)},d.indexOf=function(a,b,d){var c=a?a.length:0;return c?(d=L(d),0>d&&(d=oa(c+d,0)),t(a,b,d)):-1},d.inRange=function(a,b,d){return b=pa(b)||0,d===r?(d=b,b=0):d=pa(d)||0,a=pa(a),a>=$a(b,d)&&a<oa(b,d)},d.invoke=Bg,d.isArguments=n,d.isArray=J,d.isArrayBuffer=function(a){return ha(a)&&"[object ArrayBuffer]"==za.call(a)},d.isArrayLike=v,d.isArrayLikeObject=ea,d.isBoolean=function(a){return!0===a||!1===a||ha(a)&&"[object Boolean]"==
za.call(a)},d.isBuffer=Te,d.isDate=function(a){return ha(a)&&"[object Date]"==za.call(a)},d.isElement=function(a){return!!a&&1===a.nodeType&&ha(a)&&!oe(a)},d.isEmpty=function(a){if(v(a)&&(J(a)||zc(a)||Ma(a.splice)||n(a)))return!a.length;for(var b in a)if(da.call(a,b))return!1;return!0},d.isEqual=function(a,b){return rb(a,b)},d.isEqualWith=function(a,b,d){var c=(d="function"==typeof d?d:r)?d(a,b):r;return c===r?rb(a,b,d):!!c},d.isError=ne,d.isFinite=function(a){return"number"==typeof a&&Mf(a)},d.isFunction=
Ma,d.isInteger=Ke,d.isLength=fd,d.isMap=function(a){return ha(a)&&"[object Map]"==La(a)},d.isMatch=function(a,b){return a===b||sb(a,b,Uc(b))},d.isMatchWith=function(a,b,d){return d="function"==typeof d?d:r,sb(a,b,Uc(b),d)},d.isNaN=function(a){return Me(a)&&a!=+a},d.isNative=Le,d.isNil=function(a){return null==a},d.isNull=function(a){return null===a},d.isNumber=Me,d.isObject=X,d.isObjectLike=ha,d.isPlainObject=oe,d.isRegExp=gf,d.isSafeInteger=function(a){return Ke(a)&&-9007199254740991<=a&&9007199254740991>=
a},d.isSet=function(a){return ha(a)&&"[object Set]"==La(a)},d.isString=zc,d.isSymbol=hf,d.isTypedArray=bd,d.isUndefined=function(a){return a===r},d.isWeakMap=function(a){return ha(a)&&"[object WeakMap]"==La(a)},d.isWeakSet=function(a){return ha(a)&&"[object WeakSet]"==za.call(a)},d.join=function(a,b){return a?Nf.call(a,b):""},d.kebabCase=Gg,d.last=na,d.lastIndexOf=function(a,b,d){var c=a?a.length:0;if(!c)return-1;var h=c;if(d!==r&&(h=L(d),h=(0>h?oa(c+h,0):$a(h,c-1))+1),b!==b)return xb(a,h,!0);for(;h--;)if(a[h]===
b)return h;return-1},d.lowerCase=Hg,d.lowerFirst=Ig,d.lt=Ce,d.lte=function(a,b){return b>=a},d.max=function(a){return a&&a.length?z(a,jb,b):r},d.maxBy=function(a,d){return a&&a.length?z(a,F(d),b):r},d.mean=function(a){return mf(a)/(a?a.length:0)},d.min=function(a){return a&&a.length?z(a,jb,Ce):r},d.minBy=function(a,b){return a&&a.length?z(a,F(b),Ce):r},d.noConflict=function(){return Aa._===this&&(Aa._=Kf),this},d.noop=Ge,d.now=Md,d.pad=function(a,b,d){a=Q(a);b=L(b);var c=ga(a);return b&&b>c?(c=(b-
c)/2,b=he(c),c=je(c),Gb("",b,d)+a+Gb("",c,d)):a},d.padEnd=function(a,b,d){return a=Q(a),a+Gb(a,b,d)},d.padStart=function(a,b,d){return a=Q(a),Gb(a,b,d)+a},d.parseInt=function(a,b,d){return d||null==b?b=0:b&&(b=+b),a=Q(a).replace(ec,""),Of(a,b||(aa.test(a)?16:10))},d.random=function(a,b,d){if(d&&"boolean"!=typeof d&&Va(a,b,d)&&(b=d=r),d===r&&("boolean"==typeof b?(d=b,b=r):"boolean"==typeof a&&(d=a,a=r)),a===r&&b===r?(a=0,b=1):(a=pa(a)||0,b===r?(b=a,a=0):b=pa(b)||0),a>b){var c=a;a=b;b=c}return d||a%
1||b%1?(d=Ye(),$a(a+d*(b-a+pe("1e-"+((d+"").length-1))),b)):Pc(a,b)},d.reduce=function(a,b,d){var c=J(a)?u:E,h=3>arguments.length;return c(a,F(b,4),d,h,Jb)},d.reduceRight=function(a,b,d){var c=J(a)?N:E,h=3>arguments.length;return c(a,F(b,4),d,h,Ae)},d.repeat=af,d.replace=function(){var a=arguments,b=Q(a[0]);return 3>a.length?b:b.replace(a[1],a[2])},d.result=function(a,b,d){if(Wa(b,a))c=null==a?r:a[b];else{b=Sa(b);var c=Jd(a,b);a=ac(a,b)}return c===r&&(c=d),Ma(c)?c.call(a):c},d.round=Yg,d.runInContext=
cb,d.sample=function(a){a=v(a)?a:ke(a);var b=a.length;return 0<b?a[Pc(0,b-1)]:r},d.size=function(a){if(null==a)return 0;if(v(a)){var b=a.length;return b&&zc(a)?ga(a):b}return ta(a).length},d.snakeCase=Jg,d.some=function(a,b,d){var c=J(a)?K:Ud;return d&&Va(a,b,d)&&(b=r),c(a,F(b,3))},d.sortedIndex=function(a,b){return pc(a,b)},d.sortedIndexBy=function(a,b,d){return qc(a,b,F(d))},d.sortedIndexOf=function(a,b){var d=a?a.length:0;if(d){var c=pc(a,b);if(d>c&&Xa(a[c],b))return c}return-1},d.sortedLastIndex=
function(a,b){return pc(a,b,!0)},d.sortedLastIndexBy=function(a,b,d){return qc(a,b,F(d),!0)},d.sortedLastIndexOf=function(a,b){if(a&&a.length){var d=pc(a,b,!0)-1;if(Xa(a[d],b))return d}return-1},d.startCase=Kg,d.startsWith=function(a,b,d){return a=Q(a),d=Tb(L(d),0,a.length),a.lastIndexOf(b,d)==d},d.subtract=function(a,b){var d;return a===r&&b===r?0:(a!==r&&(d=a),b!==r&&(d=d===r?b:d-b),d)},d.sum=mf,d.sumBy=function(a,b){return a&&a.length?qa(a,F(b)):0},d.template=function(a,b,c){var h=d.templateSettings;
c&&Va(a,b,c)&&(b=r);a=Q(a);b=Nd({},b,h,jc);c=Nd({},b.imports,h.imports,jc);var e,l,g=ta(c),k=fa(c,g),n=0;c=b.interpolate||nb;var m="__p+='";c=He((b.escape||nb).source+"|"+c.source+"|"+(c===Jc?Z:nb).source+"|"+(b.evaluate||nb).source+"|$","g");var p="sourceURL"in b?"//# sourceURL="+b.sourceURL+"\n":"";if(a.replace(c,function(b,d,c,h,g,k){return c||(c=h),m+=a.slice(n,k).replace(va,Dc),d&&(e=!0,m+="'+__e("+d+")+'"),g&&(l=!0,m+="';"+g+";\n__p+='"),c&&(m+="'+((__t=("+c+"))==null?'':__t)+'"),n=k+b.length,
b}),m+="';",(b=b.variable)||(m="with(obj){"+m+"}"),m=(l?m.replace(Fc,""):m).replace(yb,"$1").replace(Gc,"$1;"),m="function("+(b||"obj")+"){"+(b?"":"obj||(obj={});")+"var __t,__p=''"+(e?",__e=_.escape":"")+(l?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+m+"return __p}",b=vf(function(){return Function(g,p+"return "+m).apply(r,k)}),b.source=m,ne(b))throw b;return b},d.times=function(a,b){if(a=L(a),1>a||9007199254740991<a)return[];var d=4294967295,c=$a(a,4294967295);
b=Ta(b);a-=4294967295;for(c=T(c,b);++d<a;)b(d);return c},d.toInteger=L,d.toLength=jf,d.toLower=function(a){return Q(a).toLowerCase()},d.toNumber=pa,d.toSafeInteger=function(a){return Tb(L(a),-9007199254740991,9007199254740991)},d.toString=Q,d.toUpper=function(a){return Q(a).toUpperCase()},d.trim=function(a,b,d){return(a=Q(a))?d||b===r?a.replace(ec,""):(b+="")?(a=a.match(P),b=b.match(P),a.slice(W(a,b),h(a,b)+1).join("")):a:a},d.trimEnd=function(a,b,d){return(a=Q(a))?d||b===r?a.replace(hd,""):(b+="")?
(a=a.match(P),a.slice(0,h(a,b.match(P))+1).join("")):a:a},d.trimStart=function(a,b,d){return(a=Q(a))?d||b===r?a.replace(ja,""):(b+="")?(a=a.match(P),a.slice(W(a,b.match(P))).join("")):a:a},d.truncate=function(a,b){var d=30,c="...";if(X(b))var h="separator"in b?b.separator:h,d="length"in b?L(b.length):d,c="omission"in b?Q(b.omission):c;a=Q(a);var e=a.length;if(ia.test(a))var l=a.match(P),e=l.length;if(d>=e)return a;if(e=d-ga(c),1>e)return c;if(d=l?l.slice(0,e).join(""):a.slice(0,e),h===r)return d+
c;if(l&&(e+=d.length-e),gf(h)){if(a.slice(e).search(h)){var g=d;h.global||(h=He(h.source,Q(mb.exec(h))+"g"));for(h.lastIndex=0;l=h.exec(g);)var k=l.index;d=d.slice(0,k===r?e:k)}}else a.indexOf(h,e)!=e&&(h=d.lastIndexOf(h),-1<h&&(d=d.slice(0,h)));return d+c},d.unescape=function(a){return(a=Q(a))&&Ab.test(a)?a.replace(Pb,kb):a},d.uniqueId=function(a){var b=++Jf;return Q(a)+b},d.upperCase=Lg,d.upperFirst=lf,d.each=yc,d.eachRight=Hd,d.first=Ba,Fe(d,function(){var a={};return Ia(d,function(b,c){da.call(d.prototype,
c)||(a[c]=b)}),a}(),{chain:!1}),d.VERSION="4.5.1",a("bind bindKey curry curryRight partial partialRight".split(" "),function(a){d[a].placeholder=d}),a(["drop","take"],function(a,b){C.prototype[a]=function(d){var c=this.__filtered__;if(c&&!b)return new C(this);d=d===r?1:oa(L(d),0);var h=this.clone();return c?h.__takeCount__=$a(d,h.__takeCount__):h.__views__.push({size:$a(d,4294967295),type:a+(0>h.__dir__?"Right":"")}),h};C.prototype[a+"Right"]=function(b){return this.reverse()[a](b).reverse()}}),a(["filter",
"map","takeWhile"],function(a,b){var d=b+1,c=1==d||3==d;C.prototype[a]=function(a){var b=this.clone();return b.__iteratees__.push({iteratee:F(a,3),type:d}),b.__filtered__=b.__filtered__||c,b}}),a(["head","last"],function(a,b){var d="take"+(b?"Right":"");C.prototype[a]=function(){return this[d](1).value()[0]}}),a(["initial","tail"],function(a,b){var d="drop"+(b?"":"Right");C.prototype[a]=function(){return this.__filtered__?new C(this):this[d](1)}}),C.prototype.compact=function(){return this.filter(jb)},
C.prototype.find=function(a){return this.filter(a).head()},C.prototype.findLast=function(a){return this.reverse().find(a)},C.prototype.invokeMap=D(function(a,b){return"function"==typeof a?new C(this):this.map(function(d){return Db(d,a,b)})}),C.prototype.reject=function(a){return a=F(a,3),this.filter(function(b){return!a(b)})},C.prototype.slice=function(a,b){a=L(a);var d=this;return d.__filtered__&&(0<a||0>b)?new C(d):(0>a?d=d.takeRight(-a):a&&(d=d.drop(a)),b!==r&&(b=L(b),d=0>b?d.dropRight(-b):d.take(b-
a)),d)},C.prototype.takeRightWhile=function(a){return this.reverse().takeWhile(a).reverse()},C.prototype.toArray=function(){return this.take(4294967295)},Ia(C.prototype,function(a,b){var c=/^(?:filter|find|map|reject)|While$/.test(b),h=/^(?:head|last)$/.test(b),e=d[h?"take"+("last"==b?"Right":""):b],l=h||/^find/.test(b);e&&(d.prototype[b]=function(){var b=this.__wrapped__,g=h?[1]:arguments,k=b instanceof C,n=g[0],m=k||J(b),p=function(a){return a=e.apply(d,x([a],g)),h&&q?a[0]:a};m&&c&&"function"==
typeof n&&1!=n.length&&(k=m=!1);var q=this.__chain__,B=!!this.__actions__.length,n=l&&!q,k=k&&!B;return!l&&m?(b=k?b:new C(this),b=a.apply(b,g),b.__actions__.push({func:xc,args:[p],thisArg:r}),new U(b,q)):n&&k?a.apply(this,g):(b=this.thru(p),n?h?b.value()[0]:b.value():b)})}),a("pop push shift sort splice unshift".split(" "),function(a){var b=le[a],c=/^(?:push|sort|unshift)$/.test(a)?"tap":"thru",h=/^(?:pop|shift)$/.test(a);d.prototype[a]=function(){var a=arguments;return h&&!this.__chain__?b.apply(this.value(),
a):this[c](function(d){return b.apply(d,a)})}}),Ia(C.prototype,function(a,b){var c=d[b];if(c){var h=c.name+"";(Kd[h]||(Kd[h]=[])).push({name:b,func:c})}}),Kd[Ua(r,2).name]=[{name:"wrapper",func:r}],C.prototype.clone=function(){var a=new C(this.__wrapped__);return a.__actions__=ka(this.__actions__),a.__dir__=this.__dir__,a.__filtered__=this.__filtered__,a.__iteratees__=ka(this.__iteratees__),a.__takeCount__=this.__takeCount__,a.__views__=ka(this.__views__),a},C.prototype.reverse=function(){if(this.__filtered__){var a=
new C(this);a.__dir__=-1;a.__filtered__=!0}else a=this.clone(),a.__dir__*=-1;return a},C.prototype.value=function(){var a,b=this.__wrapped__.value(),d=this.__dir__,c=J(b),h=0>d,e=c?b.length:0;a=0;for(var l=e,g=this.__views__,k=-1,n=g.length;++k<n;){var m=g[k],p=m.size;switch(m.type){case "drop":a+=p;break;case "dropRight":l-=p;break;case "take":l=$a(l,a+p);break;case "takeRight":a=oa(a,l-p)}}if(a={start:a,end:l},l=a.start,g=a.end,a=g-l,h=h?g:l-1,l=this.__iteratees__,g=l.length,k=0,n=$a(a,this.__takeCount__),
!c||200>e||e==a&&n==a)return ud(b,this.__actions__);c=[];a:for(;a--&&n>k;){h+=d;e=-1;for(m=b[h];++e<g;){var q=l[e],p=q.type,q=(0,q.iteratee)(m);if(2==p)m=q;else if(!q){if(1==p)continue a;break a}}c[k++]=m}return c},d.prototype.at=jg,d.prototype.chain=function(){return Od(this)},d.prototype.commit=function(){return new U(this.value(),this.__chain__)},d.prototype.flatMap=function(a){return this.map(a).flatten()},d.prototype.next=function(){this.__values__===r&&(this.__values__=Be(this.value()));var a=
this.__index__>=this.__values__.length,b=a?r:this.__values__[this.__index__++];return{done:a,value:b}},d.prototype.plant=function(a){for(var b,d=this;d instanceof R;){var c=Ed(d);c.__index__=0;c.__values__=r;b?h.__wrapped__=c:b=c;var h=c,d=d.__wrapped__}return h.__wrapped__=a,b},d.prototype.reverse=function(){var a=this.__wrapped__;return a instanceof C?(this.__actions__.length&&(a=new C(this)),a=a.reverse(),a.__actions__.push({func:xc,args:[Xc],thisArg:r}),new U(a,this.__chain__)):this.thru(Xc)},
d.prototype.toJSON=d.prototype.valueOf=d.prototype.value=function(){return ud(this.__wrapped__,this.__actions__)},Ac&&(d.prototype[Ac]=ce),d}var r,lb=1/0,Ec=NaN,Fc=/\b__p\+='';/g,yb=/\b(__p\+=)''\+/g,Gc=/(__e\(.*?\)|\b__t\))\+'';/g,Pb=/&(?:amp|lt|gt|quot|#39|#96);/g,zb=/[&<>"'`]/g,Ab=RegExp(Pb.source),dc=RegExp(zb.source),Hc=/<%-([\s\S]+?)%>/g,Ic=/<%([\s\S]+?)%>/g,Jc=/<%=([\s\S]+?)%>/g,gd=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Na=/^\w*$/,Kc=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,
la=/[\\^$.*+?()[\]{}|]/g,Ea=RegExp(la.source),ec=/^\s+|\s+$/g,ja=/^\s+/,hd=/\s+$/,fc=/\\(\\)?/g,Z=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,mb=/\w*$/,aa=/^0x/i,id=/^[-+]0x[0-9a-f]+$/i,Fa=/^0b[01]+$/i,Oa=/^\[object .+?Constructor\]$/,gc=/^0o[0-7]+$/i,ua=/^(?:0|[1-9]\d*)$/,ba=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,nb=/($^)/,va=/['\n\r\u2028\u2029\\]/g,ob=/[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]/g,P=/\ud83c[\udffb-\udfff](?=\ud83c[\udffb-\udfff])|(?:[^\ud800-\udfff][\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]?|[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff]|[\ud800-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
ia=/[\u200d\ud800-\udfff\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0\ufe0e\ufe0f]/,Pa=/[a-zA-Z0-9]+/g,wa=/[A-Z\xc0-\xd6\xd8-\xde]?[a-z\xdf-\xf6\xf8-\xff]+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde]|$)|(?:[A-Z\xc0-\xd6\xd8-\xde]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+(?=[\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000]|[A-Z\xc0-\xd6\xd8-\xde](?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])|$)|[A-Z\xc0-\xd6\xd8-\xde]?(?:[a-z\xdf-\xf6\xf8-\xff]|[^\ud800-\udfff\xac\xb1\xd7\xf7\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\xbf\u2018\u2019\u201c\u201d \t\x0b\f\xa0\ufeff\n\r\u2028\u2029\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\d+\u2700-\u27bfa-z\xdf-\xf6\xf8-\xffA-Z\xc0-\xd6\xd8-\xde])+|[A-Z\xc0-\xd6\xd8-\xde]+|\d+|(?:[\u2700-\u27bf]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?(?:\u200d(?:[^\ud800-\udfff]|(?:\ud83c[\udde6-\uddff]){2}|[\ud800-\udbff][\udc00-\udfff])[\ufe0e\ufe0f]?(?:[\u0300-\u036f\ufe20-\ufe23\u20d0-\u20f0]|\ud83c[\udffb-\udfff])?)*/g,
Ga=/[a-z][A-Z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Qb="Array Buffer Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Reflect RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),I={};I["[object Float32Array]"]=I["[object Float64Array]"]=I["[object Int8Array]"]=I["[object Int16Array]"]=I["[object Int32Array]"]=I["[object Uint8Array]"]=I["[object Uint8ClampedArray]"]=
I["[object Uint16Array]"]=I["[object Uint32Array]"]=!0;I["[object Arguments]"]=I["[object Array]"]=I["[object ArrayBuffer]"]=I["[object Boolean]"]=I["[object Date]"]=I["[object Error]"]=I["[object Function]"]=I["[object Map]"]=I["[object Number]"]=I["[object Object]"]=I["[object RegExp]"]=I["[object Set]"]=I["[object String]"]=I["[object WeakMap]"]=!1;var M={};M["[object Arguments]"]=M["[object Array]"]=M["[object ArrayBuffer]"]=M["[object Boolean]"]=M["[object Date]"]=M["[object Float32Array]"]=
M["[object Float64Array]"]=M["[object Int8Array]"]=M["[object Int16Array]"]=M["[object Int32Array]"]=M["[object Map]"]=M["[object Number]"]=M["[object Object]"]=M["[object RegExp]"]=M["[object Set]"]=M["[object String]"]=M["[object Symbol]"]=M["[object Uint8Array]"]=M["[object Uint8ClampedArray]"]=M["[object Uint16Array]"]=M["[object Uint32Array]"]=!0;M["[object Error]"]=M["[object Function]"]=M["[object WeakMap]"]=!1;var db={"\u00c0":"A","\u00c1":"A","\u00c2":"A","\u00c3":"A","\u00c4":"A","\u00c5":"A",
"\u00e0":"a","\u00e1":"a","\u00e2":"a","\u00e3":"a","\u00e4":"a","\u00e5":"a","\u00c7":"C","\u00e7":"c","\u00d0":"D","\u00f0":"d","\u00c8":"E","\u00c9":"E","\u00ca":"E","\u00cb":"E","\u00e8":"e","\u00e9":"e","\u00ea":"e","\u00eb":"e","\u00cc":"I","\u00cd":"I","\u00ce":"I","\u00cf":"I","\u00ec":"i","\u00ed":"i","\u00ee":"i","\u00ef":"i","\u00d1":"N","\u00f1":"n","\u00d2":"O","\u00d3":"O","\u00d4":"O","\u00d5":"O","\u00d6":"O","\u00d8":"O","\u00f2":"o","\u00f3":"o","\u00f4":"o","\u00f5":"o","\u00f6":"o",
"\u00f8":"o","\u00d9":"U","\u00da":"U","\u00db":"U","\u00dc":"U","\u00f9":"u","\u00fa":"u","\u00fb":"u","\u00fc":"u","\u00dd":"Y","\u00fd":"y","\u00ff":"y","\u00c6":"Ae","\u00e6":"ae","\u00de":"Th","\u00fe":"th","\u00df":"ss"},B={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},U={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},C={"function":!0,object:!0},hc={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},pe=parseFloat,Rb=parseInt,
eb=C[typeof exports]&&exports&&!exports.nodeType?exports:r,ca=C[typeof module]&&module&&!module.nodeType?module:r,Pd=ca&&ca.exports===eb?eb:r,jd=R(eb&&ca&&"object"==typeof global&&global),Ha=R(C[typeof self]&&self),sa=R(C[typeof window]&&window),C=R(C[typeof this]&&this),Aa=jd||sa!==(C&&C.window)&&sa||Ha||C||Function("return this")(),Qa=cb();(sa||Ha||{})._=Qa;"function"==typeof define&&"object"==typeof define.amd&&define.amd?define("third_party/lo-dash/lo-dash.min",[],function(){return Qa}):eb&&ca?
(Pd&&((ca.exports=Qa)._=Qa),eb._=Qa):Aa._=Qa}).call(this);
define("qowtRoot/utils/typeUtils",[],function(){function c(c,a,e){if(e.types.every(function(a){var c=m[a];if(!c)throw Error("Bad config to checkArgTypes: unknown type: "+a);return!c(e.value)})){var g=1===e.types.length?e.types[0]:"["+e.types.join(",")+"]";throw Error("Argument "+a+" passed to function "+c+" was supposed to be of type "+g+" but had value "+e.value);}}var p={checkArgTypes:function(k,a){for(var e in a){var g={value:a[e][0],types:a[e].slice(1)};c(k,e,g)}},isObject:function(c){return"object"===
typeof c&&null!==c},isPromise:function(c){return c instanceof Promise},isPromiseLike:function(c){return!(!c||!p.isFunction(c.then))},isList:function(c){return"[object Array]"===Object.prototype.toString.call(c)},isNumber:function(c){return"number"===typeof c&&!isNaN(c)},isInteger:function(c){return"number"===typeof c&&parseInt(c,10)===c},isFunction:function(c){return"function"===typeof c},isString:function(c){return"[object String]"===Object.prototype.toString.call(c)},isRegex:function(c){return"[object RegExp]"===
Object.prototype.toString.call(c)},isNode:function(c){return c instanceof Node},isNull:function(c){return null===c},isUndefined:function(c){return void 0===c},isBoolean:function(c){return"boolean"===typeof c},getType:function(c){var a;Object.keys(m).forEach(function(e){m[e](c)&&(a=e)});return a},isArgumentsObjectOrList:function(c){return c instanceof Object&&c.hasOwnProperty("length")},extend:function(c,a){for(var e in a)a.hasOwnProperty(e)&&(c[e]=a[e])},createNewType:function(c){var a=function(){},
e={isOfType:function(c){return void 0!==c&&null!==c&&c.constructor===a},markAsType:function(c){Object.defineProperty(c,"constructor",{value:a,configurable:!1,writable:!1,enumerable:!1});return c}};if(c){if(m[c])throw Error("Already registered type "+c);m[c]=e.isOfType}return e}},m={string:p.isString,object:p.isObject,promise:p.isPromise,promiseLike:p.isPromiseLike,node:p.isNode,regex:p.isRegex,"function":p.isFunction,number:p.isNumber,list:p.isList,boolean:p.isBoolean,"null":p.isNull,undefined:p.isUndefined};
return p});
define("qowtRoot/configs/common",[],function(){var c={SUPPORTED_IMAGE_FORMATS:{jpg:!0,jpeg:!0,gif:!0,png:!0,pic:!1,pict:!1,bmp:!0,tif:!0,tiff:!0},ZOOM:{current:void 0,next:void 0,levels:void 0},LAYOUT_DEFAULT_MAXZOOM:void 0,LAYOUT_DEFAULT_MINZOOM:void 0,LAYOUT_DEFAULT_ZOOM_LEVEL:void 0,DOC_VERIFY_DEBOUNCE:50,DEFAULT_COLORS:"#6B9CD4 #DE7872 #B7D37C #A48CC2 #6CC7E1 #F3AB63 #AEC8EE".split(" "),TEXT_STYLE:{defaultHighlightColor:"rgb(255, 255, 255)",defaultTxtColor:"rgb(0, 0, 0)",shadowText:{setValue:"#000000 0.07em 0.07em 0.07em",getValue:"rgb(0, 0, 0) 0.07em 0.07em 0.07em"},
outlineText:{webkitTextFillColor:"transparent",webkitTextStroke:".05em #000000",webkitTextStrokeWidth:"0.05em",webkitTextStrokeColor:"rgb(0, 0, 0)"},embossedText:{setColor:"#ffffff",getColor:"rgb(255, 255, 255)",setShadow:"#000000 1px 1px 2px",getShadow:"rgb(0, 0, 0) 1px 1px 2px"},engravedText:{setColor:"#999999",getColor:"rgb(153, 153, 153)",setShadow:"#000000 -1px -1px 2px",getShadow:"rgb(0, 0, 0) -1px -1px 2px"}},DEFAULT_BLIP_FILL_PROPERTIES:{tileProps:{Sx:100,Sy:100,Tx:0,Ty:0,align:"TL"},type:"tileFill"},
kMESSAGE_BUS_CONNECTION_RETRY:10,kMESSAGE_BUS_CONNECTION_TIMEOUT:3E4,kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG:"MessageBus: Connection timeout",create:function(){return{SUPPORTED_IMAGE_FORMATS:c.SUPPORTED_IMAGE_FORMATS,DIALOGUE_CONFIG:c.DIALOGUE_CONFIG,DEFAULT_COLORS:c.DEFAULT_COLORS,ZOOM:c.ZOOM,LAYOUT_DEFAULT_MAXZOOM:c.LAYOUT_DEFAULT_MAXZOOM,LAYOUT_DEFAULT_MINZOOM:c.LAYOUT_DEFAULT_MINZOOM,LAYOUT_DEFAULT_ZOOM_LEVEL:c.LAYOUT_DEFAULT_ZOOM_LEVEL}}};return c});
(function(c){c("qowtRoot/third_party/when/lib/timer",["require"],function(c){return{set:setTimeout,clear:clearTimeout}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/timed",[],function(){return function(c,m,k){k.prototype.delay=function(a){var e=this;return new this.constructor(function(g,k,l){e.then(function(e){c(function(){g(e)},a)},k,l)})};k.prototype.timeout=function(a,e){var g=this,k=1<arguments.length;return new this.constructor(function(l,q,x){var u=c(function(){q(k?e:Error("timed out after "+a+"ms"))},a);g.then(function(a){m(u);l(a)},function(a){m(u);q(a)},x)})};return k}})})("function"===typeof define&&define.amd?
define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/array",[],function(){return function(c){var m=Array.prototype.map,k=Array.prototype.reduce,a=Array.prototype.reduceRight,e=Array.prototype.forEach,g=c.resolve,w=c.all;c.any=function(a){return new c(function(c,k){function m(a){w.push(a);0===--p&&k(w)}var p=0,w=[];e.call(a,function(a){++p;g(a).then(c,m)});0===p&&c()})};c.some=function(a,k){return new c(function(c,m,p){function w(a){0<A&&(--A,t.push(a),0===A&&c(t))}function z(a){0<G&&(--G,E.push(a),0===G&&
m(E))}var A=0,G,t=[],E=[];e.call(a,function(a){++A;g(a).then(w,z,p)});k=Math.max(k,0);G=A-k+1;A=Math.min(k,A);0===A&&c(t)})};c.settle=function(a){return w(m.call(a,function(a){function c(){return a.inspect()}a=g(a);return a.then(c,c)}))};c.map=function(a,c,e){return w(m.call(a,function(a){return g(a).then(c,e)}))};c.reduce=function(a,c){function e(a,l,k){return g(a).then(function(a){return g(l).then(function(e){return c(a,e,k)})})}return 2<arguments.length?k.call(a,e,arguments[2]):k.call(a,e)};c.reduceRight=
function(c,e){function k(a,c,l){return g(a).then(function(a){return g(c).then(function(c){return e(a,c,l)})})}return 2<arguments.length?a.call(c,k,arguments[2]):a.call(c,k)};c.prototype.spread=function(a){return this.then(w).then(function(c){return a.apply(void 0,c)})};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/fatal",["require","./timer"],function(c){var m=c("./timer").set;return function(c){m(function(){throw c;},0)}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/flow",["require","./fatal"],function(c){function m(){throw new TypeError("catch predicate must be a function");}function k(a,c){return function(){a.call(this);return c}}function a(){}var e=c("./fatal");return function(c){function p(a,c){return function(e){return(c===Error||null!=c&&c.prototype instanceof Error?e instanceof c:c(e))?a.call(this,e):q(e)}}var l=c.resolve,q=c.reject,x=c.prototype["catch"];c.prototype.done=function(c,e){var l=this._handler;
l.when(this._maybeFatal,a,this,l.receiver,c,e)};c.prototype._maybeFatal=function(a){if(Object(a)===a)l(a)["catch"](this._fatal)};c.prototype._fatal=e;c.prototype["catch"]=c.prototype.otherwise=function(a){return 1===arguments.length?x.call(this,a):"function"!==typeof a?this.ensure(m):x.call(this,p(arguments[1],a))};c.prototype["finally"]=c.prototype.ensure=function(a){if("function"!==typeof a)return this;a=k(a,this);return this.then(a,a)};c.prototype["else"]=c.prototype.orElse=function(a){return this.then(void 0,
function(){return a})};c.prototype.yield=function(a){return this.then(function(){return a})};c.prototype.tap=function(a){return this.then(a).yield(this)};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});(function(c){c("qowtRoot/third_party/when/lib/inspect",[],function(){return function(c){c.prototype.inspect=function(){return this._handler.inspect()};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/iterate",[],function(){return function(c){function m(c,g,k,l){function p(l){return a(k(l)).then(function(){return m(c,g,k,c(l))})}return a(l).then(function(c){return a(g(c)).then(function(a){return a?c:p(c)})})}function k(c,g,m,l){function p(l,q){return a(m(l)).then(function(){return k(c,g,m,q)})}return a(l).then(function(l){return a(g(l)).then(function(g){return g?l:a(c(l)).spread(p)})})}var a=c.resolve;c.iterate=m;c.unfold=k;return c}})})("function"===
typeof define&&define.amd?define:function(c){module.exports=c()});(function(c){c("qowtRoot/third_party/when/lib/progress",[],function(){return function(c){c.prototype.progress=function(c){return this.then(void 0,void 0,c)};return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/with",[],function(){return function(c){c.prototype["with"]=c.prototype.withThis=c.prototype._bindContext;return c}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/makePromise",[],function(){return function(c){function m(a){var c=this;this._handler=new u;k(a,function(a){c._handler.resolve(a)},function(a){c._handler.reject(a)},function(a){c._handler.notify(a)})}function k(a,c,e,l){try{a(c,e,l)}catch(g){e(g)}}function a(a){return new e(new N(new G(a)))}function e(a){this._handler=a}function g(a,c){if(a instanceof m){var e=a._handler.join();return c===e?new G(new TypeError("Promise cycle")):e}return qa(a)?l(a):new A(a)}
function w(a){return a instanceof m?a._handler.join():l(a)}function l(a){try{var c=a.then;return"function"===typeof c?new z(c,a):new A(a)}catch(e){return new G(e)}}function q(){}function x(a){this.handler=a;if(this._isMonitored()){var c=this._env.promiseMonitor.captureStack();this.trace=a._addTrace(c)}}function u(a){this.consumers=[];this.receiver=a;this.handler=void 0;this.resolved=!1;this._isMonitored()&&(this.trace=this._env.promiseMonitor.captureStack())}function N(a){x.call(this,a)}function K(a,
c){x.call(this,a);this.receiver=c}function z(a,c){u.call(this);this.assimilated=!1;this.untrustedThen=a;this.thenable=c}function A(a){this.value=a}function G(a){this.value=a;this.observed=!1;this._isMonitored()&&(this.key=this._env.promiseMonitor.startTrace(a))}function t(){return{state:"pending"}}function E(a,c,e,l,g,k,m,p){this.a=a;this.b=c;this.c=e;this.d=l;this.e=g;this.f=k;this.g=m;this.handler=p}function O(a,c){this.q=a;this.value=c}function qa(a){return("object"===typeof a||"function"===typeof a)&&
null!==a}function T(c,e,l){try{return c.call(l,e)}catch(g){return a(g)}}function H(){}var ra,fa=c.scheduler,W=Object.create||function(a){function c(){}c.prototype=a;return new c};m.resolve=function(a){return a instanceof m?a:new e(new N(g(a)))};m.reject=a;m.never=function(){return ra};m._defer=function(){return new e(new u)};m.prototype.then=function(a,c,l){var g=this._handler,k=new u(g.receiver);g.when(k.resolve,k.notify,k,g.receiver,a,c,l);return new e(k)};m.prototype["catch"]=m.prototype.otherwise=
function(a){return this.then(void 0,a)};m.prototype._bindContext=function(a){return new e(new K(this._handler,a))};m.all=function(a){function c(a,h,e,l){e.when(H,H,void 0,a,function(a){h[l]=a;0===--k&&this.resolve(h)},a.reject,a.notify)}var l=new u,g=a.length>>>0,k=g,m=[],p,q;for(p=0;p<g;++p)p in a?(q=a[p],qa(q)?c(l,m,w(q),p):(m[p]=q,--k)):--k;0===k&&l.resolve(m);return new e(l)};m.race=function(a){if(Object(a)===a&&0===a.length)return ra;for(var c=new u,l=0;l<a.length;++l)g(a[l]).when(H,H,void 0,
c,c.resolve,c.reject);return new e(c)};e.prototype=W(m.prototype);q.prototype.inspect=t;q.prototype.when=H;q.prototype.resolve=H;q.prototype.reject=H;q.prototype.notify=H;q.prototype.join=function(){return this};q.prototype._env=c.monitor||m;q.prototype._addTrace=H;q.prototype._isMonitored=function(){return"undefined"!==typeof this._env.promiseMonitor};x.prototype=W(q.prototype);x.prototype.join=function(){return this.handler.join()};x.prototype.inspect=function(){return this.handler.inspect()};x.prototype._addTrace=
function(a){return this.handler._addTrace(a)};u.prototype=W(q.prototype);u.prototype.inspect=function(){return this.resolved?this.handler.join().inspect():t()};u.prototype.resolve=function(a){this._join(g(a,this))};u.prototype.reject=function(a){this._join(new G(a))};u.prototype.join=function(){return this.resolved?this.handler.join():this};u.prototype.run=function(){var a=this.consumers,c=this.handler=this.handler.join();this.consumers=void 0;for(var e=0;e<a.length;e+=7)c.when(a[e],a[e+1],a[e+2],
a[e+3],a[e+4],a[e+5],a[e+6])};u.prototype._join=function(a){this.resolved||(this.resolved=!0,this.handler=a,fa.enqueue(this),this._isMonitored()&&(this.trace=a._addTrace(this.trace)))};u.prototype.when=function(a,c,e,l,g,k,m){this.resolved?fa.enqueue(new E(a,c,e,l,g,k,m,this.handler.join())):this.consumers.push(a,c,e,l,g,k,m)};u.prototype.notify=function(a){this.resolved||fa.enqueue(new O(this.consumers,a))};u.prototype._addTrace=function(a){return this.resolved?this.handler._addTrace(a):a};N.prototype=
W(x.prototype);N.prototype.when=function(a,c,e,l,g,k,m){fa.enqueue(new E(a,c,e,l,g,k,m,this.join()))};K.prototype=W(x.prototype);K.prototype.when=function(a,c,e,l,g,k,m){void 0!==this.receiver&&(l=this.receiver);this.join().when(a,c,e,l,g,k,m)};z.prototype=W(u.prototype);z.prototype.when=function(a,c,e,l,g,k,m){this.assimilated||(this.assimilated=!0,this._assimilate());u.prototype.when.call(this,a,c,e,l,g,k,m)};z.prototype._assimilate=function(){var a=this;this._try(this.untrustedThen,this.thenable,
function(c){a.resolve(c)},function(c){a.reject(c)},function(c){a.notify(c)})};z.prototype._try=function(a,c,e,l,g){try{a.call(c,e,l,g)}catch(k){l(k)}};A.prototype=W(q.prototype);A.prototype.inspect=function(){return{state:"fulfilled",value:this.value}};A.prototype.when=function(a,c,e,l,g){c="function"===typeof g?T(g,this.value,l):this.value;a.call(e,c)};G.prototype=W(q.prototype);G.prototype.inspect=function(){return{state:"rejected",reason:this.value}};G.prototype.when=function(c,e,l,g,k,m){this._isMonitored()&&
!this.observed&&this._env.promiseMonitor.removeTrace(this.key);this.observed=!0;e="function"===typeof m?T(m,this.value,g):a(this.value);c.call(l,e)};G.prototype._addTrace=function(a){this.observed||this._env.promiseMonitor.updateTrace(this.key,a)};ra=new e(new q);E.prototype.run=function(){this.handler.when(this.a,this.b,this.c,this.d,this.e,this.f,this.g)};O.prototype.run=function(){for(var a=this.q,c=1;c<a.length;c+=7)this._notify(a[c],a[c+1],a[c+2],a[c+5])};O.prototype._notify=function(a,c,e,l){var g;
if("function"===typeof l)try{g=l.call(e,this.value)}catch(k){g=k}else g=this.value;a.call(c,g)};return m}})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/Queue",[],function(){function c(m){this.head=this.tail=this.length=0;this.buffer=Array(1<<m)}c.prototype.push=function(c){this.length===this.buffer.length&&this._ensureCapacity(2*this.length);this.buffer[this.tail]=c;this.tail=this.tail+1&this.buffer.length-1;++this.length;return this.length};c.prototype.shift=function(){var c=this.buffer[this.head];this.buffer[this.head]=void 0;this.head=this.head+1&this.buffer.length-1;--this.length;return c};c.prototype._ensureCapacity=
function(c){var k=this.head,a=this.buffer,e=Array(c),g=0,p;if(0===k)for(p=this.length;g<p;++g)e[g]=a[g];else{c=a.length;for(p=this.tail;k<c;++g,++k)e[g]=a[k];for(k=0;k<p;++g,++k)e[g]=a[k]}this.buffer=e;this.head=0;this.tail=this.length};return c})})("function"===typeof define&&define.amd?define:function(c){module.exports=c()});
(function(c){c("qowtRoot/third_party/when/lib/scheduler",["require","./Queue"],function(c){function m(a){this._enqueue=a;this._handlerQueue=new k(15);var c=this;this.drainQueue=function(){c._drainQueue()}}var k=c("./Queue");m.prototype.enqueue=function(a){1===this._handlerQueue.push(a)&&this._enqueue(this.drainQueue)};m.prototype._drainQueue=function(){for(var a=this._handlerQueue;0<a.length;)a.shift().run()};return m})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/lib/async",["require"],function(c){var m;return"undefined"!==typeof process&&null!==process&&"function"===typeof process.nextTick?function(c){process.nextTick(c)}:(m="function"===typeof MutationObserver&&MutationObserver||"function"===typeof WebKitMutationObserver&&WebKitMutationObserver)?function(c,a){var e,g=c.createElement("div");(new a(function(){var a=e;e=void 0;a()})).observe(g,{attributes:!0});return function(a){e=a;g.setAttribute("class","x")}}(document,
m):function(c){var a=setTimeout;return function(c){a(c,0)}}(c)})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});(function(c){c("qowtRoot/third_party/when/lib/Promise",["require","./makePromise","./scheduler","./async"],function(c){var m=c("./makePromise"),k=c("./scheduler");c=c("./async");return m({scheduler:new k(c),monitor:"undefined"!==typeof console?console:void 0})})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
(function(c){c("qowtRoot/third_party/when/when","require ./lib/timer ./lib/timed ./lib/array ./lib/flow ./lib/inspect ./lib/iterate ./lib/progress ./lib/with ./lib/Promise".split(" "),function(c){function m(a,c,e,l){var g=G(a);return 2>arguments.length?g:g.then(c,e,l)}function k(a){return function(){return e(a,this,t.call(arguments))}}function a(a){return e(a,this,t.call(arguments,1))}function e(a,c,e){return A.all(e).then(function(e){return a.apply(c,e)})}function g(){function a(c){l._handler.resolve(c)}
function c(a){l._handler.reject(a)}function e(a){l._handler.notify(a)}var l=A._defer();this.promise=l;this.resolve=a;this.reject=c;this.notify=e;this.resolver={resolve:a,reject:c,notify:e}}var w=c("./lib/timer"),l=c("./lib/timed"),q=c("./lib/array"),x=c("./lib/flow"),u=c("./lib/inspect"),N=c("./lib/iterate"),K=c("./lib/progress"),z=c("./lib/with"),A=c("./lib/Promise"),A=[q,x,N,K,u,z].reduceRight(function(a,c){return c(a)},l(w.set,w.clear,A)),G=A.resolve,t=Array.prototype.slice;m.promise=function(a){return new A(a)};
m.resolve=A.resolve;m.reject=A.reject;m.lift=k;m["try"]=a;m.attempt=a;m.iterate=A.iterate;m.unfold=A.unfold;m.join=function(){return A.all(arguments)};m.all=function(a){return m(a,A.all)};m.settle=function(a){return m(a,A.settle)};m.any=k(A.any);m.some=k(A.some);m.map=function(a,c){return m(a,function(a){return A.map(a,c)})};m.reduce=function(a,c){var e=t.call(arguments,1);return m(a,function(a){e.unshift(a);return A.reduce.apply(A,e)})};m.reduceRight=function(a,c){var e=t.call(arguments,1);return m(a,
function(a){e.unshift(a);return A.reduceRight.apply(A,e)})};m.isPromiseLike=function(a){return a&&"function"===typeof a.then};m.Promise=A;m.defer=function(){return new g};return m})})("function"===typeof define&&define.amd?define:function(c){module.exports=c(require)});
define("qowtRoot/messageBus/messageBusImpl",["qowtRoot/utils/typeUtils","qowtRoot/configs/common","qowtRoot/third_party/when/when"],function(c,p,m){var k=function(a){this.myWin_=a||window;this.pendingConnections_=[];this.acceptedConnections_=[];this.completedConnections_=[];this.acknowledgements_=[];this.listeners_=[];this.msgQueue_=[];this.pendingMsgs_=[];this.myWin_.addEventListener("message",this.handleIncomingMessage_.bind(this),!1)};k.prototype=Object.create(Object.prototype);k.prototype.constructor=
k;k.prototype.connect=function(a,e){if(!a||null===a||!c.isObject(a)||!a.postMessage)throw Error("MessageBus: A valid HTML window object has not been provided to connect()");if(a===this.myWin_)throw Error("MessageBus: Trying to connect to its own window");if(e&&!c.isFunction(e))throw Error("MessageBus: The provided callback function is not of the correct type");for(var g=this.pendingConnections_.length,k=0;k<g;k++)if(this.pendingConnections_[k].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");
g=this.acceptedConnections_.length;for(k=0;k<g;k++)if(this.acceptedConnections_[k].win===a)throw Error("MessageBus: Trying to connect to a window that we are already trying to connect to");g=this.completedConnections_.length;for(k=0;k<g;k++)if(this.completedConnections_[k].win===a)throw Error("MessageBus: Trying to connect to a window that has already been connected");g={win:a,callback:e,currentWaitTime:0,deferred:m.defer()};this.pendingConnections_.push(g);this.tryToConnect_(g);return g.deferred.promise};
k.prototype.pushMessage=function(e){if(!c.isObject(e))throw Error("MessageBus: A valid message object has not been provided to pushMessage()");var g=this.completedConnections_.length;if(0===g)this.pendingMsgs_.push(e);else{if(!c.isObject(e))throw Error("Cannot mark non-object value as quickoffice message");e.qoMessageBus=!0;this.msgQueue_.length>=a&&this.msgQueue_.shift();this.msgQueue_.push(e);for(var k=0;k<g;k++)this.completedConnections_[k].win.postMessage(e,"*")}};k.prototype.listen=function(a,
e){if(!c.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to listen()");if(e&&!c.isFunction(e))throw Error("MessageBus: The provided filter function is not of the correct type");this.listeners_.push({listener:a,filter:e})};k.prototype.stopListening=function(a){if(!c.isFunction(a))throw Error("MessageBus: A valid listener function has not been provided to stopListening()");for(var e=this.listeners_.length,g=0;g<e;g++)if(this.listeners_[g].listener===a){this.listeners_.splice(g,
1);break}};k.prototype.isConnectedTo=function(a){for(var c=!1,e=this.completedConnections_.length,g=0;g<e;g++)if(a===this.completedConnections_[g].win){c=!0;break}return c};k.prototype.tryToConnect_=function(a){a.currentWaitTime>p.kMESSAGE_BUS_CONNECTION_TIMEOUT?this.handleTimeOut_(a):(a.currentWaitTime+=p.kMESSAGE_BUS_CONNECTION_RETRY,-1!==this.pendingConnections_.indexOf(a)&&a.win.postMessage(e,"*"),a.timeoutId=setTimeout(this.tryToConnect_.bind(this,a),p.kMESSAGE_BUS_CONNECTION_RETRY))};k.prototype.handleTimeOut_=
function(a){var c=p.kMESSAGE_BUS_CONNECTION_TIMEOUT_MSG;window.connectFromAppToQowt&&(c=window.connectFromQowtToApp?Math.abs(Math.round(window.connectFromQowtToApp-window.connectFromAppToQowt)/1E3)>Math.round(p.kMESSAGE_BUS_CONNECTION_TIMEOUT/1E3*.8)?c+":qowt too late to connect":c+":qowt and app connected:handshake failed?":c+":qowt failed to connect");a.deferred.reject(Error(c))};k.prototype.handleIncomingMessage_=function(a){if(a){if(-1!==this.msgQueue_.indexOf(a.data))throw Error("MessageBus: A message that was pushed onto thisbus has arrived back on it - we have a circular dependancy!");
a.data===e?this.handleConnectionRequestMsg_(a):a.data===g?this.handleConnectionAcceptedMsg_(a):a.data===w?this.handleConnectionAckMsg_(a):a&&a.data&&!0===a.data.qoMessageBus&&("chrome-extension://gbkeegbaiigmenfmjfclcdgdpimamgkj"===a.origin||"chrome-extension://bpmcpldpdmajfigpchkicefoigmkfalc"===a.origin||"chrome-extension://ehibbfinohgbchlgdbfpikodjaojhccn"===a.origin)&&this.handleClientMsg_(a)}};k.prototype.handleConnectionRequestMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionRequest message");
a.source.postMessage(g,"*")};k.prototype.handleConnectionAcceptedMsg_=function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAccepted message");for(var c=this.pendingConnections_.length,e=0;e<c;e++)if(this.pendingConnections_[e].win===a.source){c=this.pendingConnections_.splice(e,1)[0];a=this.acknowledgements_.indexOf(a.source);-1===a?this.acceptedConnections_.push(c):(this.acknowledgements_.splice(a,1),this.connectionCompleted_(c));c.win.postMessage(w,"*");break}};k.prototype.handleConnectionAckMsg_=
function(a){if(!a.source)throw Error("MessageBus: Unknown source of qoConnectionAck message");for(var c=this.acceptedConnections_.length,e=0;e<c;e++)if(this.acceptedConnections_[e].win===a.source){a=this.acceptedConnections_.splice(e,1)[0];this.connectionCompleted_(a);return}this.acknowledgements_.push(a.source)};k.prototype.handleClientMsg_=function(a){if(a.source){for(var c=this.listeners_.slice(),e=c.length,g=0;g<e;g++){var k=c[g];!k||k.filter&&!k.filter.call(this,a)||k.listener.call(this,a)}e=
this.completedConnections_.length;for(g=0;g<e;g++)this.completedConnections_[g].win!==a.source&&this.completedConnections_[g].win.postMessage(a.data,"*")}};k.prototype.connectionCompleted_=function(a){this.completedConnections_.push(a);clearTimeout(a.timeoutId);for(a.callback&&a.callback.call(this);0<this.pendingMsgs_.length;)this.pushMessage(this.pendingMsgs_.shift());a.deferred.resolve()};var a=10,e="qoConnectionRequest",g="qoConnectionAccepted",w="qoConnectionAck";return k});
define("qowtRoot/messageBus/messageBus",["qowtRoot/messageBus/messageBusImpl"],function(c){return new c});
define("qowtRoot/pubsub/pubsub",["third_party/lo-dash/lo-dash.min"],function(){function c(a,c){var g=[],k=[],m=[],K=[];e[a]&&e[a].length&&(w++,e[a].forEach(function(a){a.config.after?k.push(a):g.push(a);a.config.once&&K.push(a)}),g.concat(k).forEach(function(e){m.push(e.callback(a,c))}),K.forEach(function(a){p(a.token)}));return Promise.all(m)}function p(a){var c;_.values(e).some(function(e){return e.some(function(g,k){return g.token===a?(c=e.splice(k,1)[0],!0):!1})});return c}function m(a){var c=
0;return c=a?e[a]?e[a].length:0:_.values(e).reduce(function(a,c){return a+c.length},0)}function k(){e={}}var a=Object.create(Object.prototype,{subscriberCount:{get:function(){return m()}},registeredSignals:{get:function(){return _.keys(e)}},publishCount:{get:function(){return w}}});a.subscribe=function(a,c,k){if(!_.isString(a)||!a)throw new TypeError("invalid signal");if(!_.isFunction(c))throw new TypeError("invalid callback");k=k||{};k.once=!!k.once;k.after=!!k.after;var m=(++g).toString();e[a]=
e[a]||[];e[a].push({token:m,callback:c,config:k});return m};a.publish=function(a,e){if(!_.isString(a)||!a)throw new TypeError("invalid signal");e=e||{};return c(a,e)};a.doAction=function(a,e){if(!_.isString(a)||!a)throw new TypeError("invalid action");e=e||{};e=_.isString(e)?{contentType:e}:e;return c("qowt:doAction",{action:a,context:e})};a.unsubscribe=function(a){if(void 0!==a){if(!_.isString(a)||!a)throw new TypeError("invalid token");return p(a)}};a.subscriberCountForSignal=function(a){if(!_.isString(a)||
!a)throw new TypeError("invalid signal");return m(a)};a.clear=k;a.reset=function(){k();w=g=0};var e={},g=0,w=0;return a});(function(){var c={},p=window.sessionStorage.getItem("featureOverrides");p&&(c=JSON.parse(p));c.isRelease=!0;c.edit=!1;window.sessionStorage.setItem("featureOverrides",JSON.stringify(c));window.localStorage.removeItem("testsToInclude");window.localStorage.removeItem("builtInTests")})();define("configs/releaseFeatures",function(){});
(function(){var c={},p=window.sessionStorage.getItem("featureOverrides");p&&(c=JSON.parse(p));c.save=!!(window.chrome&&window.chrome.fileSystem&&window.chrome.fileSystem.chooseEntry);window.sessionStorage.setItem("featureOverrides",JSON.stringify(c))})();define("configs/chromeFeatures",function(){});define("qowtRoot/features/pack",[],function(){return{edit:!0,save:!1,pointEdit:!1,hats:!0}});
define("qowtRoot/features/utils",["qowtRoot/features/pack"],function(c){var p={isEnabled:function(k){k=c[k];return void 0===k?!1:k},enable:function(k){c[k]=!0},disable:function(k){c[k]=!1},setOverrides:function(k){for(var a in k)k.hasOwnProperty(a)&&(c[a]=k[a])},isDebug:function(){return void 0!==m?m:!p.isEnabled("isRelease")},setDebugOverride:function(c){m=c},clearDebugOverride:function(){m=void 0}},m;return p});
define("qowtRoot/utils/promiseUtils",["qowtRoot/utils/typeUtils","qowtRoot/third_party/when/when"],function(c,p){var m={cast:function(c){return c instanceof Promise?c:Promise.resolve(c)},delay:function(c,a){c=c||0;return new Promise(function(e){setTimeout(e.bind(void 0,a),c)})},delayThenReject:function(c,a){c=c||0;return new Promise(function(e,g){setTimeout(g.bind(e,a),c)})},throwAndEscapeChain:function(c){c instanceof Error||(console.error("throwAndEscapeChain wrapping value in new Error: ",c),c=
Error(c));p.reject(c).done();throw c;},pipeline:function(k){function a(){for(var g=Array.prototype.slice.call(arguments,0);0<k.length;){var l=k.shift();if(c.isPromiseLike(l))return m.cast(l).then(function(c){k.unshift(c);return a.apply(e,g)});c.checkArgTypes("PromiseUtils.pipeline",{task:[l,"function"]});l=l.apply(e,g);if(c.isPromiseLike(l))return m.cast(l).then(function(c){return a(c)});g=[l]}return g[0]}var e=this,g=Array.prototype.slice.call(arguments,0);if(g.some(c.isPromiseLike))return Promise.all(g).then(function(a){return m.pipeline.apply(e,
a)});c.checkArgTypes("PromiseUtils.pipeline",{tasks:[k,"list"]});k=k.slice(0);return a.apply(e,g.slice(1))},finally:function(c,a){function e(){return m.cast(a()).then(function(){return c})}return m.cast(c).then(e,e)},waitForNextMacroTurn:function(c){return new Promise(function(a){window.setTimeout(a.bind(null,c),0)})}};return m});
define("utils/analytics/googleAnalytics",["qowtRoot/features/utils","qowtRoot/utils/promiseUtils"],function(c,p){function m(a,e){var l;void 0!==A?l=A?Promise.resolve():Promise.reject(Error("ga permission cached (not permitted)")):(window.analytics&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.getIsCrashReportingEnabled&&(!c.isDebug()||void 0!==window.__gaMock)?l=Promise.resolve():(console.warn("GA not supported on this platform"),l=Promise.reject(Error("GA not supported on this platform"))),
l=l.then(k).catch(g));return l.then(w).then(a.bind(null,e)).catch(function(){})}function k(){var c=Error("Crash reporting setting timed out");return Promise.race([a(),p.delayThenReject(1E3,c)]).then(e)}function a(){return new Promise(function(a){chrome.metricsPrivate.getIsCrashReportingEnabled(a)})}function e(a){return new Promise(function(c,e){G=window.analytics.getService(K);G.getConfig().addCallback(function(g){g.setTrackingPermitted(a);(A=a)?c():(console.warn("Crash reporting not allowed"),e())})})}
function g(){A=!1;return Promise.reject()}function w(){void 0===t&&l("QO");return Promise.resolve()}function l(a){t&&t.sendAppView(a);t=G.getTracker(N[a]);E&&t.set(window.analytics.Parameters.SESSION_GROUP,E);"QO"!==a&&O&&t.set(window.analytics.Parameters.APP_ID,O);t.forceSessionStart();return Promise.resolve()}function q(a){z!==a&&(z=a,t.sendAppView(a));return Promise.resolve()}function x(a){t.sendException(a.msg,a.fatal);return Promise.resolve()}function u(a){t.sendEvent(a.category,a.action,a.label,
a.value);return Promise.resolve()}var N={word:"UA-44583639-1",sheet:"UA-44583639-2",point:"UA-44583639-3",QO:"UA-44583639-4"},K="Quickoffice",z,A,G,t,E,O;return{setFileExt:function(a){O=a},setSessionGroup:function(a){E=a},setTracker:function(a){return m(l,a)},sendState:function(a){return m(q,a)},sendException:function(a){return m(x,a)},sendEvent:function(a){return m(u,a)},reset:function(){t=G=A=z=void 0}}});
define("qowtRoot/utils/i18n",["qowtRoot/utils/typeUtils","utils/analytics/googleAnalytics"],function(c,p){var m={getMessage:function(k,a){var e="????";if(!chrome||!chrome.i18n)return k;c.isString(k)?(e=chrome.i18n.getMessage(k,a),e||(e=k,m.logError_("Missing translation",k))):m.logError_("Invalid string translation Id",k);return e},logError_:function(c,a){console.error(c+" "+a);p.sendException({msg:c,fatal:!1})}};return m});
define("qowtRoot/errors/localisedError",["qowtRoot/utils/typeUtils","qowtRoot/utils/i18n","third_party/lo-dash/lo-dash.min"],function(c,p){var m=function(k){k=k||"";this.name="LocalisedError";c.isObject(k)&&_.extend(this,k);this.message=(this.code?this.code+": ":"")+(this.message||JSON.stringify(k)||this.title||this.details||this.additionalInfo);this.title=p.getMessage(this.title);this.details=k.fileName?p.getMessage(this.details,k.fileName):p.getMessage(this.details);this.linkData&&this.linkData.msg&&
(this.linkData.msg=p.getMessage(this.linkData.msg)||this.linkData.msg);Error.captureStackTrace(this,m)};m.prototype=Object.create(Error.prototype);return m.prototype.constructor=m});define("qowtRoot/errors/qowtError",["qowtRoot/errors/localisedError"],function(c){var p=function(){c.apply(this,arguments);this.name="QOWTError";Error.captureStackTrace(this,p);this.fatal=!1};p.prototype=Object.create(c.prototype);p.prototype.constructor=p;return window.QOWTError=p});
define("qowtRoot/errors/qowtSilentError",["qowtRoot/errors/localisedError"],function(c){var p=function(){c.apply(this,arguments);this.name="QOWTSilentError";Error.captureStackTrace(this,p);this.fatal=!1;this.silent=!0};p.prototype=Object.create(c.prototype);p.prototype.constructor=p;return window.QOWTSilentError=p});
define("qowtRoot/errors/qowtException",["qowtRoot/errors/localisedError"],function(c){var p=function(){c.apply(this,arguments);this.name="QOWTException";Error.captureStackTrace(this,p);this.fatal=!0};p.prototype=Object.create(c.prototype);p.prototype.constructor=p;return window.QOWTException=p});
define("qowtRoot/errors/errorCatcher","qowtRoot/utils/typeUtils qowtRoot/messageBus/messageBus qowtRoot/pubsub/pubsub qowtRoot/errors/qowtError qowtRoot/errors/qowtSilentError qowtRoot/errors/qowtException".split(" "),function(c,p,m,k,a,e){function g(a){a.error?(console.error("%s caught js exception: %s",z,a.error.name||a.error.message?a.error.name+": "+a.error.message:a.error),console.error(a.error.stack),void 0===a.error.fatal&&(a.error.fatal=!0),l(a.error)):console.error(a)}function w(a,c){console.log("%s caught deprecated error",
z);console.log(c);c.isDeprecatedError=!0;l(c)}function l(g){if(g instanceof Error)void 0===g.fatal&&(g.fatal=!0);else{console.log("%s converting deprecated/bad error",z);switch(!0){case c.isObject(g)&&g.isDeprecatedError:var l={title:g.errorId?g.errorId+"_short_msg":void 0,details:g.errorId?g.errorId+"_msg":void 0,linkData:g.linkData,message:g.additionalInfo};g=g.fatal?new e(l):g.silent?new a(l):new k(l);break;case c.isNumber(g):g=new e({code:g});break;case c.isString(g):g=new e(g);break;default:g=
new e(g.toString())}g.stack=void 0}G.push(g);q(g);if(!g.isSynced){console.log("%s pushing error to msg bus",z);l=_.extend({},g);l.name=g.name;l.message=g.message;l.stack=g.stack;try{p.pushMessage({id:N,error:JSON.stringify(l)})}catch(m){}}}function q(a){console.log("%s dispatching error to observers",z);K.forEach(function(c){try{c.call(c,a)}catch(e){console.warn("Error observer %s threw an exception; ignored",c.name||""),console.warn(e.stack)}})}function x(a){if(a&&a.data&&a.data.error){console.log("%s receiving error from msg bus",
z);a=JSON.parse(a.data.error);var c={};-1!=="Error EvalError RangeError ReferenceError SyntaxError TypeError URIError QOWTError QOWTSilentError QOWTException".split(" ").indexOf(a.name)?(console.log("cast to %s",a.name),c=new window[a.name]):(console.log("cast fallback to Error"),c=Error());_.extend(c,a);void 0===a.stack&&(c.stack=void 0);a=c;a.isSynced=!0;l(a)}}function u(a){return a&&a.data&&a.data.id===N}var N="errorSync",K=[],z="sandbox"===window.name?"QOWT":"App",A,G=[];return{init:function(){A=
m.subscribe("qowt:error",w);window.addEventListener("error",g);p.listen(x,u);Error.stackTraceLimit=Infinity},reset:function(){m.unsubscribe(A);window.removeEventListener("error",g);p.stopListening(x);K=[]},handleError:function(a){l(a)},addObserver:function(a){c.isFunction(a)?K.push(a):console.warn("Error observer must be a function")},observers:function(){return K},lastError:function(){return G[G.length-1]}}});
define("qowtRoot/errors/unique/fileDoesNotExistError",["qowtRoot/errors/qowtException"],function(c){var p=function(){this.title="file_does_not_exist_error_title";this.details="file_does_not_exist_error_details";this.gaState="FileDoesNotExistError";c.apply(this,arguments);this.name="FileDoesNotExistError";Error.captureStackTrace(this,p)};p.prototype=Object.create(c.prototype);return p.prototype.constructor=p});
define("qowtRoot/utils/tryUtils",["qowtRoot/utils/typeUtils"],function(c){var p=function(c){this.rethrowOnException=!1;this.optMsg=c};p.prototype={__proto__:Object.prototype,ignore:function(){return this.run.apply(this,arguments)},rethrow:function(){this.rethrowOnException=!0;return this.run.apply(this,arguments)},run:function(){var m=arguments[0],k=[].splice.call(arguments,1);try{return m.apply(null,k)}catch(a){this.optMsg&&(c.isString(this.optMsg)?console.warn(this.optMsg):console.dir(this.optMsg));
if(this.rethrowOnException){if(a instanceof Error)throw a;throw Error(a);}console.warn("Ignoring exception: ",a)}}};return{withWarning:function(c){return new p(c)},ignore:function(){if(!c.isFunction(arguments[0]))throw Error("ignore must be passed a function as first argument");var m=new p;return m.ignore.apply(m,arguments)},rethrow:function(){var c=new p;return c.rethrow.apply(c,arguments)}}});
define("controllers/appState",["qowtRoot/errors/errorCatcher","utils/analytics/googleAnalytics"],function(c,p){function m(a){k.updateState(a.gaState?a.gaState:a.fatal?"FatalCrash":"NonFatalError",{data_reason:a.message,data_fatal:a.fatal})}var k={init:function(){c.addObserver(m);k.updateState("Init")},setApp:function(a,c){p.setFileExt(c);p.setTracker(a)},updateState:function(c,g){a!==c&&(a=c,window.qowtState={state:a,context:g},p.sendState(a))}},a;return k});
define("utils/converter",[],function(){var c={app2Icon:function(c){return{word:"../img/doc.ico",sheet:"../img/xls.ico",point:"../img/ppt.ico"}[(c||"").toLowerCase()]},extension2Format:function(c){return{doc:"CBF",docx:"OOXML",docm:"OOXML",dot:"CBF",dotx:"OOXML",xls:"CBF",xlsx:"OOXML",xlsm:"OOXML",xlt:"CBF",xltx:"OOXML",csv:"CSV",ppt:"CBF",pptx:"OOXML",pptm:"OOXML",pot:"CBF",potx:"OOXML"}[(c||"").toLowerCase()]},extension2App:function(c){return{doc:"word",docx:"word",docm:"word",dot:"word",dotx:"word",
xls:"sheet",xlsx:"sheet",xlsm:"sheet",xlt:"sheet",xltx:"sheet",csv:"sheet",ppt:"point",pptx:"point",pptm:"point",pot:"point",potx:"point"}[(c||"").toLowerCase()]},extension2Mime:function(c){return{doc:"application/msword",docx:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",docm:"application/vnd.ms-word.document.macroenabled.12",dot:"application/msword-template",dotx:"application/vnd.openxmlformats-officedocument.wordprocessingml.template",xls:"application/vnd.ms-excel",
xlsx:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",xlsm:"application/vnd.ms-excel.sheet.macroenabled.12",xlt:"application/vnd.ms-excel",xltx:"application/vnd.openxmlformats-officedocument.spreadsheetml.template",csv:"text/csv",ppt:"application/vnd.ms-powerpoint",pptx:"application/vnd.openxmlformats-officedocument.presentationml.presentation",pptm:"application/vnd.ms-powerpoint.presentation.macroenabled.12",pot:"application/vnd.ms-powerpoint",potx:"application/vnd.openxmlformats-officedocument.presentationml.template"}[(c||
"").toLowerCase()]},app2FileName:function(c){return{word:"Document",point:"Presentation",sheet:"Spreadsheet"}[(c||"").toLowerCase()]},url2App:function(c){var k,a="";(c=(c||"").match(/.*\/([^\/?]*)/))&&(c=c[1].match(/.*\.([^\.]*)$/))&&(a=c[1]);switch(a.toLowerCase()){case "doc":case "docx":case "docm":k="word";break;case "xls":case "xlsx":case "xlsm":case "csv":k="sheet";break;case "ppt":case "pptx":case "pptm":k="point"}return k},mime2Extension:function(c){return p[(c||"").toLowerCase()]},mime2App:function(m){return c.extension2App(c.mime2Extension(m))},
mime2Icon:function(m){return c.app2Icon(c.mime2App(m))},mime2Format:function(m){return c.extension2Format(c.mime2Extension(m))},name2ext:function(c){var k="";(c=(c||"").match(/.*\.([^\.]*)$/))&&(k=c[1]);return k}},p={"application/msword":"doc","application/vnd.ms-word":"doc","application/vnd.msword":"doc","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"docx","application/vnd.wordprocessing-openxml":"docx","application/vnd.ms-word.document.macroenabled.12":"docm","application/vnd.ms-word.document.12":"docm",
"application/vnd.openxmlformats":"docx","application/msword-template":"dot","application/vnd.openxmlformats-officedocument.wordprocessingml.template":"dotx","application/mspowerpoint":"ppt","application/vnd.ms-powerpoint":"ppt","application/vnd.openxmlformats-officedocument.presentationml.presentation":"pptx","application/vnd.presentation-openxml":"pptx","application/vnd.presentation-openxmlm":"pptx","application/vnd.ms-powerpoint.presentation.macroenabled.12":"pptm","application/vnd.openxmlformats-officedocument.presentationml.template":"potx",
"application/msexcel":"xls","application/vnd.ms-excel":"xls","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"xlsx","application/vnd.spreadsheet-openxml":"xlsx","application/vnd.ms-excel.sheet.macroenabled.12":"xlsm","application/vnd.openxmlformats-officedocument.spreadsheetml.template":"xltx","text/csv":"csv"};return c});
define("qowtRoot/errors/unique/httpErrorFileNotFound",["qowtRoot/errors/qowtException"],function(c){var p=function(){this.title="temporary_unable_to_open_error_short_msg";this.details="temporary_unable_to_open_error_msg";this.gaState="HTTPErrorFileNotFound";c.apply(this,arguments);this.name="HTTPErrorFileNotFound";this.message="HTTP ERROR: 404";Error.captureStackTrace(this,p)};p.prototype=Object.create(c.prototype);return p.prototype.constructor=p});
define("qowtRoot/errors/unique/httpErrorZero",["qowtRoot/errors/qowtException"],function(c){var p=function(){this.title="http_error_zero_short_msg";this.details="http_error_zero_msg";this.gaState="HTTPErrorZero";c.apply(this,arguments);this.name="HTTPErrorZero";this.message="HTTP ERROR: 0";Error.captureStackTrace(this,p)};p.prototype=Object.create(c.prototype);return p.prototype.constructor=p});
define("qowtRoot/errors/unique/timeoutError",["qowtRoot/errors/qowtException"],function(c){var p=function(){this.gaState="TimeoutError";c.apply(this,arguments);this.name="TimeoutError";Error.captureStackTrace(this,p)};p.prototype=Object.create(c.prototype);return p.prototype.constructor=p});
define("utils/retryHandler",[],function(){var c=function(){this.interval=1E3;this.maxInterval=6E4};c.prototype={__proto__:Object.prototype,maxedOut:function(){return this.interval>this.maxInterval},retry:function(c){setTimeout(c,this.interval);this.interval=this.nextInterval_()},reset:function(){this.interval=1E3},nextInterval_:function(){var c=2*this.interval+this.getRandomInt_(0,1E3);return Math.min(c,this.maxInterval)},getRandomInt_:function(c,m){return Math.floor(Math.random()*(m-c+1)+c)}};return c});
define("utils/xhr","qowtRoot/errors/qowtException qowtRoot/errors/unique/httpErrorFileNotFound qowtRoot/errors/unique/httpErrorZero qowtRoot/errors/unique/timeoutError qowtRoot/utils/typeUtils qowtRoot/third_party/when/when utils/retryHandler".split(" "),function(c,p,m,k,a,e,g){var w=function(a){this.method_=a.method||"GET";this.responseType_=a.responseType||"blob";this.url_=this.buildUrl_(a.baseUrl,a.params);this.authToken_=a.authToken;this.contentType_=a.contentType;this.deferred_=e.defer();this.kEstimatedDownloadChunks_=
20;this.timeoutLength_=6E5;this.remainingChunks_=this.kEstimatedDownloadChunks_;this.progress_=0;this.retryHandler_=new g;a.abortPromise&&(a.abortPromise=a.abortPromise.catch(function(){this.xhr_&&this.xhr_.abort&&this.xhr_.abort();this.deferred_.reject(Error("XHR canceled"))}))};w.prototype={__proto__:Object.prototype,send:function(a){this.xhr_=this.createXMLHttpRequest_();this.xhr_.send(a);this.startConnectionTimeout_();return this.deferred_.promise},createXMLHttpRequest_:function(){var a=new XMLHttpRequest;
"GET"===this.method_?a.onprogress=this.onProgress_.bind(this):a.upload.onprogress=this.onProgress_.bind(this);a.onload=this.onSuccess_.bind(this);a.onerror=this.onError_.bind(this);a.open(this.method_,this.url_,!0);a.responseType=this.responseType_;this.authToken_&&a.setRequestHeader("Authorization","Bearer "+this.authToken_);this.contentType_&&a.setRequestHeader("Content-Type",this.contentType_);return a},onSuccess_:function(a){this.clearConnectionTimeout_();if(4===a.target.readyState){var c=a.target.response||
a.target.responseText;if(200!==a.target.status&&0!==a.target.status||!c)if(0!==a.target.status&&200!==a.target.status||c)this.onError_(a);else this.deferred_.reject("HTTP ERROR: ABORTED");else{if("json"===a.target.responseType&&"string"===typeof c)try{c=JSON.parse(c)}catch(e){return this.deferred_.reject(Error("XHR response not valid JSON"))}this.deferred_.notify(1);this.deferred_.resolve(c)}}},onProgress_:function(a){this.resetConnectionTimeout_();a&&a.lengthComputable?this.progress_=(a.position||
a.loaded)/(a.totalSize||a.total):(a=this.remainingChunks_/this.kEstimatedDownloadChunks_,this.remainingChunks_-=a,this.progress_+=a/this.kEstimatedDownloadChunks_);this.deferred_.notify(this.progress_)},onError_:function(a){a.target.status&&(500<=a.target.status||429===a.target.status)?this.retry_(a):this.deferred_.reject(this.getErrorFromXhrStatus_(a.target.status))},retry_:function(a){this.retryHandler_.maxedOut()?this.deferred_.reject(this.getErrorFromXhrStatus_(a.target.status)):this.retryHandler_.retry(this.send.bind(this))},
getErrorFromXhrStatus_:function(a){return 0===a?new m:404===a?new p:new c("HTTP ERROR: "+a)},buildUrl_:function(a,c){var e=this.parseUrl_(a),g=this.buildQuery_(c);g&&(e+="?"+g);return e},buildQuery_:function(a){a=a||{};return Object.keys(a).map(function(c){return encodeURIComponent(c)+"="+encodeURIComponent(a[c])}).join("&")},parseUrl_:function(c){if(a.isString(c)){var e=c;e.match(/^http[s]?:\/\//)||e.match(/^blob:/)||e.match(new RegExp("^"+window.location.origin))||(c="http://"+c)}else throw Error("URL for XHR should be a string");
return c},startConnectionTimeout_:function(){this.timeout_=window.setTimeout(function(){var a=new k("XHR timed out");this.deferred_.reject(a)}.bind(this),this.timeoutLength_)},clearConnectionTimeout_:function(){window.clearTimeout(this.timeout_);delete this.timeout_},resetConnectionTimeout_:function(){this.clearConnectionTimeout_();this.startConnectionTimeout_()}};return w});
define("qowtRoot/utils/localStorageManager",["qowtRoot/errors/qowtException"],function(c){return{setItem:function(p,m){try{window.localStorage.setItem(p,m)}catch(k){throw new c({title:"storage_quota_exceed_error_short_msg",details:"storage_quota_exceed_error_msg",message:k.message});}},getItem:function(c){return window.localStorage.getItem(c)}}});
define("ui/progressSpinner",["qowtRoot/features/utils"],function(c){function p(){q&&(q=!1,g.style.opacity="0")}function m(a,c){u[a].progress=1<c?1:0>c||void 0===c?0:c;var e=0,g=0,l=0,m;for(m in u)if(u.hasOwnProperty(m)&&void 0!==u[m].weight&&void 0!==u[m].progress){var p=u[m];"*"===p.weight?l=p.progress:(g+=p.weight,e+=p.progress*p.weight)}0<l&&(e+=l*(1-g));k(e)}function k(a){a=1<a?1:0>a||void 0===a?0:a;var c=parseInt(8*a,10);l&&l.getElementById("circular-progress").setAttribute("class",("editor"===
w?"dark":"light")+" p"+c);1===a&&setTimeout(p,100)}function a(){w=c.isEnabled("edit")?"editor":"viewer";g=document.createElement("div");g.style.display="none";g.classList.add(w);g.classList.add("progress-spinner-container");g.classList.add("fader");g.addEventListener("webkitTransitionEnd",function(){q||(k(0),g.style.display="none")},!1);e=document.createElement("embed");e.classList.add(w);e.classList.add("progress-spinner");e.src="../img/progressSpinner.svg";e.onload=function(){l=e.getSVGDocument()};
g.appendChild(e);var a=document.createElement("div");a.classList.add(w);a.classList.add("progress-spinner-label");a.textContent=chrome.i18n.getMessage("file_loading_spinner_label");g.appendChild(a);document.body.appendChild(g);N=!0}var e,g,w,l,q=!1,x=0,u={},N=!1;return{show:function(c){N||a();q||(q=!0,g.style.display="block",g.style.opacity="1");c&&k(c)},hide:function(){p()},setProgress:function(a){k(a)},addContributor:function(a){x++;var c="contrib"+x;u[c]={weight:a,progress:0};return m.bind(this,
c)},resetContributors:function(){u={};x=0}}});define("utils/htmlConstructor",[],function(){var c={constructHTML:function(p,m){for(var k=document.createDocumentFragment(),a=0;a<p.length;a++){var e=p[a];e.elType=e.elType||"div";var g=document.createElement(e.elType),w;for(w in e)e.hasOwnProperty(w)&&"function"!==typeof e[w]&&"children"!==w&&(g[w]=e[w]);e.children&&c.constructHTML(e.children,g);k.appendChild(g)}m&&m.appendChild(k);return k}};return c});
define("utils/pluginLoader","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtException qowtRoot/errors/qowtSilentError qowtRoot/pubsub/pubsub qowtRoot/third_party/when/when qowtRoot/utils/localStorageManager qowtRoot/utils/typeUtils ui/progressSpinner utils/htmlConstructor".split(" "),function(c,p,m,k,a,e,g,w,l){var q=function(a){this.status="idle";this.myWin_=a||window;this.kHistoricId_="pluginLoadTimes";this.kHistoricCount_=10;this.relatedApp_=null;this.kPluginLoadRetryMax_=3;this.timeouts_=this.pluginLoadAttempt_=
0;this.timeout_=this.expectedLoadTime_=this.averageLoadTime_=this.historicLoadTimes_=this.startTime_=this.progressIntervalId_=this.spinnerUpdateFunc_=this.deferred_=null;this.pluginTimeoutLength_=3E4};q.prototype=Object.create(Object.prototype);q.prototype.constructor=q;q.prototype.loadPlugin=function(c){if("word"!==c&&"sheet"!==c&&"point"!==c)throw Error("Error: unknown app: "+c);this.deferred_=a.defer();this.status="loading";this.relatedApp_=c;this.constructPluginHTML_();return this.deferred_.promise};
q.prototype.constructPluginHTML_=function(){this.pluginLoadAttempt_++;var a=l.constructHTML([{id:"pluginContainer",children:[{elType:"embed",name:"nacl_module",id:"qonacl",width:0,height:0,src:"../plugin/"+this.relatedApp_+".nmf",type:"application/x-nacl"}]}]);this.setupLoadListeners_(a);this.startLoadTimeout_();this.beginLoading_(a)};q.prototype.setupLoadListeners_=function(a){a=a.getElementById("pluginContainer");a.addEventListener("load",this.pluginLoaded_.bind(this),!0);a.addEventListener("error",
this.handleNaclError_.bind(this),!0);a.addEventListener("crash",this.handleNaClCrash_.bind(this),!0);a.addEventListener("abort",this.handleNaClAbort_.bind(this),!0);a.addEventListener("loadstart",this.initProgressUpdate_.bind(this),!0);k.subscribe("app:naclCrash",this.handleNaClCrash_.bind(this))};q.prototype.beginLoading_=function(a){document.body.appendChild(a)};q.prototype.handleNaclTimeout_=function(){this.timeouts_++;this.logMessage_("Nacl loading timeout #"+this.timeouts_);this.startLoadTimeout_()};
q.prototype.handleNaClAbort_=function(){this.clearLoadTimeout_();this.deferred_.reject(Error("Nacl Loading Aborted"))};q.prototype.handleNaclError_=function(){this.logMessage_("NaCl-FAIL#"+this.pluginLoadAttempt_+":"+this.getLastError_());this.clearLoadTimeout_();if(this.pluginLoadAttempt_<this.kPluginLoadRetryMax_){var a=document.getElementById("pluginContainer");if(a&&a.parentNode)a.parentNode.removeChild(a);else throw Error("Cannot retry NaCl load. Unexpected state.");this.constructPluginHTML_()}else{var a=
this.getLastError_(),c;c=!(-1===a.indexOf("Data Execution Prevention is required")&&-1===a.indexOf("CPU model is not supported"));throw new p({title:"app_nacl_error_title",details:c?"app_nacl_error_unsupported_device":"app_nacl_error_load_failed",message:a});}};q.prototype.handleNaClCrash_=function(){this.clearLoadTimeout_();throw new p({title:"app_nacl_crash_title",details:"app_nacl_crash_msg",message:this.getLastError_()});};q.prototype.getLastError_=function(){var a=document.getElementById("qonacl");
return a?a.lastError:"NaCl error or crash: No lastError logged."};q.prototype.logMessage_=function(a){var e=new m(a);c.handleError(e);console.error(a)};q.prototype.updateProgress_=function(){this.spinnerUpdateFunc_(this.progressAlgo_((new Date-this.startTime_)/this.expectedLoadTime_))};q.prototype.initProgressUpdate_=function(){w.show();this.spinnerUpdateFunc_=w.addContributor("*");this.calcExpectedLoadTime_();this.progressIntervalId_=this.myWin_.setInterval(this.updateProgress_.bind(this),10)};q.prototype.calcExpectedLoadTime_=
function(){this.startTime_=new Date;this.historicLoadTimes_=JSON.parse(e.getItem(this.kHistoricId_));this.historicLoadTimes_ instanceof Array||(this.historicLoadTimes_=[]);if(0===this.historicLoadTimes_.length)this.averageLoadTime_=100;else{var a=0;this.historicLoadTimes_.forEach(function(c){a+=c});this.averageLoadTime_=a/this.historicLoadTimes_.length}this.expectedLoadTime_=1.1*this.averageLoadTime_};q.prototype.progressAlgo_=function(a){return Math.pow(a+(1-a)/2,16)};q.prototype.pluginLoaded_=function(){this.clearLoadTimeout_();
this.myWin_.clearInterval(this.progressIntervalId_);g.isFunction(this.spinnerUpdateFunc_)&&this.spinnerUpdateFunc_(1);this.recordLoadTime_();1<this.pluginLoadAttempt_&&this.logMessage_("NaCl Loaded OK: try#"+this.pluginLoadAttempt_);this.status="loaded";this.deferred_.resolve()};q.prototype.recordLoadTime_=function(){for(this.historicLoadTimes_.push(new Date-this.startTime_);this.historicLoadTimes_.length>this.kHistoricCount_;)this.historicLoadTimes_.shift();e.setItem(this.kHistoricId_,JSON.stringify(this.historicLoadTimes_))};
q.prototype.startLoadTimeout_=function(){this.timeout_=this.myWin_.setTimeout(this.handleNaclTimeout_.bind(this),this.pluginTimeoutLength_)};q.prototype.clearLoadTimeout_=function(){this.myWin_.clearTimeout(this.timeout_)};return q});
define("utils/fileWriter",["qowtRoot/third_party/when/when","utils/analytics/googleAnalytics"],function(c,p){var m=function(c){this.entry=c;this.state=0};m.prototype={__proto__:Object.prototype,writeData:function(c){return this.createWriter_().then(this.truncateAndWrite_.bind(this,c)).then(function(){return this.entry}.bind(this))},createWriter_:function(){var k=c.defer();c(0===this.state).then(function(){this.entry.createWriter(k.resolve,k.reject)}.bind(this));return k.promise},writeOrResolve_:function(c,
a,e){if(2===a.readyState)switch(this.state){case 3:try{this.state=1,a.write(c)}catch(g){e.reject(Error(g))}break;case 1:this.state=0,e.resolve()}else p.sendException({msg:"Callback for write/ writeend called when FileWriter.readyState !== DONE",fatal:!1})},truncateAndWrite_:function(k,a){return c.promise(function(c,g){1===a.readyState&&g(Error("INVALID_STATE_ERR : Cannot write when the previous write is still in progress"));a.onwrite=this.writeOrResolve_.bind(this,k,a,{reject:g,resolve:c});a.onerror=
function(a){g(Error(a.currentTarget.error.message))};try{this.state=3,a.truncate(0)}catch(m){throw Error(m);}}.bind(this))}};return m});
define("utils/metrics",["qowtRoot/features/utils","qowtRoot/utils/typeUtils"],function(c,p){var m,k="doc docx docm xls xlsx xlsm ppt pptx pptm pps ppsx ppsm csv".split(" "),a="csvNonEmptyCellCount csvSheetCount csvFormattedCellCount docPageCount docSectionCount docParagraphCount docxPageCount docxSectionCount docxParagraphCount pptSlideCount pptMasterCount pptxSlideCount pptxMasterCount xlsNonEmptyCellCount xlsSheetCount xlsFormattedCellCount xlsxNonEmptyCellCount xlsxSheetCount xlsxFormattedCellCount".split(" ");return{recordFileType:function(a){if(a){var g=
m=a.toLowerCase();if(chrome&&chrome.metricsPrivate&&chrome.metricsPrivate.recordValue){var p;"Array"===k.constructor.name?(a=k.indexOf(g),p=k.length):(a=g,p=k);0>a||a>p?console.warn("Ignoring metrics record for unknown value: "+g):(g={metricName:"Quickoffice.FileFormat",type:"histogram-linear",min:1,max:p,buckets:p+1},c.isDebug()&&void 0===window.__umaMock?console.log("UMA not supported in debug mode"):chrome.metricsPrivate.recordValue(g,a))}}},recordCount:function(e){e=e||{};var g=m+(e.dataPoint||
"");e=e.value||0;if(p.isString(name)&&p.isNumber(e)&&p.isList(a)){var k,l;p.isList(a)?(l=a.indexOf(g),k=a.length):(l=g,k=a);if(!(0<=l&&l<=k))console.warn("Ignoring unknown metrics record "+g+" with value: "+e);else if(!c.isDebug()&&chrome&&chrome.metricsPrivate&&chrome.metricsPrivate)switch(k="Quickoffice."+g,g){case "docPageCount":case "docxPageCount":chrome.metricsPrivate.recordValue&&chrome.metricsPrivate.recordValue({metricName:k,type:"histogram-log",min:1,max:1E3,buckets:50},e);break;case "docParagraphCount":case "docxParagraphCount":chrome.metricsPrivate.recordMediumCount&&
chrome.metricsPrivate.recordMediumCount(k,e);break;case "csvSheetCount":case "docSectionCount":case "docxSectionCount":case "xlsSheetCount":case "xlsxSheetCount":case "pptSlideCount":case "pptxSlideCount":case "pptMasterCount":case "pptxMasterCount":chrome.metricsPrivate.recordSmallCount&&chrome.metricsPrivate.recordSmallCount(k,e);break;case "csvNonEmptyCellCount":case "xlsNonEmptyCellCount":case "xlsxNonEmptyCellCount":case "csvFormattedCellCount":case "xlsFormattedCellCount":case "xlsxFormattedCellCount":chrome.metricsPrivate.recordCount&&
chrome.metricsPrivate.recordCount(k,e);break;default:console.warn("Record count ignored unknown metric "+k)}}else console.warn("Metrics cannot record count - invalid parameters")}}});
define("qowtRoot/errors/unique/scriptLoadingTimeout",["qowtRoot/errors/qowtException"],function(c){var p=function(){this.title="drive_open_timeout_error_short_msg";this.details="drive_open_timeout_error_msg";this.gaState="ScriptLoadingTimeout";c.apply(this,arguments);this.name="ScriptLoadingTimeout";Error.captureStackTrace(this,p)};p.prototype=Object.create(c.prototype);return p.prototype.constructor=p});
define("qowtRoot/utils/driveErrors",[],function(){return{OFFLINE:-1,AUTHENTICATION_TOKEN_NOT_ISSUED:400,INVALID_CREDENTIALS:401,FORBIDDEN:403,FILE_NOT_FOUND:404,CONVERT_FAILURE:413,INTERNAL_SERVER_ERROR:500,TIMEOUT:503}});
define("utils/gdrive/firstPartyAuth",["qowtRoot/third_party/when/when","qowtRoot/utils/driveErrors"],function(c,p){function m(){window[u]=void 0;window[w]=void 0;return c.resolve()}function k(){return a(g,q).then(function(){return a(g,l)}).then(function(){return a(g,x)}).then(function(){return Promise.reject({status:p.INVALID_CREDENTIALS})}).catch(function(a){return a?Promise.reject(a):Promise.resolve()})}function a(a,c){return new Promise(function(e,g){chrome.cookies.get({url:a,name:c},function(a){a&&
void 0!==a.value?(window[u]=a.value,g()):e()})})}function e(a,e,g,k){return c.promise(function(c,l){chrome.cookies.get({url:a,name:e},function(a){a&&void 0!==a.value?(window[g]=k?a.value:!!a.value,c()):l({status:p.INVALID_CREDENTIALS})})})}var g="https://*.google.com/",w="__OVERRIDE_SID",l="SAPISID",q="__Secure-1PAPISID",x="__Secure-3PAPISID",u="__SAPISID";return{setCookies:function(){return c.all([m(),k()])},setCookiesOlderWay:function(){return c.all([m(),e("http://*.google.com/","SID",w),e(g,l,
u,!0)])}}});define("qowtRoot/models/env",[],function(){return{pointsPerEm:12,fontUnit:"pt"}});
define("qowtRoot/utils/deprecatedUtils",["qowtRoot/models/env","qowtRoot/utils/typeUtils","qowtRoot/errors/qowtSilentError","qowtRoot/errors/errorCatcher"],function(c,p,m,k){var a={NodeType:{ELEMENT_NODE:1,ATTRIBUTE_NODE:2,TEXT_NODE:3,CDATA_SECTION_NODE:4,ENTITY_REFERENCE_NODE:5,ENTITY_NODE:6,PROCESSING_INSTRUCTION_NODE:7,COMMENT_NODE:8,DOCUMENT_NODE:9,DOCUMENT_TYPE_NODE:10,DOCUMENT_FRAGMENT_NODE:11,NOTATION_NODE:12,1:"ELEMENT_NODE",2:"ATTRIBUTE_NODE",3:"TEXT_NODE",4:"CDATA_SECTION_NODE",5:"ENTITY_REFERENCE_NODE",
6:"ENTITY_NODE",7:"PROCESSING_INSTRUCTION_NODE",8:"COMMENT_NODE",9:"DOCUMENT_NODE",10:"DOCUMENT_TYPE_NODE",11:"DOCUMENT_FRAGMENT_NODE",12:"NOTATION_NODE"},RegExp:{HEX:/^#?([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})$/gi,HEX3:/^#?([a-f0-9])([a-f0-9])([a-f0-9])$/gi},regExpExec:function(a,c){var k;if(p.isRegex(a)&&p.isString(c)){var l=a.exec(c);l&&l.length&&(k=l);a.lastIndex=0}return k},parseBoolean:function(a){return"false"===a||"False"===a||!1===a||0===a?!1:!0},computePercentValueOf:function(a,c){return a*
c/100},stripNode:function(c){for(var g=a.cpArray(c.childNodes),k=c.parentNode,l=0;l<g.length;l++)Polymer.dom(k).insertBefore(g[l],c),Polymer.dom(k).flush();Polymer.dom(k).removeChild(c);Polymer.dom(k).flush()},cpArray:function(a){for(var c=[],k=0;k<a.length;k++)c[c.length]=a[k];return c},cloneAndAttach:function(c,g,k){k=a.cloneDiv(c,k);a.copyAllContainedCanvases(c,k);Polymer.dom(g).appendChild(k);Polymer.dom(g).flush();return k},cloneDiv:function(c,g){var k=c.cloneMe?c.cloneMe():c.cloneNode(!1);"qowt-point-para"===
k.is&&(k.className=k.className.replace(/[\s]qowt-point-para-[\d]+/,""));k.setEid&&k.setEid(c.getEid());for(var l=0;l<c.childNodes.length;l++){var m=c.childNodes[l];m.getAttribute&&"handlers"===m.getAttribute("qowt-divtype")||(m=a.cloneDiv(m),k.appendChild(m))}g&&(k.id=g);return k},copyAllContainedCanvases:function(c,g){for(var k=c.querySelectorAll("canvas"),l=g.querySelectorAll("canvas"),m=0;m<k.length;m++)if(void 0!==k[m]&&void 0!==l[m]){var p=k[m].getContext("2d"),u=l[m].getContext("2d");a.cloneCanvasImage(p,
u)}},cloneCanvasImage:function(a,c){if(0<a.canvas.width&&0<a.canvas.height){var p=a.getImageData(0,0,a.canvas.width,a.canvas.height);p?c.putImageData(p,0,0):(p=new m("Failed to execute putImageData on CanvasRenderingContext2D."),k.handleError(p))}},getElementStyleString:function(a){var c="",k;for(k in a)c+=k+":"+a[k]+";";return c},appendJSONAttributes:function(a,c){for(var k in c)a[k]=c[k]},bulletTextMeasureElement:void 0,setBulletTextMeasureElement:function(){a.bulletTextMeasureElement={};a.bulletTextMeasureElement._bulletTextMeasureElement=
document.createElement("P");a.bulletTextMeasureElement._bulletTextMeasureElement.className="bulletTextMeasureCss";a.bulletTextMeasureElement._bulletTextMeasureElement.style.position="absolute";a.bulletTextMeasureElement._bulletTextMeasureElement.style.visibility="hidden";a.bulletTextMeasureElement._bulletTextMeasureElement.height="auto";a.bulletTextMeasureElement._bulletTextMeasureElement.width="auto";a.bulletTextMeasureElement._bulletTextMeasureElement_Style=document.createElement("style");a.bulletTextMeasureElement._bulletTextMeasureElement_Style.type=
"text/css";document.getElementsByTagName("head")[0].appendChild(a.bulletTextMeasureElement._bulletTextMeasureElement_Style);c.rootNode.appendChild(a.bulletTextMeasureElement._bulletTextMeasureElement)},setNumberTextMeasureElement:function(){a.numberTextMeasureElement={};a.numberTextMeasureElement._numberTextMeasureElement=document.createElement("P");a.numberTextMeasureElement._numberTextMeasureElement.className="numberTextMeasureCss";a.numberTextMeasureElement._numberTextMeasureElement.style.position=
"absolute";a.numberTextMeasureElement._numberTextMeasureElement.style.visibility="hidden";a.numberTextMeasureElement._numberTextMeasureElement.height="auto";a.numberTextMeasureElement._numberTextMeasureElement.width="auto";a.numberTextMeasureElement._numberTextMeasureElement_Style=document.createElement("style");a.numberTextMeasureElement._numberTextMeasureElement_Style.type="text/css";document.getElementsByTagName("head")[0].appendChild(a.numberTextMeasureElement._numberTextMeasureElement_Style);
if(void 0===c.rootNodeContainer||null===c.rootNodeContainer)c.rootNodeContainer=document.getElementById("qowt-doc-root");c.rootNodeContainer.appendChild(a.numberTextMeasureElement._numberTextMeasureElement)},returnUndefinedIfEmptyJson:function(a){return _.isEmpty(a)?void 0:a}};return a});
define("qowtRoot/utils/domUtils",["qowtRoot/models/env","qowtRoot/utils/deprecatedUtils","qowtRoot/utils/typeUtils"],function(c,p,m){var k={totalHeight:function(a){return a.getBoundingClientRect().height},peerIndex:function(a){if(a){for(var c=0;a.previousElementSibling;)"TEMPLATE"!==a.previousElementSibling.nodeName&&c++,a=a.previousElementSibling;return c}},isEditable:function(a){a.nodeType===Node.TEXT_NODE&&(a=a.parentNode);return(a=window.getComputedStyle(a))?"read-write"===a["-webkit-user-modify"]:
!1},previousNode:function(a){for(var c=a?a.previousSibling:void 0;!c&&a&&a.parentNode;)a=a.parentNode,c=a.previousSibling;for(;c&&c.lastChild;)c=c.lastChild;return c},nextNode:function(a){for(var c=a?a.nextSibling:void 0;!c&&a&&a.parentNode;)a=a.parentNode,c=a.nextSibling;for(;c&&c.firstChild;)c=c.firstChild;return c},rightMostLeafNode:function(a){for(a=a&&"P"===a.nodeName?a&&a.lastElementChild:a&&Polymer.dom(a).lastChild;a&&Polymer.dom(a).lastChild;)a=Polymer.dom(a).lastChild,"span"===a.nodeName.toLowerCase()&&
a.lastChild&&(a=a.lastChild);return a},leftMostLeafNode:function(a){for(a=a&&"P"===a.nodeName?a&&a.firstElementChild:a&&Polymer.dom(a).firstChild;a&&Polymer.dom(a).firstChild;)a=Polymer.dom(a).firstChild,"span"===a.nodeName.toLowerCase()&&a.firstChild&&(a=a.firstChild);return a},getSiblingByIndex:function(a,c){for(;0<c;c--)if(a=Polymer.dom(a).nextSibling,!a)return null;return a},insertAtStart:function(a,e){"point"===c.app&&(0<e.children.length?e.insertBefore(a,e.children[0]):e.appendChild(a));"word"===
c.app&&("P"===e.nodeName?0<e.children.length?e.insertBefore(a,e.children[0]):e.appendChild(a):(0<Polymer.dom(e).children.length?Polymer.dom(e).insertBefore(a,Polymer.dom(e).children[0]):Polymer.dom(e).appendChild(a),Polymer.dom(e).flush()))},insertAtEnd:function(a,c){"P"===c.nodeName?c.appendChild(a):(Polymer.dom(c).appendChild(a),Polymer.dom(c).flush())},insertAfter:function(a,e){var g=Polymer.dom(e).parentNode;g&&("word"===c.app?"P"===g.nodeName?g.insertBefore(a,e.nextSibling):(Polymer.dom(g).insertBefore(a,
Polymer.dom(e).nextElementSibling),Polymer.dom(g).flush()):(a instanceof QowtPointRun&&(g=e.parentNode),g&&g.insertBefore(a,e.nextSibling)))},insertBefore:function(a,e){var g;if("word"===c.app){if(g=Polymer.dom(e).parentNode)"P"===g.nodeName?e.isQowtElement||1!==g.children.length?g.insertBefore(a,e):g.appendChild(a):(e.isQowtElement||1!==g.children.length?Polymer.dom(g).insertBefore(a,e):Polymer.dom(g).appendChild(a),Polymer.dom(g).flush())}else(g=e.parentNode)&&g.insertBefore(a,e)},insertAtSiblingOrParent:function(a,
c){if(!a)throw Error("insertAtSiblingOrParent missing context");if(!a.parentNodeId&&!a.siblingNodeId)throw Error("insertAtSiblingOrParent requires either parentNodeId or siblingNodeId");if(!a.parentNodeId)throw Error("insertAtSiblingOrParent missing parentNodeId");if(c&&!m.isFunction(c))throw Error("insertAtSiblingOrParent errorFuncton must be  a function");var g;(g=document.getElementById(a.siblingNodeId))?k.insertAfter(a.node,g):(g=document.getElementById(a.parentNodeId))?g.insertBefore(a.node,
Polymer.dom(g).children[0]):c&&m.isFunction(c)&&c(" failed to insert node - no parent or sibling node found!")},relativePosition:function(a){if(a.nodeType!==Node.TEXT_NODE)throw Error("error: relativePosition needs to be given text node");var c=0,g=0;for(a=Polymer.dom(a).previousSibling;a&&a.nodeType===Node.TEXT_NODE;)c+=a.textContent.length,a=a.previousSibling,g++;return{textNodeIndex:g,characterOffset:c}},absolutePos:function(a){var c=0,g=0;if(a.offsetParent){do c+=a.offsetTop,g+=a.offsetLeft,a=
a.offsetParent;while(null!==a)}return{top:c,left:g}},absoluteScroll:function(a){var c=0,g=0;if(a.offsetParent){do c+=a.scrollTop,g+=a.scrollLeft,a=a.offsetParent;while(null!==a)}return{top:c,left:g}},getById:function(a){if(1<arguments.length){for(var c=0,g=[],p=arguments.length;c<p;c++)g.push(k.getById(arguments[c]));return g}m.isString(a)&&(a=document.getElementById(a));return a},prependChildrenID:function(a,c,g){g=g||"-";if(a&&a.id&&(a.id=""+c+g+a.id,a.childNodes&&a.childNodes.length))for(var m=
0,l=a.childNodes.length;m<l;m++)k.prependChildrenID(a.childNodes[m],c,g)},insert:function(a,c,g){switch(g){case "replace":Polymer.dom(a).parentNode.replaceChild(c,a);Polymer.dom(a).flush();break;case "before":Polymer.dom(a).parentNode.insertBefore(c,a);Polymer.dom(a).flush();break;case "after":if(a===Polymer.dom(a).parentNode.childNodes[Polymer.dom(a).parentNode.childNodes.length-1])Polymer.dom(a).parentNode.appendChild(c);else{for(a=Polymer.dom(a).nextSibling;a&&a.nodeType!==p.NodeType.ELEMENT_NODE;)a=
Polymer.dom(a).nextSibling;Polymer.dom(a).parentNode.insertBefore(c,a)}Polymer.dom(a).flush();break;case "top":Polymer.dom(a).insertBefore(c,Polymer.dom(a).childNodes[0]);Polymer.dom(a).flush();break;default:Polymer.dom(a).appendChild(c),Polymer.dom(a).flush()}},stopEvent:function(a){a&&(a.preventDefault&&a.preventDefault(),a.stopPropagation&&a.stopPropagation())},contains:function(a,c){return a?!!(a.compareDocumentPosition(c)&document.DOCUMENT_POSITION_CONTAINED_BY):!1},isElementInViewport:function(a){a=
a.getBoundingClientRect();return 0<=a.top&&0<=a.left&&a.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&a.right<=(window.innerWidth||document.documentElement.clientWidth)},removeNode:function(a){if(a&&m.isNode(a)){var c=Polymer.dom(a).parentNode;c&&m.isNode(c)&&(Polymer.dom(a).parentNode.removeChild(a),Polymer.dom(a).flush())}},getTransformValue:function(a,c){var g=a.style.webkitTransform;if(""!==g)for(var g=g.split(")"),k=0;k<g.length;k++){var l=g[k].split("(");if(l[0].trim()===
c)switch(c){case "scale":return k=l[1].split(","),g=k[0].trim(),k=k[1].trim(),{flipH:g,flipV:k};case "rotate":return l[1]}}return!1},cloneStyle:function(a,c){c&&a&&(a.style.cssText=c.style.cssText)},isField:function(a){a=a?a.getAttribute&&a.getAttribute("qowt-divtype"):"";return"qowt-field-datetime"===a||"qowt-field-numpages"===a||"qowt-field-pagenum"===a?!0:!1},getLastEditableNode:function(a){if(1===a.children.length&&(a.isEmpty()||a.children[0]instanceof QowtHyperlink))return a.children[0];a=a.childNodes;
for(var c=a.length-1;-1<c&&!(a[c]instanceof QowtWordRun&&!a[c].isEmpty()||a[c]instanceof HTMLBRElement||a[c]instanceof QowtHyperlink);)c--;return a[c]},cloneNode:function(a,e,g){var k;k=a.cloneMe?a.cloneMe(g):g?document.importNode(a,!1):a.cloneNode(!1);k.setEid&&k.setEid(a.getEid());if(e)for(var l=0;l<a.childNodes.length;l++){var m=this.cloneNode(a.childNodes[l],e,g),p;if(p="word"===c.app)p=k instanceof QowtDrawing&&(m instanceof QowtTextBox||m instanceof QowtWordImage)?!0:!1;p?Polymer.dom(k).appendChild(m):
k.appendChild(m)}"word"===c.app&&Polymer.dom(k).flush();return k}};return k});
define("utils/gdrive/apiaryLoader",["qowtRoot/third_party/when/when","qowtRoot/utils/domUtils","qowtRoot/utils/driveErrors"],function(c,p,m){function k(){p.removeNode(a);var c=document.createElement("script");c.id=a;c.src=e+"?onload="+g;document.getElementsByTagName("head")[0].appendChild(c)}var a="__apiary_script",e="https://apis.google.com/js/client.js",g="__apiaryLoaded";return{load:function(){return navigator.onLine?c.promise(function(a){window[g]=function(){window[g]=void 0;a()};k()}):c.reject({status:m.OFFLINE})}}});
define("utils/gdrive/driveUtils",[],function(){return{getErrorCode:function(c){return c&&c.result&&c.result.error&&c.result.error.code||c&&c.status},getErrorReason:function(c){return c&&c.result&&c.result.error&&c.result.error.errors&&c.result.error.errors[0]&&c.result.error.errors[0].reason},getErrorMessage:function(c){return c&&c.result&&c.result.error&&c.result.error.message||c&&c.statusText},isValidDriveId:function(c){return c&&/^[a-zA-Z0-9_-]+$/.test(c)}}});
define("utils/gdrive/drive","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtSilentError qowtRoot/errors/unique/scriptLoadingTimeout qowtRoot/utils/driveErrors utils/gdrive/firstPartyAuth utils/gdrive/apiaryLoader utils/gdrive/driveUtils qowtRoot/third_party/when/when".split(" "),function(c,p,m,k,a,e,g,w){function l(){return qa?w.resolve():w.all([e.load(),a.setCookies()]).timeout(3E4,new m("apiary script loading timeout")).then(q).then(function(){qa=!0})}function q(){gapi.client.setApiKey("AIzaSyD-qQA49y2Lv7b0KJCQghmHKe0iMHFnIts");
gapi.config.update("googleapis.config/auth/useFirstPartyAuth",!0);H&&gapi.config.update("googleapis.config/fogId",H)}function x(a,c){var e;T?e=w.resolve(T):(e={path:"/drive/v2/files/"+a,method:"GET",params:{updateViewedDate:!0,supportsTeamDrives:!0}},c&&(e.headers={"X-Goog-Drive-Resource-Keys":a+"/"+c}),e=z(e,"Drive.getMetaData_").then(function(a){return T=a&&a.result}).catch(O));return e}function u(a,c){var e={path:"/drive/v2/files/"+a+"?alt=media",method:"GET",params:{supportsTeamDrives:!0}};c&&
(e.headers={"X-Goog-Drive-Resource-Keys":a+"/"+c});return z(e,"Drive.download_").then(E).catch(O)}function N(a,c,e){a={path:"/drive/v2/files/"+a+"/copy",method:"POST",params:{convert:c,supportsTeamDrives:!0}};e.title&&(a.body={title:e.title});return z(a,"Drive.createFileFromDriveFile_")}function K(a,e,g){g&&g.mimeType||c.handleError(new p("Drive upload called with no mime type."));var h=w.defer(),k=new FileReader;k.readAsBinaryString(a);k.onload=function(){var a=g.mimeType,c=btoa(k.result),a="\r\n---------314159265358979323846\r\nContent-Type: application/json\r\n\r\n"+
JSON.stringify(g)+"\r\n---------314159265358979323846\r\nContent-Type: "+a+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+c+"\r\n---------314159265358979323846--";e.headers=e.headers?e.headers:{};e.headers["Content-Type"]='multipart/mixed; boundary="-------314159265358979323846"';e.body=a;z(e,"Drive.upload_").then(h.resolve,h.reject)};return h.promise}function z(c,e){var g=w.defer();gapi.client.request(c).then(g.resolve,function(c,k){G(k)?w.all([a.setCookies()]).done(function(){gapi.client.request(c).then(g.resolve,
function(k){G(k)?w.all([a.setCookiesOlderWay()]).done(function(){gapi.client.request(c).then(g.resolve,t.bind(null,g,e))},function(a){g.reject(a)}):t(g,e,k)})},function(a){g.reject(a)}):A(k)?gapi.client.request(c).then(g.resolve,t.bind(null,g,e)):t(g,e,k)}.bind(null,c));return g.promise}function A(a){var c=g.getErrorCode(a);a=g.getErrorReason(a);return c===k.INTERNAL_SERVER_ERROR||c===k.TIMEOUT||c===k.FORBIDDEN&&("rateLimitExceeded"===a||"userRateLimitExceeded"===a)}function G(a){a=g.getErrorCode(a);
return a===k.INVALID_CREDENTIALS||a===k.AUTHENTICATION_TOKEN_NOT_ISSUED}function t(a,e,k){e+=" error:";var h=g.getErrorCode(k),l=g.getErrorMessage(k);console.error([e,h,l].join(" "));c.handleError(new p([e,h].join(" ")));a.reject(k)}function E(a){a=a.body;for(var c=a.length,e=new ArrayBuffer(c),e=new Uint8Array(e),h=0;h<c;h++)e[h]=a.charCodeAt(h);return new Blob([e])}function O(a){throw a;}var qa=!1,T,H;return{getMetaData:function(a,c){return l().then(x.bind(null,a,c))},download:function(a,c){return l().then(u.bind(null,
a,c))},upload:function(a,c,e,h){e={path:"/upload/drive/v2/files/"+a,method:"PUT",params:{newRevision:e?"true":"false",uploadType:"multipart",alt:"json",supportsTeamDrives:!0}};h&&(e.headers={"X-Goog-Drive-Resource-Keys":a+"/"+h});return l().then(x.bind(null,a)).then(K.bind(null,c,e))},createFileFromDriveFile:function(a,c,e){return l().then(N.bind(null,a,c,e))},createFileFromNonDriveFile:function(a,c,e){c={path:"/upload/drive/v2/files/",method:"POST",params:{uploadType:"multipart",convert:c,supportsTeamDrives:!0}};
"application/msword-template"===e.mimeType&&(e.mimeType="application/msword");return l().then(K.bind(null,a,c,e))},clearCachedMetaData:function(){T=void 0},setUserId:function(a){H=a}}});
define("qowtRoot/utils/pathUtils",["qowtRoot/utils/typeUtils"],function(c){return{create:function(p){return function(){var m={extension:function(){return a},dirName:function(){return g},baseName:function(){return e},fileName:function(){return k},smartBaseName:function(){var a=m.baseName();if(a)var c=/(-[0-9]+)$/g,e=a.match(c),a=e?a.replace(c,--e):a+"-1";return a}},k,a,e,g;(function(){if(p&&c.isString(p)){var m=p.lastIndexOf("/");g=-1!==m?p.substr(0,m+1):void 0;k=-1!==m?p.substr(m+1):p;m=k.lastIndexOf(".");
e=-1!==m?k.substr(0,m):k;var l=k.length;a=-1!==m?k.substr(m+1,l):void 0}})();return m}()}}});define("qowtRoot/utils/uuid",[],function(){return{generateUUID:function(){var c=(new Date).getTime();return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var m=(c+16*Math.random())%16|0;c=Math.floor(c/16);return("x"===p?m:m&7|8).toString(16)})}}});
define("controllers/fileManager","qowtRoot/third_party/when/when utils/converter utils/xhr utils/pluginLoader utils/fileWriter utils/metrics utils/gdrive/drive utils/gdrive/driveUtils ui/progressSpinner controllers/appState qowtRoot/utils/i18n qowtRoot/utils/tryUtils qowtRoot/utils/pathUtils qowtRoot/errors/qowtException qowtRoot/errors/unique/httpErrorFileNotFound qowtRoot/errors/unique/httpErrorZero qowtRoot/errors/unique/timeoutError qowtRoot/errors/unique/scriptLoadingTimeout qowtRoot/utils/typeUtils qowtRoot/utils/driveErrors qowtRoot/utils/uuid qowtRoot/utils/localStorageManager utils/analytics/googleAnalytics third_party/lo-dash/lo-dash.min".split(" "),function(c,
p,m,k,a,e,g,w,l,q,x,u,N,K,z,A,G,t,E,O,qa,T,H){var ra,fa=function(){};fa.prototype={__proto__:Object.prototype,init:function(a,e){this.config_=a;this.uuid_=e;this.isReady=!1;this.fileTypeKnown=c.defer();var g=c(this.fileTypeKnown.promise).then(this.loadPlugin_.bind(this)).catch(function(a){throw a;}),k=c.resolve().then(this.tryToRestoreOrDeleteFromCache_.bind(this)).catch(this.openOriginalFile_.bind(this));return c.all([g,k]).then(this.whenDone_.bind(this))},getUUID:function(){return this.getCache().uuid},
updateConfigAndCache:function(a){a&&(this.config_.preferredFilename=this.config_.userFile.name,this.config_.userFile=void 0);this.config_.isDownloaded=!0;this.config_.isRenamed=a;this.cacheInfo_()},getCache:function(){var a=window.sessionStorage.getItem("__fileManagerCache");return u.ignore(JSON.parse.bind(JSON,a))||{}},getEntryPoint:function(){return ra},originalURL:function(){return _.get(this,"config_.originalURL")},privateFilePath:function(){return this.returnFilePath_(_.get(this,"config_.privateFile",
{}))},downloadFilePath:function(){return this.returnFilePath_(_.get(this,"config_.downloadFile",{}))},userFilePath:function(){return this.returnFilePath_(_.get(this,"config_.userFile",{}))},mimeTypeFromFileName:function(a){return p.extension2Mime(p.name2ext(a))},mimeType:function(){var a=this.config_.mimeType;p.mime2App(a)||(a=this.userFilePath()||this.privateFilePath()||this.originalURL(),a=N.create(a).extension()||this.config_.extension,a=p.extension2Mime(a));return a},displayName:function(){var a=
_.get(this,"config_.preferredFilename",{});if(0<a.length)return a;var c;if(a=this.userFilePath()||this.originalURL()){a=N.create(a).fileName();try{c=window.decodeURIComponent(a)}catch(e){try{c=window.unescape(a)}catch(g){c=a}}}else c=this.config_.title;return c},driveDocId:function(){return _.get(this,"config_.driveDocId")},driveFileRole:function(){return _.get(this,"config_.driveFileRole")},isNewDocument:function(){return _.get(this,"config_.newDocument")},isEmbedded:function(){return _.get(this,
"config_.embedded")},createPrivateFile:function(a){this.config_.mimeType=p.extension2Mime(a);return this.createPrivateFile_(a).then(this.cacheInfo_.bind(this))},overwriteUserFile:function(a){return this.config_.privateFile?this.config_.driveDocId||this.config_.userFile?this.config_.driveDocId?this.uploadDriveFile_(a):this.copyFile_(this.config_.privateFile,this.config_.userFile):c.reject(Error("Cannot overwrite user file: No user or drive file")):c.reject(Error("Cannot overwrite user file: private is file missing"))},
newUserFile:function(a,e){function k(a){return g.createFileFromNonDriveFile(a,!1,m).catch(function(){return this.saveAsLocal_()}.bind(this))}var l,m;this.config_.privateFile?!this.config_.driveDocId||e?l=this.saveAsLocal_(a):a?(m={title:this.nameForCopiedFile_()},l=g.createFileFromDriveFile(this.config_.driveDocId,!1,m)):(m={title:this.nameForSaveAsFile_(),mimeType:this.mimeType(),parents:[_.get(this,"config_.parents[0]")]},l=this.getFileFromEntry_(this.config_.privateFile).then(k.bind(this))):l=
c.reject(Error("Cannot create new user file: Private file missing"));return l},downloadToLocalFile:function(){this.getFileFromEntry_(this.config_.downloadFile).then(function(a){a=new File([a],a.name,{type:this.mimeTypeFromFileName(a.name)});a=window.URL.createObjectURL(a);var c=this.tryAndGetDownloadFileName();chrome.downloads.download({url:a,filename:c,conflictAction:"uniquify",saveAs:!1})}.bind(this))},tryAndGetDownloadFileName:function(){var a=_.get(this,"config_.downloadFileName","downloadedFile"),
c="."+(this.config_.extension?this.config_.extension:p.mime2Extension(this.mimeType()));try{a=a.replace(/[<>:"/\\|?*]/g,function(a){return"%"+a.charCodeAt(0).toString(16).toUpperCase()}),/(\.do[ct][xm]?|\.p[po]t[xm]?|\.xl[st][xm]?|\.csv)$/i.exec(a)||(a+=c)}catch(e){a="downloadedFile"+c}return a},convertToDocs:function(){var a={title:this.nameForConvertedFile_(),mimeType:this.mimeType()};return this.config_.driveDocId?g.createFileFromDriveFile(this.config_.driveDocId,!0,a):this.getFileFromEntry_(this.config_.privateFile).then(function(c){return g.createFileFromNonDriveFile(c,
!0,a)})},cacheFileDetails:function(a){window.sessionStorage.setItem("__fileManagerCache",JSON.stringify(a))},returnFilePath_:function(a){return a.fullPath||a.name},getFileType_:function(){var a;this.config_.driveDocId?a="driveDoc":this.config_.streamURL?a="stream":this.config_.userFile?a="userFile":this.config_.newDocument&&(a="newdocument");return a},getDriveDoc_:function(){return g.getMetaData(this.config_.driveDocId,this.config_.driveDocResourceKey).then(function(a){void 0===a.mimeType||void 0===
a.title||void 0===a.id?a=void 0===p.mime2App(a.mimeType)?c.reject(Error("Drive mimeType not an MS Office mimeType")):c.reject(Error("Drive document missing crucial information")):(this.config_.mimeType=a.mimeType,this.config_.extension=a.fileExtension,this.config_.title=a.title,this.config_.driveDocId=a.id,this.config_.parents=a.parents,this.config_.driveFileRole=_.get(a,"userPermission.role"),a=this.createPrivateFile_().then(this.updateInfoAndDownload_.bind(this,"DownloadingDriveDoc")));return a}.bind(this)).yield(!0)},
getStream_:function(){return this.createPrivateFile_().then(this.updateInfoAndDownload_.bind(this,"DownloadingStream")).yield(!0)},getUserFile_:function(){return this.createPrivateFile_().then(function(){this.updateAppStateAndCache_("LocalFile");return this.copyFile_(this.config_.userFile,this.config_.privateFile)}.bind(this))},getNewDocument_:function(a){"word"===a?(this.config_.mimeType="application/vnd.openxmlformats-officedocument.wordprocessingml.document",this.config_.title="Untitled document.docx"):
"point"===a?(this.config_.mimeType="application/vnd.openxmlformats-officedocument.presentationml.presentation",this.config_.title="Untitled presentation.pptx"):"sheet"===a&&(this.config_.mimeType="application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",this.config_.title="Untitled spreadsheet.xlsx");return this.createPrivateFile_().then(this.updateInfoAndLoadNewDocument_.bind(this,"LoadingNewDocument",a)).yield(!0)},updateInfoAndLoadNewDocument_:function(a,c){this.updateAppStateAndCache_(a);
return this.loadNewDocument_(c)},getTemplateUrl_:function(a){if("word"===a)return"templates/blank.docx";if("point"===a)return"templates/blank.pptx";if("sheet"===a)return"templates/blank.xlsx"},loadNewDocument_:function(c){l.show();var e=l.addContributor(.9);c=this.getTemplateUrl_(c);return(new m({baseUrl:chrome.runtime.getURL(c)})).send().then(function(c){return(new a(this.config_.privateFile)).writeData(c)}.bind(this),void 0,e).then(function(){this.config_.isDownloaded=!0;this.cacheInfo_();e(1);
l.hide()}.bind(this))},updateInfoAndDownload_:function(a){this.updateAppStateAndCache_(a);return this.download_()},updateAppStateAndCache_:function(a){this.initAppState_(a);this.cacheInfo_();this.fileTypeKnown.resolve()},restoreConfigFromCache_:function(a){this.config_.isDownloaded=a.isDownloaded;this.config_.isRenamed=a.isRenamed;this.config_.mimeType=a.mimeType||this.config_.mimeType;this.config_.extension=a.extension||this.config_.extension;this.config_.driveDocId=a.driveDocId||this.config_.driveDocId;
this.config_.driveFileRole=a.driveFileRole||this.config_.driveFileRole;this.config_.newDocument=a.newDocument||this.config_.newDocument;this.config_.title=a.title||this.config_.title;this.config_.parents=a.parents||this.config_.parents;this.config_.originalURL=a.originalURL||this.config_.originalURL},deleteFromCache_:function(a){return this.deletePrivateFile_(a).then(this.cacheFileDetails.bind(this,{}))},tryDeletingPrivateFile_:function(a){function e(){return c.reject(Error("IncompleteDownload"))}
function g(){return c.reject(Error("CacheDeleteFailed"))}return a.privateFilePath?this.deleteFromCache_(a.privateFilePath).then(e,g):c.reject(Error("NoPrivateFile"))},tryToRestoreOrDeleteFromCache_:function(){var a;(a=this.getCache())&&a.uuid===this.uuid_?a.isDownloaded?(ra="restore",this.restoreConfigFromCache_(a),a=this.tryToRestoreFiles_(a)):a=this.tryDeletingPrivateFile_(a):a=c.reject(Error("NoCache"));return a},saveFileEntryAndUpdateCache_:function(a){this.config_.userFile=a;this.cacheInfo_()},
tryToRestoreFiles_:function(a){function e(){this.config_.downloadFileName=a.downloadFileName;this.updateAppStateAndCache_("BrowserRefresh");return a.userFileId?this.restoreFileById_(a.userFileId).then(this.saveFileEntryAndUpdateCache_.bind(this)).yield(!0):!0}return a.privateFilePath?this.restorePrivateFile_(a.privateFilePath).then(this.restoreDownloadFile_.bind(this,a.downloadFilePath)).then(e.bind(this)):c.reject(Error("There is no cached private file path"))},nameForCopiedFile_:function(){return"Copy of "+
this.displayName()},nameForSaveAsFile_:function(){return"Copy of "+N.create(this.displayName()).baseName()+"."+p.mime2Extension(this.mimeType())},nameForConvertedFile_:function(){return N.create(this.displayName()).baseName()},saveAsLocal_:function(a){var e=N.create(this.displayName()),g=this.config_.userFile&&!this.config_.isRenamed?e.smartBaseName():e.baseName(),k=p.mime2App(this.mimeType());a=a?[e.extension()]:W[k];g+="."+(-1===a.indexOf(e.extension())?a[0]:e.extension());return this.selectFile_(g,
a).then(function(a){this.config_.mimeType=void 0;this.config_.extension=void 0;this.config_.driveDocId=void 0;this.config_.driveFileRole=void 0;this.config_.preferredFilename=void 0;this.config_.newDocument=void 0;this.saveFileEntryAndUpdateCache_(a);return this.copyFile_(this.config_.privateFile,this.config_.userFile)}.bind(this),function(){return c.reject({userCancelled:!0})})},initAppState_:function(a){var c=this.mimeType();if(c&&0!==c.length){var g=p.mime2App(c),k=window.navigator.onLine?"online":
"offline",l="non-local-user-"+k;if(/^file:\/\/\//.test(this.originalURL())||this.userFilePath())l="local-user-"+k;this.sendCachableGAEvent_({category:"file-source",action:l,label:g});c=p.mime2Extension(c);e.recordFileType(c);q.setApp(g,c);q.updateState(a)}else throw Error("Unknown mimeType; unable to know which app to load");},sendCachableGAEvent_:function(a){if(window.navigator.onLine)H.sendEvent(a);else{var c=this.getGAPendingStore_();c.push(a);T.setItem("pending_ga",JSON.stringify(c))}},getGAPendingStore_:function(){var a;
try{a=T.getItem("pending_ga"),a=JSON.parse(a),Array.isArray(a)||(a=[])}catch(c){a=[],console.warn("Failed to initialize file store so resetting it to be empty: "+c)}return a},whenDone_:function(){this.isReady=!0;return c.resolve(!0)},handleDriveError_:function(a){switch(w.getErrorCode(a)){case O.FILE_NOT_FOUND:this.throwFileNotFoundException_();break;case O.INTERNAL_SERVER_ERROR:case O.OFFLINE:this.throwTemporaryUnableToOpenException_(a);break;default:this.handleGenericFileError_(a)}},throwTemporaryUnableToOpenException_:function(a){throw new K({title:"temporary_unable_to_open_error_short_msg",
details:"temporary_unable_to_open_error_msg",message:E.isString(a)&&a||a.message||w.getErrorCode(a)});},handleGenericFileError_:function(a){if("SecurityError"===a.name)this.throwSecurityException_();else if(a instanceof G)this.throwTimeoutException_(a);else{if(a instanceof A)throw a;if(a instanceof z)throw a;if(a instanceof t)throw a;this.throwFileOpenCrashException_(a)}},throwEntryPointException_:function(){throw new K({title:"entry_point_error_short_msg",details:"entry_point_error_msg"});},throwSecurityException_:function(){throw new K({title:"file_opened_in_incognito_mode_error_title",
details:"file_opened_in_incognito_mode_error_details"});},throwTimeoutException_:function(a){a.title=x.getMessage("download_file_timeout_error_short_msg");a.details=x.getMessage("download_file_timeout_error_msg");throw a;},throwFileNotFoundException_:function(){throw new K({title:"file_not_found_error_short_msg",details:"file_not_found_error_msg"});},throwFileOpenCrashException_:function(a){var c=new K({title:"file_open_crash_error_short_msg",details:"file_open_crash_error_msg",message:E.isString(a)&&
a||a.message||w.getErrorCode(a)});c.stack=a.stack;throw c;},cacheInfo_:function(){var a={originalURL:this.config_.originalURL,isDownloaded:this.config_.isDownloaded,streamURL:this.config_.streamURL,mimeType:this.config_.mimeType,extension:this.config_.extension,privateFilePath:this.privateFilePath(),downloadFilePath:this.downloadFilePath(),downloadFileName:this.config_.downloadFileName,userFileId:this.config_.userFile&&window.RequestFileSystem&&chrome.fileSystem.retainEntry(this.config_.userFile),
driveDocId:this.config_.driveDocId,newdocument:this.config_.newdocument,driveFileRole:this.config_.driveFileRole,title:this.config_.title,parents:this.config_.parents,isRenamed:this.config_.isRenamed,uuid:this.uuid_};this.cacheFileDetails(a)},restoreFileById_:function(a){return c.promise(function(c,e){window.RequestFileSystem?chrome.fileSystem.restoreEntry(a,c):e(Error("NoAccessToFileSystem"))})},restorePrivateFile_:function(a){return this.getTempFs_().then(function(c){return a?this.openFileAndSaveEntry_(c,
a,"privateFile"):this.createPrivateFile_()}.bind(this))},createDownloadableFile_:function(){return this.getTempFs_().then(function(a){return this.createDownloadableFileFromPrivateFile_(a)}.bind(this)).then(function(a){this.config_.downloadFile=a;this.config_.downloadFileName=this.displayName()}.bind(this))},restoreDownloadFile_:function(a){return this.getTempFs_().then(function(c){return a?this.openFileAndSaveEntry_(c,a,"downloadFile"):this.createDownloadableFile_()}.bind(this))},download_:function(){l.show();
var e=l.addContributor(.9);return(this.config_.driveDocId?g.download(this.config_.driveDocId,this.config_.driveDocResourceKey):void 0===this.config_.streamURL?c.reject(Error("FileManager needs URL to download")):(new m({baseUrl:this.config_.streamURL})).send()).then(function(c){return(new a(this.config_.privateFile)).writeData(c)}.bind(this),void 0,e).then(function(){this.config_.isDownloaded=!0;this.cacheInfo_();e(1);l.hide()}.bind(this))},loadPlugin_:function(){var a=this.mimeType(),c=p.mime2App(a);
if(!c||0===c.length)throw Error("Could not find app from mimeType: "+a);return(new k).loadPlugin(c)},selectFile_:function(a,e){return c.promise(function(c,g){window.chrome.fileSystem.chooseEntry({type:"saveFile",suggestedName:a,accepts:[{extensions:e}]},function(a){window.chrome.runtime.lastError&&"User cancelled"===window.chrome.runtime.lastError.message?g(Error(window.chrome.runtime.lastError.message)):window.chrome.fileSystem.getDisplayPath(a,function(e){a.localFilePath=e;c(a)})}.bind(this))}.bind(this))},
getTempFs_:function(){return c.promise(function(a,c){window.webkitRequestFileSystem(window.TEMPORARY,1048576,a,c)})},getFileFromFs_:function(a,e,g){return c.promise(function(c,k){a.root.getFile(e,g,c,k)})},createFile_:function(a,c){return this.getFileFromFs_(a,c,{create:!0,exclusive:!1})},openFile_:function(a,c){return this.getFileFromFs_(a,c,{create:!1})},createDownloadableFileFromPrivateFile_:function(a){return c.promise(function(c,e){var g=this.config_.privateFile,k=g.name.split("."),k=[k[0],k[1]].join("_downloadable.");
g.copyTo(a.root,k,c,e)}.bind(this))},deletePrivateFile_:function(a){return this.getTempFs_().then(function(e){return c.promise(function(c,g){e.root.getFile(a,{create:!1},function(a){a.remove(c,g)})})})},createPrivateFile_:function(a){return this.getTempFs_().then(function(a,c){var e=qa.generateUUID(),h=a||p.mime2Extension(this.mimeType()),e=[e,h].join(".");return this.createFile_(c,e)}.bind(this,a)).then(function(a){return this.config_.privateFile=a}.bind(this))},openFileAndSaveEntry_:function(a,
c,e){return this.openFile_(a,c).then(function(a){return this.config_[e]=a}.bind(this))},copyFile_:function(e,g){function k(e,h){var g=new a(e);return"File"===h.constructor.name?g.writeData(h):c.reject("Cannot copy file: Source is not a File")}return void 0===g?c.reject(Error("Cannot copy file: Missing destination file")):g.isFile?void 0===e?c.reject(Error("Cannot copy file: Missing source file")):e.file?this.getFileFromEntry_(e).then(k.bind(null,g)):k(g,e):c.reject("Cannot copy file: Destination is not a FileEntry/ a File")},
uploadDriveFile_:function(a){var c=this.config_.driveDocId,e=this.config_.driveDocResourceKey;return this.getFileFromEntry_(this.config_.privateFile).then(function(k){return g.upload(c,k,a,e)})},getFileFromEntry_:function(a){return c.promise(function(c,e){a.file?a.file(c):e(Error("Entry missing file function"))})},getPrivateFileFromEntry:function(){return this.getFileFromEntry_(this.config_.privateFile)},openOriginalFile_:function(a){var c;switch(this.getFileType_()){case "driveDoc":w.isValidDriveId(this.config_.driveDocId_)?
c=this.getDriveDoc_().catch(this.handleDriveError_.bind(this)):this.throwFileNotFoundException_();break;case "stream":c=this.getStream_().catch(this.handleGenericFileError_.bind(this));break;case "userFile":c=this.getUserFile_().catch(this.handleGenericFileError_.bind(this));break;case "newdocument":c=this.getNewDocument_(this.config_.newDocument).catch(this.handleGenericFileError_.bind(this));break;default:this.throwEntryPointException_(a)}return c.then(this.createDownloadableFile_.bind(this)).then(this.cacheInfo_.bind(this))}};
var W={word:["docx"],sheet:["xlsx"],point:["pptx"]};return new fa});
define("qowtRoot/utils/errorUtils",[],function(){return{stripStack:function(c){var p="";if(c=c.stack?c.stack.split("\n"):void 0)for(var p=p+(c[0]+";"),m=1;m<c.length;m++){var k=c[m].match(/\s*at\s*(\S*)\s*(\S*):(\d+):(\d+)\)/);if(k){k.shift();var a=k[1].lastIndexOf("/");k[1]=-1!==a?k[1].substr(a+1):k[1];p+=k.join(":")+";"}}return p},errorInfo:function(c){var p;c&&(p=c.e,c.e_info&&c.e_info.category&&(p+="; Category: "+c.e_info.category));return p},errorCode:function(c){return c&&c.split(";",1)[0]},
category:function(c){a:{c=c.split(";");for(var p=1;p<c.length;p++){var m=c[p].split(":");if("Category"===m[0].trim()){c=m[1].trim();break a}}c=""}return c}}});
define("errorObservers/gaExceptionLogger",["qowtRoot/pubsub/pubsub","qowtRoot/utils/errorUtils","utils/analytics/googleAnalytics"],function(c,p,m){var k="idle";c.subscribe("qowt:init",function(){k="idle"});return function(a){if("idle"===k){var c={msg:p.stripStack(a)||a.message||a.name||"unknown error",fatal:a.fatal};console.log("GA logging as:",c);m.sendException(c);k=a.fatal?"fatal exception logged":k}}});define("errorObservers/hideUI",["ui/progressSpinner"],function(c){return function(){c.hide()}});
define("errorObservers/showQOWT",[],function(){return function(c){c.silent||(document.getElementById("sandbox").style.display="block")}});
define("utils/analytics/performanceMetrics",["utils/analytics/googleAnalytics"],function(c){function p(a){var e=0,g=function(){e<a.length&&(c.sendEvent(a[e]),e++,g())};g()}function m(){var a=[],c=k.state.FF;k.actions.forEach(function(g){(g=k.lastLog[g])&&a.push({id:"recordEvent",category:"performance-metrics",action:g.action,label:c,value:g.value})});return a}var k={logs:[],state:{DCPSize:0,FF:""},lastLog:{CC:null},actions:["CC"]};return{log:function(a){k.logs.push(a);k.lastLog.hasOwnProperty(a.action)&&
(k.lastLog[a.action]=a);Object.keys(a.label).forEach(function(c){k.state[c]+=a.label[c]});if("CC"===a.action){var c=m();p(c)}}}});define("utils/sendUserFeedback",["qowtRoot/errors/errorCatcher","qowtRoot/utils/errorUtils"],function(c,p){var m=[];c.addObserver(function(c){var a=c.fatal?"FATAL: ":"NonFatal: ",a=a+(p.stripStack(c)||c.message||c.name||"unknown error");m.push(a)});return{openFeedbackUI:function(){chrome.feedbackPrivate&&chrome.feedbackPrivate.openFeedback(chrome.feedbackPrivate.FeedbackSource.QUICKOFFICE)}}});
define("utils/backgroundPageUtils",["qowtRoot/utils/promiseUtils","qowtRoot/third_party/when/when"],function(c){function p(){var a=new Promise(function(a,c){chrome&&chrome.runtime&&chrome.runtime.getBackgroundPage?chrome.runtime.getBackgroundPage(a):c(Error("chrome.runtime.getBackgroundPage not available"))});return Promise.race([a,c.delayThenReject(k,Error("chrome.runtime.getBackgroundPage timed out"))])}function m(e){var g=new Promise(function(a){var c=function(e){e.isReady?a(e):window.setTimeout(c.bind(null,
e),10)};c(e)});return Promise.race([g,c.delayThenReject(a,Error("Background page timed out getting ready"))])}var k=1E4,a=1E4;return{getPage:function(){return p().then(m)}}});
define("utils/urlUtils",["qowtRoot/utils/typeUtils"],function(c){return{parseURL:function(p){if(!c.isString(p))throw Error("Invalid URI");var m=p.split("?");p=m[0];var m=1<m.length?m[1]:"",k=this.parseQueryString(m);return{baseURL:p,queryString:m,queryObject:k}},parseQueryString:function(p){if(!c.isString(p))throw Error("Invalid QueryString");var m;if(p){m={};p=p.split(/[&;]/g);for(var k=0;k<p.length;k++)if(p[k]){var a=p[k].split("="),e=decodeURIComponent(a[0]).toLowerCase(),a=1<a.length?decodeURIComponent(a[1]):
void 0;m[e]=a}}return m},stripQueryString:function(){var c=this.parseURL(window.location.href);window.history.replaceState({},"",c.baseURL)}}});
!function(c,p){function m(m,q,t){var x=[];q=1==q?{entropy:!0}:q||{};m=g(e(q.entropy?[m,l(c)]:null==m?w():m,3),x);var H=new k(x),x=function(){for(var a=H.g(N),c=z,e=0;a<A;)a=(a+e)*u,c*=u,e=H.g(1);for(;a>=G;)a/=2,c/=2,e>>>=1;return(a+e)/c};return x.int32=function(){return 0|H.g(4)},x.quick=function(){return H.g(4)/4294967296},x.double=x,g(l(H.S),c),(q.pass||t||function(c,e,g,h){return h&&(h.S&&a(h,H),c.state=function(){return a(H,{})}),g?(p[K]=c,e):c})(x,m,"global"in q?q.global:this==p,q.state)}function k(a){var c,
e=a.length,g=this,k=0,l=g.i=g.j=0,m=g.S=[];for(e||(a=[e++]);k<u;)m[k]=k++;for(k=0;k<u;k++)m[k]=m[l=t&l+a[k%e]+(c=m[k])],m[l]=c;(g.g=function(a){for(var c,e=0,k=g.i,l=g.j,m=g.S;a--;)c=m[k=t&k+1],e=e*u+m[t&(m[k]=m[l=t&l+c])+(m[l]=c)];return g.i=k,g.j=l,e})(u)}function a(a,c){return c.i=a.i,c.j=a.j,c.S=a.S.slice(),c}function e(a,c){var g,k=[],l=typeof a;if(c&&"object"==l)for(g in a)try{k.push(e(a[g],c-1))}catch(m){}return k.length?k:"string"==l?a:a+"\x00"}function g(a,c){for(var e,g=a+"",k=0;k<g.length;)c[t&
k]=t&(e^=19*c[t&k])+g.charCodeAt(k++);return l(c)}function w(){try{var a;return q&&(a=q.randomBytes)?a=a(u):(a=new Uint8Array(u),(x.crypto||x.msCrypto).getRandomValues(a)),l(a)}catch(e){return a=x.navigator,[+new Date,x,a&&a.plugins,x.screen,l(c)]}}function l(a){return String.fromCharCode.apply(0,a)}var q,x=this,u=256,N=6,K="random",z=p.pow(u,N),A=p.pow(2,52),G=2*A,t=u-1;if(p["seed"+K]=m,g(p.random(),c),"object"==typeof module&&module.exports){module.exports=m;try{q=require("crypto")}catch(E){}}else"function"==
typeof define&&define.amd&&define("third_party/seedrandom/seedrandom.min",[],function(){return m})}([],Math);define("utils/timeUtils",[],function(){return{DAY_IN_MS:864E5,WEEK_IN_MS:6048E5,weekSinceEpoch:function(){var c=Date.now()/this.WEEK_IN_MS;return Math.ceil(c)}}});
define("common/elements/google-consumer-survey/google-consumer-survey",["qowtRoot/utils/localStorageManager","qowtRoot/utils/uuid","third_party/seedrandom/seedrandom.min","utils/timeUtils"],function(c,p,m,k){var a=90*k.DAY_IN_MS;window.GoogleConsumerSurvey=Polymer({is:"google-consumer-survey",properties:{siteId:{reflect:!1,value:""},targetPercentage:{reflect:!1,value:void 0},bucketing:{reflect:!1,value:void 0}},created:function(){this.UUID=c.getItem("__GCS_uuid")||p.generateUUID();c.setItem("__GCS_uuid",
this.UUID);window._402=window._402||{};window._402.promptHandlerUrl="https://www.google.com/insights/consumersurveys/gk/prompt"},attached:function(){this.shouldLaunchSurvey_()&&this.launchSurvey_()},shouldLaunchSurvey_:function(){var c=!1;this.targetPercentage||this.bucketing?this.surveyResultsStale_(k.WEEK_IN_MS)&&(c=this.sampleUser_()):c=this.surveyResultsStale_(a);return c},sampleUser_:function(){var a=!1,c=parseInt(this.UUID.split("-")[1],16),p=this.bucketing?65535/this.bucketing:65535,l=k.weekSinceEpoch(),
q=l%(this.bucketing||1)*p;c>=q&&c<q+p&&(this.fire("user-considered-for-sampling"),m(c*l)()<(void 0===this.targetPercentage?1:this.targetPercentage/100)&&(this.fire("user-sampled-for-survey"),a=!0));return a},surveyResultsStale_:function(a){var g=!0,k=c.getItem("__GCS_site_"+this.siteId);k&&(g=Date.now()-k>a);return g},launchSurvey_:function(){this.siteId&&0!==this.siteId.length&&this.parentNode?(this.scriptTag=document.createElement("script"),this.scriptTag.src="https://www.google.com/insights/consumersurveys/async_survey?force_http=1&site="+
this.siteId,this.appendChild(this.scriptTag),this.userSurveyed=!0,c.setItem("__GCS_site_"+this.siteId,Date.now())):console.warn("<google-consumer-survey>: missing siteId!")}});return{}});
define("monkeyLoader",["qowtRoot/features/utils"],function(c){function p(c,a,e){a([c],function(a){m++;e(a)},function(a){0===m?(console.warn("Failed to load "+c+". The monkey server is likely not running."),e()):(console.error("Monkey _is_ running, but we failed to laod module "+c+"."),console.error(a),console.error(a.stack))})}var m=0;return{load:function(k,a,e){a=a||"";c.isDebug()?(console.log("Loading "+k),p.apply(this,arguments)):e()}}});
define("controllers/application","qowtRoot/errors/errorCatcher qowtRoot/errors/qowtException qowtRoot/errors/unique/fileDoesNotExistError qowtRoot/utils/typeUtils qowtRoot/utils/tryUtils qowtRoot/utils/promiseUtils qowtRoot/messageBus/messageBus qowtRoot/features/utils controllers/appState controllers/fileManager errorObservers/gaExceptionLogger errorObservers/hideUI errorObservers/showQOWT utils/analytics/performanceMetrics utils/analytics/googleAnalytics utils/converter utils/metrics utils/sendUserFeedback utils/backgroundPageUtils utils/gdrive/driveUtils utils/urlUtils qowtRoot/third_party/when/when utils/gdrive/drive qowtRoot/utils/uuid qowtRoot/pubsub/pubsub qowtRoot/utils/localStorageManager common/elements/google-consumer-survey/google-consumer-survey".split(" "),function(c,
p,m,k,a,e,g,w,l,q,x,u,N,K,z,A,G,t,E,O,qa,T,H,ra,fa,W){function h(){va.app=A.mime2App(q.mimeType());var a=A.mime2Extension(q.mimeType()),c=!("docm"!==a&&"pptm"!==a&&"xlsm"!==a);q.getPrivateFileFromEntry().then(function(e){g.pushMessage({id:"openFile",displayName:q.displayName(),originalURL:q.originalURL(),userFileType:ja(),entryPoint:q.getEntryPoint(),driveFileReadOnly:"reader"===q.driveFileRole(),format:A.mime2Format(q.mimeType()),isRenamed:q.getCache().isRenamed,environment:va,isMacroEnabledFile:c,
newDocument:q.isNewDocument(),embedded:q.isEmbedded(),isIncognito:Qb,extension:a,fileSize:e.size})})}function R(c){c=c.data;if(!k.isString(c)&&!k.isObject(c))throw Error("Invlid content from Core");if(k.isString(c))c=a.withWarning("JSON Syntax error in content from Core").rethrow(JSON.parse.bind(JSON,c)),"NaClCrash"===c.name&&(P=!0);else if(P){var e=c;console.error("reporting minidump to local server");var h=new FormData;h.append("prod","Quickoffice");h.append("ver",chrome.runtime.getManifest().version);
h.append("upload_file_minidump",new Blob([e]));e=new XMLHttpRequest;e.open("POST",chrome.runtime.getManifest().crash_dump_server,!0);e.send(h);fa.publish("app:naclCrash")}P||g.pushMessage({id:"dcp",content:c})}function ab(a){if(a.keyCode&&(a.metaKey||a.ctrlKey))switch(a.keyCode){case 80:a.preventDefault();g.pushMessage({id:"print"});break;case 83:a.preventDefault()}}function Cc(){Dc();Lb({category:"network-status",action:window.navigator.onLine?"online":"offline"});return T.promise(function(a){chrome.identity.getProfileUserInfo(function(c){c=
""!==c.email;var e=window.navigator.onLine;Lb({category:"account-status",action:c?"signed-in":"signed-out"});Lb({category:"account-network",action:c?e?"signedin-online":"signedin-offline":e?"signedout-online":"signedout-offline"});a()}.bind(this))}.bind(this)).timeout(3E3,"Timed-out waiting for identity info").catch(function(){})}function Lb(a){if(window.navigator.onLine)z.sendEvent(a);else{var c=xb();c.push(a);W.setItem("pending_ga",JSON.stringify(c))}}function Dc(){if(window.navigator.onLine){var a=
xb();if(0<a.length)for(var c=0;c<a.length;c++)a[c]&&"object"===typeof a[c]&&z.sendEvent({category:a[c].category,action:a[c].action,label:a[c].label});W.setItem("pending_ga",JSON.stringify([]))}}function xb(){var a;try{a=W.getItem("pending_ga"),a=JSON.parse(a),Array.isArray(a)||(a=[])}catch(c){a=[],console.warn("Failed to initialize file store so resetting it to be empty: "+c)}return a}function bb(){return new Promise(function(a,c){chrome&&chrome.tabs&&chrome.tabs.get?chrome.tabs.get(wa,function(e){e?
(Qb=e.incognito,a()):c(Error("Missing tab for tabId "+wa))}):c(Error("Missing chrome.tabs API"))})}function Ca(){var a=T.defer();Nb().then(function(c){wa=c.tabId;a.resolve()},function(){chrome&&chrome.tabs&&chrome.tabs.getCurrent?chrome.tabs.getCurrent(function(c){c&&c.id?(wa=c.id,a.resolve()):a.reject(Error("Missing tab id"))}):a.reject(Error("Missing chrome.tabs API"))});return Promise.race([a.promise,e.delayThenReject(3E4,Error("Requesting current tab id timed out"))])}function Mb(){g.listen(Ec,
kb);g.listen(hd,cb);return Promise.resolve()}function Nb(){null===db&&(db=new Promise(function(a,c){chrome.mimeHandlerPrivate.getStreamInfo(function(e){chrome.runtime.lastError?c(chrome.runtime.lastError):a(e)})}));return db}function Da(){return Promise.all([Nb(),E.getPage()]).then(function(a){var c=q.getCache(),e=a[0];if(c&&c.originalURL===e.originalUrl)throw chrome.mimeHandlerPrivate.abortStream(),Error("Load from cache");return a[1].registerMimeHandlerStream(a[0])}).catch(function(){var a=qa.parseURL(window.location.href);
a.queryObject?(q.cacheFileDetails(a.queryObject),qa.stripQueryString()):a.queryObject=q.getCache();if(a.queryObject.state)return Ob(a.queryObject.state);if(a.queryObject.uuid)return a.queryObject.uuid;throw new m;})}function Ob(a){return E.getPage().then(function(c){var e;try{var g=JSON.parse(a);if(c.handleDriveDoc&&g.ids)e=c.handleDriveDoc(g.ids,g.resourceKeys),H.setUserId(g.userId);else throw new p("Missing handleDriveDoc api");}catch(h){throw new p({title:"something_not_right",details:"file_not_found_error_msg"});
}return e||T.reject(Error("Failed to retrieve the UUID for first Drive Doc"))})}function ga(a){return E.getPage().then(function(c){if(c.addReaperLock){Ga=a[1];if(!k.isString(Ga))throw Error("Failed to get a valid UUID");c.addReaperLock(wa);c=c.getFileDetails(Ga);if(!c)throw new p("Missing FileDetails object");c.lsUsed&&z.sendEvent({category:"local-storage",action:"true"});c=Object.create(c);return q.init(c,Ga)}throw Error("Background page's 'addReaperLock' function is undefined");}).then(Z)}function kb(a){var c=
!1;a&&a.data&&"dcpRequest"===a.data.id&&(c=!0);return c}function cb(a){return!kb(a)}function r(){var a=W.getItem("onboardingComplete");chrome.i18n.getMessage("@@ui_locale").match(/en[-_]us/i)&&a&&!w.isDebug()&&w.isEnabled("hats")&&window.setTimeout(function(){var a={word:{siteId:"wtkwz5qvgh3olklj43wihw3lhi",rate:3},sheet:{siteId:"renjicjirwkihjol6bv5k5q7hm",rate:8},point:{siteId:"4jgyc2mhqmpdwpatxatmggghiq",rate:4}},c=A.mime2App(q.mimeType());if(a[c]){var e=lb();e.siteId=a[c].siteId;e.targetPercentage=
a[c].rate;e.bucketing=12;document.body.appendChild(e)}},3E3)}function lb(){var a=document.createElement("google-consumer-survey");a.addEventListener("user-considered-for-sampling",function(){z.sendEvent({category:"user-survey",action:"sampling",label:"user-consired"})});a.addEventListener("user-sampled-for-survey",function(){z.sendEvent({category:"user-survey",action:"sampling",label:"user-sampled"})});return a}function Ec(a){if(a&&a.data&&a.data.content)if(a=a.data.content,-1!=="writeToExisting writeToNew writeToExistingDriveFile convertToDocs makeACopy download".split(" ").indexOf(a.name))Gc(a);
else{var c=ec;switch(a.name){case "oPT":case "oDC":case "owb":a.pa=q.privateFilePath();c(a);break;case "sDC":"OOXML"===A.mime2Format(q.mimeType())?c(a):q.createPrivateFile("docx").done(Fc.bind(ba,a,c));break;case "saveWkbk":"OOXML"===A.mime2Format(q.mimeType())?yb(a,c):q.createPrivateFile("xlsx").done(yb.bind(ba,a,c));break;case "sPT":"OOXML"===A.mime2Format(q.mimeType())?yb(a,c):q.createPrivateFile("pptx").done(yb.bind(ba,a,c));break;default:c(a)}}else throw Error("DCP Requests must have content");
}function Fc(a,c){a.name="saveAs";a.dst=q.privateFilePath();c(a)}function yb(a,c){a.dst=q.privateFilePath();c(a)}function Gc(a){switch(a.name){case "writeToExisting":q.overwriteUserFile().done(dc.bind(ba,a.name,q.userFilePath()),Ea.bind(ba,a.name));break;case "writeToNew":q.newUserFile(!1,a.context&&a.context.toLocal).then(dc.bind(ba,a.name,q.userFilePath()),Hc.bind(ba,a.name)).done(function(){},Ea.bind(ba,a.name));break;case "makeACopy":Ea(a.name);q.newUserFile(!0).done(Kc.bind(ba,q.userFilePath()),
la);break;case "writeToExistingDriveFile":Ea(a.name);q.overwriteUserFile(a.newRevision).done(Ic.bind(ba,a.token),Jc.bind(ba,a.token));break;case "convertToDocs":Ea(a.name);q.convertToDocs().done(gd,Na);break;case "download":M&&(chrome.downloads.onDeterminingFilename.addListener(function C(a,c){c({filename:q.tryAndGetDownloadFileName(),conflictAction:"uniquify"});chrome.downloads.onDeterminingFilename.removeListener(C);M=!0}),M=!1,q.downloadToLocalFile());Ea(a.name);break;default:console.log("#!#! Unexpected processAppRequest "+
a.name)}}function Pb(a){return T.promise(function(c){fc(Ab(a),c)})}function zb(a){return T.promise(function(c){var e=Ab(a);chrome&&chrome.tabs&&e&&chrome.tabs.update(wa,{url:e},c)})}function Ab(a){var c,e=a.result?a.result.alternateLink:void 0,g=A.extension2Format(a.result?a.result.fileExtension:void 0);if(e&&!e.match(/.*\/file\/.*/)&&!g)c=e,c=(a=c.match(/(.*)\?(.*)/))?a[2]&&0<a[2].length?c+"&nativeconvert=1":c+"nativeconvert=1":c+"?nativeconvert=1";else if(!e||e.match(/.*\/file\/.*/)||g)c="chrome-extension://"+
chrome.runtime.id+'/views/app.html?state={"ids":["'+a.result.id+'"],"action":"open"}';return c}function dc(a,c,e){q.userFilePath()!==c&&Fa();"writeToNew"===a&&"drive"===ja()?zb(e).then(Ea.bind(ba,a)):Ea(a);g.pushMessage({id:"userFileNotification",context:{type:"saveSuccess",format:A.mime2Format(q.mimeType()),userFileType:ja(),isRenamed:void 0,localFilePath:"local"===ja()?e.localFilePath:"",driveFileReadOnly:"reader"===q.driveFileRole()}})}function Hc(a){g.pushMessage({id:"dcp",content:{name:a,userCancelled:!0,
format:A.mime2Format(q.mimeType()),userFileType:ja(),driveFileReadOnly:"reader"===q.driveFileRole()}});g.pushMessage({id:"userFileNotification",context:{type:"saveCancel"}})}function Ic(a){g.pushMessage({id:"driveFileNotification",context:{type:"saveSuccess",saveToken:a}})}function Jc(a,c){g.pushMessage({id:"driveFileNotification",context:{type:"saveFailure",saveToken:a,errorCode:O.getErrorCode(c)}})}function gd(a){var c=I;g.pushMessage({id:"driveFileNotification",context:{type:"convertSuccess"}});
I=!1;if(!c)return Pb(a)}function Na(a){var c=I;I=!1;c||g.pushMessage({id:"recordEvent",category:"menu",action:"convertToDocsFailed"});g.pushMessage({id:"driveFileNotification",context:{type:"convertFailure",errorCode:O.getErrorCode(a)}})}function Kc(a,c){"drive"===ja()?Pb(c):(document.title=q.displayName(),q.userFilePath()!==a&&Fa(),g.pushMessage({id:"localFileNotification",context:{type:"copySuccess",displayName:q.displayName(),format:A.mime2Format(q.mimeType()),userFileType:ja(),driveFileReadOnly:!1}}))}
function la(a){"drive"===ja()&&(g.pushMessage({id:"recordEvent",category:"menu",action:"makeCopyFailed"}),g.pushMessage({id:"driveFileNotification",context:{type:"copyFailure",errorCode:O.getErrorCode(a)}}))}function Ea(a,c){document.title=q.displayName();g.pushMessage({id:"dcp",content:{name:a,displayName:q.displayName(),format:A.mime2Format(q.mimeType()),userFileType:ja(),driveFileReadOnly:"reader"===q.driveFileRole(),e:c&&c.message||c}})}function ec(c){if(ob&&ob.postMessage)c=c instanceof ArrayBuffer?
c:a.withWarning("Msg to Core must be JSON").rethrow(JSON.stringify.bind(JSON,c)),ob.postMessage(c);else throw Error("Error: NaCl module not ready?");}function ja(){var a;q.userFilePath()?a="local":q.driveDocId()&&(a="drive");return a}function hd(a){if(a&&a.data)switch(a.data.id){case "closeApp":window.close();break;case "reportAnIssue":t.openFeedbackUI();break;case "showHelp":case "signIntoDrive":fc(a.data.link);break;case "recordCount":G.recordCount(a.data.context);break;case "stateChange":a=a.data.data;
l.updateState(a.state,a.context);break;case "recordEvent":z.sendEvent(a.data);break;case "recordCachableEvent":Lb(a.data);break;case "createNewTab":fc(a.data.link);break;case "conversionCancelled":I=!0;break;case "reloadTab":if(wa&&chrome&&chrome.tabs){chrome.tabs.reload(wa);break}window.location.reload();break;case "setBlockUnload":chrome.mimeHandlerPrivate&&chrome.mimeHandlerPrivate.setShowBeforeUnloadDialog&&chrome.mimeHandlerPrivate.setShowBeforeUnloadDialog(!!a.data.blockUnload);break;case "fileNotFound":q.updateConfigAndCache(!0);
break;case "fileSaveSuccess":q.updateConfigAndCache();g.pushMessage({id:"updateFileInfo"});break;case "performanceMetrics":K.log(a.data)}}function fc(a,c){chrome&&chrome.tabs&&a&&a.match(/^https?:\/\/|^file:\/\/|^mailto:/i)&&chrome.tabs.create({url:a},c)}function Z(){aa();id();Fa();Oa();gc();ua();bb().then(function(){ba.openFile()}).catch(function(){Qb=!1;ba.openFile()})}function mb(a){var c={"2K3":"doc ppt xls dot pot xlt".split(" "),"2K7":"docx pptx xlsx dotx potx xltx docm pptm xlsm".split(" "),
CSV:["csv"]},e;Object.keys(c).every(function(g){return c[g].includes(a)?(e=g,!1):!0});return e}function aa(){q.getPrivateFileFromEntry().then(function(a){var c=A.mime2Extension(q.mimeType());K.log({category:"PERF_LOG",action:"SC",label:{FF:mb(c)},value:window.performance.now()});z.sendEvent({id:"recordEvent",category:"raw-data",action:"ViewingFullContent",label:"fileSize_bytes",value:a.size});z.sendEvent({id:"recordEvent",category:"raw-data",action:"file-ready",label:c})})}function id(){return E.getPage().then(function(a){if(a.cacheTabId)a.cacheTabId(Ga,
wa);else throw Error("Background page's 'cacheTabId' function is undefined");})}function Fa(){return E.getPage().then(function(a){if(a.cachePrivateFilePath)a.cachePrivateFilePath(Ga,q.privateFilePath());else throw Error("Background page's 'cachePrivateFilePath' function is undefined");})}function Oa(){return E.getPage().then(function(a){if(a.cacheDownloadFilePath)a.cacheDownloadFilePath(Ga,q.downloadFilePath());else throw Error("Background page's 'cacheDownloadFilePath' function is undefined");})}
function gc(){return E.getPage().then(function(a){if(a.cacheTimestamp)a.cacheTimestamp(Ga);else throw Error("Background page's 'cacheTimestamp' function is undefined");})}function ua(){return E.getPage().then(function(a){if(a.removeReaperLock)a.removeReaperLock(wa);else throw Error("Background page's 'removeReaperLock' function is undefined");})}var ba={openFile:function(){if(!q.isReady)throw Error("Error: app not ready to open file yet");l.updateState("Opening");document.title=q.displayName();var a=
A.mime2Icon(q.mimeType());if(a){var c=document.createElement("link");c.type="image/x-icon";c.rel="shortcut icon";c.href=a;document.getElementsByTagName("head")[0].appendChild(c)}if(ob=document.getElementById("qonacl"))ob.addEventListener("message",R,!1);else throw Error("App can not find core plugin");ia&&g.pushMessage({id:Pa,overrides:ia});h()}},nb,va,ob,P,ia,Pa="featureOverrides",wa,Ga,Qb=!1,I=!1,M=!0,db=null;(function(){chrome.runtime.onMessage.addListener(function(a,c,e){"reaperCheck"===a&&e({uuid:q.getUUID()})})})();
(function(){try{ia={};var a=window.sessionStorage.getItem(Pa),c=W.getItem(Pa);c||(c='{"edit":true,"pointEdit":true}');k.extend(ia,JSON.parse(a));k.extend(ia,JSON.parse(c));0<Object.keys(ia).length&&w.setOverrides(ia)}catch(e){}})();require(["monkeyLoader!monkeyAppClient"],function(){document.title="";nb=document.getElementById("sandbox");window.connectFromAppToQowt=new Date;g.connect(nb.contentWindow);var a=ra.generateUUID();z.setSessionGroup(a);l.init();va={locale:chrome.i18n.getMessage("@@ui_locale"),
defaultLocale:"en"};window.addEventListener("keydown",ab);c.addObserver(x);c.addObserver(u);c.addObserver(N);c.init();T.all([Cc(),Da(),Ca(),Mb()]).then(ga).then(r).done()});return ba});require(["third_party/domready/domReady!"],function(){require(["controllers/application"])});define("mainApp",function(){});
